version: '3'

services:
  connect:
    hostname: connect
    image: rstudio/rstudio-connect:jammy
    restart: always
    ports:
      - 3939:3939
    volumes:
      - $PWD/docker/rstudio-connect.gcfg:/etc/rstudio-connect/rstudio-connect.gcfg
    privileged: true
    platform: linux/amd64
    environment:
      RSTUDIO_CONNECT_HASTE: "enabled"
      RSC_LICENSE: ${CONNECT_LICENSE}
    
  connect-docker:
    extends:
      connect
    network_mode: host