
> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for stock-dashboard-python in 2000ms
ok 2 deploy stock-dashboard-python in 9000ms
ok 3 redeploy stock-dashboard-python in 7000ms
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 0ms

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for python-flasgger in 2000ms
ok 2 deploy python-flasgger in 7000ms
ok 3 redeploy python-flasgger in 6000ms
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 0ms

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for python-streamlit in 3000ms
ok 2 deploy python-streamlit in 6000ms
ok 3 redeploy python-streamlit in 6000ms
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 0ms

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for quarto-proj-r-shiny in 0ms # skip
not ok 2 deploy quarto-proj-r-shiny in 15000ms
# (from function `assert_output' in file contract/../node_modules/bats-assert/src/assert.bash, line 231,
#  from function `deploy_assertion' in file contract/deploy.bats, line 38,
#  in test file contract/deploy.bats, line 117)
#   `deploy_assertion' failed
#
# -- output does not contain substring --
# substring : "app_mode":"quarto-static"
# output    : {"guid":"e6c0af95-1368-45ed-b1ec-384a36c1a022","name":"","title":"quarto-proj-r-shiny","description":"quarto-proj-r-shiny description","access_type":"acl","connection_timeout":25,"read_timeout":30,"init_timeout":35,"idle_timeout":40,"max_processes":2,"min_processes":1,"max_conns_per_process":5,"load_factor":0.8,"memory_request":null,"memory_limit":null,"cpu_request":null,"cpu_limit":null,"amd_gpu_limit":null,"nvidia_gpu_limit":null,"service_account_name":null,"default_image_name":null,"created_time":"2024-05-13T13:52:37Z","last_deployed_time":"2024-05-13T13:52:38Z","bundle_id":"69","app_mode":"quarto-shiny","content_category":"","parameterized":false,"cluster_name":"Local","image_name":null,"r_version":"4.1.2","py_version":null,"quarto_version":"1.4.549","r_environment_management":true,"default_r_environment_management":null,"py_environment_management":null,"default_py_environment_management":null,"run_as":null,"run_as_current_user":false,"owner_guid":"cf934fb7-8624-436b-b635-47cf894909ac","content_url":"http://52.90.67.68:3939/content/e6c0af95-1368-45ed-b1ec-384a36c1a022/","dashboard_url":"http://52.90.67.68:3939/connect/#/apps/e6c0af95-1368-45ed-b1ec-384a36c1a022","app_role":"owner","id":"51"}
# --
#
not ok 3 redeploy quarto-proj-r-shiny in 14000ms
# (from function `assert_output' in file contract/../node_modules/bats-assert/src/assert.bash, line 231,
#  from function `deploy_assertion' in file contract/deploy.bats, line 38,
#  in test file contract/deploy.bats, line 124)
#   `deploy_assertion' failed
#
# -- output does not contain substring --
# substring : "app_mode":"quarto-static"
# output    : {"guid":"e6c0af95-1368-45ed-b1ec-384a36c1a022","name":"","title":"quarto-proj-r-shiny","description":"quarto-proj-r-shiny description","access_type":"acl","connection_timeout":25,"read_timeout":30,"init_timeout":35,"idle_timeout":40,"max_processes":2,"min_processes":1,"max_conns_per_process":5,"load_factor":0.8,"memory_request":null,"memory_limit":null,"cpu_request":null,"cpu_limit":null,"amd_gpu_limit":null,"nvidia_gpu_limit":null,"service_account_name":null,"default_image_name":null,"created_time":"2024-05-13T13:52:37Z","last_deployed_time":"2024-05-13T13:52:52Z","bundle_id":"70","app_mode":"quarto-shiny","content_category":"","parameterized":false,"cluster_name":"Local","image_name":null,"r_version":"4.1.2","py_version":null,"quarto_version":"1.4.549","r_environment_management":true,"default_r_environment_management":null,"py_environment_management":null,"default_py_environment_management":null,"run_as":null,"run_as_current_user":false,"owner_guid":"cf934fb7-8624-436b-b635-47cf894909ac","content_url":"http://52.90.67.68:3939/content/e6c0af95-1368-45ed-b1ec-384a36c1a022/","dashboard_url":"http://52.90.67.68:3939/connect/#/apps/e6c0af95-1368-45ed-b1ec-384a36c1a022","app_role":"owner","id":"51"}
# --
#
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 0ms # skip
error: Recipe `run` failed with exit code 1
Error occurred with content: quarto-proj-r-shiny

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for stock-api-fastapi in 3000ms
ok 2 deploy stock-api-fastapi in 33000ms
ok 3 redeploy stock-api-fastapi in 7000ms
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 0ms

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for python-quart in 3000ms
ok 2 deploy python-quart in 17000ms
ok 3 redeploy python-quart in 6000ms
ok 4 check for toml file in 1000ms
ok 5 deploy no requirements file in 0ms

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
not ok 1 setup_file failed
# (from function `setup_file' in test file contract/deploy.bats, line 19)
#   `R -e 'renv::restore(lockfile="renv.lock")' && \' failed
#
# R version 4.3.1 (2023-06-16) -- "Beagle Scouts"
# Copyright (C) 2023 The R Foundation for Statistical Computing
# Platform: aarch64-apple-darwin20 (64-bit)
#
# R is free software and comes with ABSOLUTELY NO WARRANTY.
# You are welcome to redistribute it under certain conditions.
# Type 'license()' or 'licence()' for distribution details.
#
#   Natural language support but running in an English locale
#
# R is a collaborative project with many contributors.
# Type 'contributors()' for more information and
# 'citation()' on how to cite R or R packages in publications.
#
# Type 'demo()' for some demos, 'help()' for on-line help, or
# 'help.start()' for an HTML browser interface to help.
# Type 'q()' to quit R.
#
# # Bootstrapping renv 0.15.2 --------------------------------------------------
# * Downloading renv 0.15.2 ... OK
# * Installing renv 0.15.2 ... Done!
# * Successfully installed and loaded renv 0.15.2.
# * Project '~/work/publishing-client/test/content/bundles/quarto-website-r-py' loaded. [renv 0.15.2]
# > renv::restore(lockfile="renv.lock")
# The following package(s) will be updated:
#
# # CRAN ===============================
# - Rcpp          [1.0.12 -> 1.0.10]
# - askpass       [1.2.0 -> 1.1]
# - bslib         [0.5.1 -> 0.4.2]
# - cli           [3.6.2 -> 3.6.1]
# - curl          [repo: RSPM -> CRAN; ver: 5.2.1 -> 5.0.0]
# - digest        [0.6.35 -> 0.6.31]
# - evaluate      [repo: RSPM -> CRAN; ver: 0.22 -> 0.21]
# - fontawesome   [0.5.2 -> 0.5.1]
# - fs            [1.6.4 -> 1.6.2]
# - glue          [1.7.0 -> 1.6.2]
# - htmltools     [0.5.6 -> 0.5.5]
# - jsonlite      [1.8.8 -> 1.8.4]
# - knitr         [repo: RSPM -> CRAN; ver: 1.44 -> 1.42]
# - lifecycle     [1.0.4 -> 1.0.3]
# - openssl       [2.1.2 -> 2.0.6]
# - packrat       [0.9.2 -> 0.9.1]
# - processx      [3.8.3 -> 3.8.1]
# - ps            [1.7.6 -> 1.7.5]
# - rlang         [1.1.3 -> 1.1.1]
# - rmarkdown     [repo: RSPM -> CRAN; ver: 2.25 -> 2.21]
# - rsconnect     [1.2.2 -> 0.8.29]
# - rstudioapi    [0.15.0 -> 0.14]
# - sass          [0.4.7 -> 0.4.6]
# - sys           [3.4.2 -> 3.4.1]
# - tinytex       [repo: RSPM -> CRAN; ver: 0.47 -> 0.45]
# - vctrs         [0.6.5 -> 0.6.2]
# - xfun          [repo: RSPM -> CRAN; ver: 0.40 -> 0.39]
# - yaml          [2.3.8 -> 2.3.7]
# - quarto        [* -> 1.2]
#
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/sys/sys_3.4.1.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/bslib/bslib_0.4.2.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/sass/sass_0.4.6.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/fs/fs_1.6.2.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/curl/curl_5.0.0.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://mran.microsoft.com/snapshot/2023-10-02/bin/macosx/big-sur-arm64/contrib/4.3/evaluate_0.21.tgz' ...
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/evaluate/evaluate_0.21.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/fontawesome/fontawesome_0.5.1.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/knitr/knitr_1.42.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/xfun/xfun_0.39.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/openssl/openssl_2.0.6.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://mran.microsoft.com/snapshot/2023-09-05/bin/macosx/big-sur-arm64/contrib/4.3/packrat_0.9.1.tgz' ...
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/packrat/packrat_0.9.1.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/processx/processx_3.8.1.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/Rcpp/Rcpp_1.0.10.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/rmarkdown/rmarkdown_2.21.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/vctrs/vctrs_0.6.2.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/tinytex/tinytex_0.45.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/rsconnect/rsconnect_0.8.29.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/rstudioapi/rstudioapi_0.14.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://mran.microsoft.com/snapshot/2023-09-19/bin/macosx/big-sur-arm64/contrib/4.3/quarto_1.2.tgz' ...
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/quarto/quarto_1.2.tar.gz' ...
# 	OK [file is up to date]
# Installing sys [3.4.1] ...
# 	OK [built from source]
# Moving sys [3.4.1] into the cache ...
# 	OK [moved to cache in 0.58 milliseconds]
# Installing askpass [1.1] ...
# 	OK [linked cache]
# Installing digest [0.6.31] ...
# 	OK [linked cache]
# Installing rlang [1.1.1] ...
# 	OK [linked cache]
# Installing htmltools [0.5.5] ...
# 	OK [linked cache]
# Installing jsonlite [1.8.4] ...
# 	OK [linked cache]
# Installing fs [1.6.2] ...
# 	FAILED
# Error installing package 'fs':
# ==============================
#
# * installing to library ‘/Users/kgartland/work/publishing-client/test/content/bundles/quarto-website-r-py/renv/staging/1’
# * installing *source* package ‘fs’ ...
# ** package ‘fs’ successfully unpacked and MD5 sums checked
# ** using staged installation
# ** libs
# using C++ compiler: ‘Apple clang version 15.0.0 (clang-1500.3.9.4)’
# using SDK: ‘MacOSX14.4.sdk’
# clang++ -arch arm64 -std=gnu++17 -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I./libuv-1.44.2/include -I. -pthread  -I/opt/R/arm64/include    -fPIC  -falign-functions=64 -Wall -g -O2  -c dir.cc -o dir.o
# clang++ -arch arm64 -std=gnu++17 -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I./libuv-1.44.2/include -I. -pthread  -I/opt/R/arm64/include    -fPIC  -falign-functions=64 -Wall -g -O2  -c error.cc -o error.o
# clang++ -arch arm64 -std=gnu++17 -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I./libuv-1.44.2/include -I. -pthread  -I/opt/R/arm64/include    -fPIC  -falign-functions=64 -Wall -g -O2  -c file.cc -o file.o
# In file included from file.cc:13:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/vector:321:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_bool.h:20:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_integral.h:32:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/locale:202:
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:966:34: error: too many arguments provided to function-like macro invocation
#     int length(state_type& __st, const extern_type* __frm, const extern_type* __end, size_t __mx) const
#                                  ^
# /Library/Frameworks/R.framework/Resources/include/Rinternals.h:968:9: note: macro 'length' defined here
# #define length(x)               Rf_length(x)
#         ^
# In file included from file.cc:13:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/vector:321:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_bool.h:20:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_integral.h:32:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/locale:202:
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:965:5: error: '__abi_tag__' attribute only applies to structs, variables, functions, and namespaces
#     _LIBCPP_INLINE_VISIBILITY
#     ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__config:891:37: note: expanded from macro '_LIBCPP_INLINE_VISIBILITY'
# #  define _LIBCPP_INLINE_VISIBILITY _LIBCPP_HIDE_FROM_ABI
#                                     ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__config:870:26: note: expanded from macro '_LIBCPP_HIDE_FROM_ABI'
#           __attribute__((__abi_tag__(_LIBCPP_TOSTRING(_LIBCPP_ODR_SIGNATURE))))
#                          ^
# In file included from file.cc:13:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/vector:321:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_bool.h:20:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_integral.h:32:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/locale:202:
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:966:15: error: expected ';' at end of declaration list
#     int length(state_type& __st, const extern_type* __frm, const extern_type* __end, size_t __mx) const
#               ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:1052:34: error: too many arguments provided to function-like macro invocation
#     int length(state_type& __st, const extern_type* __frm, const extern_type* __end, size_t __mx) const
#                                  ^
# /Library/Frameworks/R.framework/Resources/include/Rinternals.h:968:9: note: macro 'length' defined here
# #define length(x)               Rf_length(x)
#         ^
# In file included from file.cc:13:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/vector:321:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_bool.h:20:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_integral.h:32:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/locale:202:
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:1051:5: error: '__abi_tag__' attribute only applies to structs, variables, functions, and namespaces
#     _LIBCPP_INLINE_VISIBILITY
#     ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__config:891:37: note: expanded from macro '_LIBCPP_INLINE_VISIBILITY'
# #  define _LIBCPP_INLINE_VISIBILITY _LIBCPP_HIDE_FROM_ABI
#                                     ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__config:870:26: note: expanded from macro '_LIBCPP_HIDE_FROM_ABI'
#           __attribute__((__abi_tag__(_LIBCPP_TOSTRING(_LIBCPP_ODR_SIGNATURE))))
#                          ^
# In file included from file.cc:13:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/vector:321:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_bool.h:20:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_integral.h:32:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/locale:202:
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:1052:15: error: expected ';' at end of declaration list
#     int length(state_type& __st, const extern_type* __frm, const extern_type* __end, size_t __mx) const
#               ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:1137:34: error: too many arguments provided to function-like macro invocation
#     int length(state_type& __st, const extern_type* __frm, const extern_type* __end, size_t __mx) const
#                                  ^
# /Library/Frameworks/R.framework/Resources/include/Rinternals.h:968:9: note: macro 'length' defined here
# #define length(x)               Rf_length(x)
#         ^
# In file included from file.cc:13:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/vector:321:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_bool.h:20:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_integral.h:32:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/locale:202:
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:1136:5: error: '__abi_tag__' attribute only applies to structs, variables, functions, and namespaces
#     _LIBCPP_INLINE_VISIBILITY
#     ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__config:891:37: note: expanded from macro '_LIBCPP_INLINE_VISIBILITY'
# #  define _LIBCPP_INLINE_VISIBILITY _LIBCPP_HIDE_FROM_ABI
#                                     ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__config:870:26: note: expanded from macro '_LIBCPP_HIDE_FROM_ABI'
#           __attribute__((__abi_tag__(_LIBCPP_TOSTRING(_LIBCPP_ODR_SIGNATURE))))
#                          ^
# In file included from file.cc:13:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/vector:321:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_bool.h:20:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_integral.h:32:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/locale:202:
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:1137:15: error: expected ';' at end of declaration list
#     int length(state_type& __st, const extern_type* __frm, const extern_type* __end, size_t __mx) const
#               ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:1313:34: error: too many arguments provided to function-like macro invocation
#     int length(state_type& __st, const extern_type* __frm, const extern_type* __end, size_t __mx) const
#                                  ^
# /Library/Frameworks/R.framework/Resources/include/Rinternals.h:968:9: note: macro 'length' defined here
# #define length(x)               Rf_length(x)
#         ^
# In file included from file.cc:13:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/vector:321:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_bool.h:20:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_integral.h:32:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/locale:202:
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:1312:5: error: '__abi_tag__' attribute only applies to structs, variables, functions, and namespaces
#     _LIBCPP_INLINE_VISIBILITY
#     ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__config:891:37: note: expanded from macro '_LIBCPP_INLINE_VISIBILITY'
# #  define _LIBCPP_INLINE_VISIBILITY _LIBCPP_HIDE_FROM_ABI
#                                     ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__config:870:26: note: expanded from macro '_LIBCPP_HIDE_FROM_ABI'
#           __attribute__((__abi_tag__(_LIBCPP_TOSTRING(_LIBCPP_ODR_SIGNATURE))))
#                          ^
# In file included from file.cc:13:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/vector:321:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_bool.h:20:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_integral.h:32:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/locale:202:
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:1313:15: error: expected ';' at end of declaration list
#     int length(state_type& __st, const extern_type* __frm, const extern_type* __end, size_t __mx) const
#               ^
# 12 errors generated.
# make: *** [file.o] Error 1
# ERROR: compilation failed for package ‘fs’
# * removing ‘/Users/kgartland/work/publishing-client/test/content/bundles/quarto-website-r-py/renv/staging/1/fs’
# Error: install of package 'fs' failed [error code 1]
# In addition: Warning messages:
# 1: curl: (28) Failed to connect to mran.microsoft.com port 443 after 20006 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20002 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20005 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20006 ms: Timeout was reached
# 2: curl: (28) Failed to connect to mran.microsoft.com port 443 after 20005 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20002 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20006 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20009 ms: Timeout was reached
# 3: failed to retrieve 'https://mran.microsoft.com/snapshot/2023-10-02/bin/macosx/big-sur-arm64/contrib/4.3/evaluate_0.21.tgz' [error code 28]
# 4: curl: (28) Failed to connect to mran.microsoft.com port 443 after 20005 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20004 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20006 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20011 ms: Timeout was reached
# 5: failed to retrieve 'https://mran.microsoft.com/snapshot/2023-09-05/bin/macosx/big-sur-arm64/contrib/4.3/packrat_0.9.1.tgz' [error code 28]
# 6: curl: (28) Failed to connect to mran.microsoft.com port 443 after 20010 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20011 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20011 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20009 ms: Timeout was reached
# 7: failed to retrieve 'https://mran.microsoft.com/snapshot/2023-09-19/bin/macosx/big-sur-arm64/contrib/4.3/quarto_1.2.tgz' [error code 28]
# Traceback (most recent calls last):
# 12: renv::restore(lockfile = "renv.lock")
# 11: renv_restore_run_actions(project, diff, current, lockfile, rebuild)
# 10: renv_install_impl(records)
#  9: renv_install_staged(records)
#  8: renv_install_default(records)
#  7: handler(package, renv_install_package(record))
#  6: renv_install_package(record)
#  5: withCallingHandlers(renv_install_package_impl(record), error = function(e) {
#         vwritef("\tFAILED")
#         writef(e$output)
#     })
#  4: renv_install_package_impl(record)
#  3: r_cmd_install(package, path)
#  2: r_exec_error(package, output, "install", status)
#  1: stop(error)
# Execution halted
# publisher: error: expected "<guid>"
# bats warning: Executed 1 instead of expected 5 tests
error: Recipe `run` failed with exit code 1
Error occurred with content: quarto-website-r-py

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
not ok 1 setup_file failed
# (from function `setup_file' in test file contract/deploy.bats, line 9)
#   `setup_file() {' failed with status 130
#
# R version 4.3.1 (2023-06-16) -- "Beagle Scouts"
# Copyright (C) 2023 The R Foundation for Statistical Computing
# Platform: aarch64-apple-darwin20 (64-bit)
#
# R is free software and comes with ABSOLUTELY NO WARRANTY.
# You are welcome to redistribute it under certain conditions.
# Type 'license()' or 'licence()' for distribution details.
#
#   Natural language support but running in an English locale
#
# R is a collaborative project with many contributors.
# Type 'contributors()' for more information and
# 'citation()' on how to cite R or R packages in publications.
#
# Type 'demo()' for some demos, 'help()' for on-line help, or
# 'help.start()' for an HTML browser interface to help.
# Type 'q()' to quit R.
#
# * Project '~/work/publishing-client/test/content/bundles/quarto-website-r' loaded. [renv 0.15.2]
# > renv::restore(lockfile="renv.lock")
# The following package(s) will be updated:
#
# # CRAN ===============================
# - Rcpp          [1.0.12 -> 1.0.10]
# - askpass       [1.2.0 -> 1.1]
# - bslib         [0.5.1 -> 0.4.2]
# - cli           [3.6.2 -> 3.6.1]
# - curl          [repo: RSPM -> CRAN; ver: 5.2.1 -> 5.0.0]
# - digest        [0.6.35 -> 0.6.31]
# - evaluate      [repo: RSPM -> CRAN; ver: 0.22 -> 0.21]
# - fontawesome   [0.5.2 -> 0.5.1]
# - fs            [1.6.4 -> 1.6.2]
# - glue          [1.7.0 -> 1.6.2]
# - htmltools     [0.5.6 -> 0.5.5]
# - jsonlite      [1.8.8 -> 1.8.4]
# - knitr         [repo: RSPM -> CRAN; ver: 1.44 -> 1.42]
# - lifecycle     [1.0.4 -> 1.0.3]
# - openssl       [2.1.2 -> 2.0.6]
# - packrat       [0.9.2 -> 0.9.1]
# - processx      [3.8.3 -> 3.8.1]
# - ps            [1.7.6 -> 1.7.5]
# - renv          [0.15.2 -> 1.0.7]
# - rlang         [1.1.3 -> 1.1.1]
# - rmarkdown     [repo: RSPM -> CRAN; ver: 2.25 -> 2.21]
# - rsconnect     [1.2.2 -> 0.8.29]
# - rstudioapi    [0.15.0 -> 0.14]
# - sass          [0.4.7 -> 0.4.6]
# - sys           [3.4.2 -> 3.4.1]
# - tinytex       [repo: RSPM -> CRAN; ver: 0.47 -> 0.45]
# - vctrs         [0.6.5 -> 0.6.2]
# - xfun          [repo: RSPM -> CRAN; ver: 0.40 -> 0.39]
# - yaml          [2.3.8 -> 2.3.7]
# - quarto        [* -> 1.2]
#
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/bslib/bslib_0.4.2.tar.gz' ...
# 	OK [file is up to date]
#
# Traceback (most recent calls last):
# 35: renv::restore(lockfile = "renv.lock")
# 34: renv_restore_run_actions(project, diff, current, lockfile, rebuild)
# 33: retrieve(packages)
# 32: handler(package, renv_retrieve_impl(package))
# 31: renv_retrieve_impl(package)
# 30: renv_retrieve_repos(record)
# 29: catch(withCallingHandlers(method(record), renv.retrieve.error = function(error) {
#         errors$push(error$data)
#     }))
# 28: tryCatch(withCallingHandlers(expr, error = renv_error_capture),
#         error = renv_error_tag)
# 27: tryCatchList(expr, classes, parentenv, handlers)
# 26: tryCatchOne(expr, names, parentenv, handlers[[1L]])
# 25: doTryCatch(return(expr), name, parentenv, handler)
# 24: withCallingHandlers(expr, error = renv_error_capture)
# 23: withCallingHandlers(method(record), renv.retrieve.error = function(error) {
#         errors$push(error$data)
#     })
# 22: method(record)
# 21: catch(renv_retrieve_repos_impl(record, "source", name, url))
# 20: tryCatch(withCallingHandlers(expr, error = renv_error_capture),
#         error = renv_error_tag)
# 19: tryCatchList(expr, classes, parentenv, handlers)
# 18: tryCatchOne(expr, names, parentenv, handlers[[1L]])
# 17: doTryCatch(return(expr), name, parentenv, handler)
# 16: withCallingHandlers(expr, error = renv_error_capture)
# 15: renv_retrieve_repos_impl(record, "source", name, url)
# 14: renv_retrieve_package(record, url, path)
# 13: renv_retrieve_successful(record, path)
# 12: retrieve(package)
# 11: handler(package, renv_retrieve_impl(package))
# 10: renv_retrieve_impl(package)
#  9: renv_retrieve_successful(record, path)
#  8: retrieve(package)
#  7: handler(package, renv_retrieve_impl(package))
#  6: renv_retrieve_impl(package)
#  5: renv_retrieve_successful(record, path)
#  4: renv_description_read(path, subdir = subdir)
#  3: filebacked(scope = "DESCRIPTION", path = path, callback = renv_description_read_impl,
#         subdir = subdir, ...)
#  2: renv_filebacked_set(scope, path, result)
#  1: stopifnot(renv_path_absolute(path))
# Execution halted
# publisher: error: expected "<guid>"

# Received SIGINT, aborting ...

# bats warning: Executed 1 instead of expected 5 tests
Error occurred with content: quarto-website-r

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
Failed to create BATS_FILE_TMPDIR=/var/folders/qn/0zx6630d3b15_6jcdyl_20dc0000gp/T/bats-run-940POw/file/0

# Received SIGINT, aborting ...

# bats warning: Executed 0 instead of expected 5 tests
Error occurred with content: plumber-tableau-loess

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
not ok 1 requirements create works as expected for blastula-multiple-images in 0ms # skip

# Received SIGINT, aborting ...

# bats warning: Executed 1 instead of expected 5 tests
Error occurred with content: blastula-multiple-images
Error occurred with content: quarto-proj-r
Error occurred with content: quarto-website-r-py-separate-files-deps

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for quarto-multidoc-proj-none in 1000ms # skip
ok 2 deploy quarto-multidoc-proj-none in 9000ms
not ok 3 redeploy quarto-multidoc-proj-none in 4000ms
# (in test file contract/deploy.bats, line 123)
#   `run ${EXE} redeploy ci_deploy ${FULL_PATH}' failed with status 130

# Received SIGINT, aborting ...

# bats warning: Executed 3 instead of expected 5 tests
Error occurred with content: quarto-multidoc-proj-none
Error occurred with content: mpg-shinyApp
Error occurred with content: quarto-website-r-deps
Error occurred with content: portfolio-report

> deploy
> bats -r -T -t ./contract/deploy.bats

Error occurred with content: quarto-proj-none-ojs

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
/Users/kgartland/work/publishing-client/test/bats/node_modules/bats/libexec/bats-core/bats-exec-test: line 304: * 1000: syntax error: operand expected (error token is "* 1000")
not ok 1  in 1715608855000ms

# Received SIGINT, aborting ...

# bats warning: Executed 1 instead of expected 5 tests
Error occurred with content: python-pycnic-py3

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for plotly-shiny-matrix-input in 1000ms # skip
/Users/kgartland/work/publishing-client/test/bats/node_modules/bats/libexec/bats-core/bats: line 328: 47318 Hangup: 1               exec bats-exec-suite "${flags[@]}" "${filenames[@]}"
     47319                       | bats_test_count_validator
     47320                       | "$interpolated_formatter" "${formatter_flags[@]}"

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for stock-dashboard-python in 2000ms
ok 2 deploy stock-dashboard-python in 9000ms
ok 3 redeploy stock-dashboard-python in 8000ms
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 0ms

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for python-flasgger in 2000ms
ok 2 deploy python-flasgger in 7000ms
ok 3 redeploy python-flasgger in 7000ms
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 1000ms

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for python-streamlit in 3000ms
ok 2 deploy python-streamlit in 7000ms
ok 3 redeploy python-streamlit in 6000ms
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 0ms

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for quarto-proj-r-shiny in 0ms # skip
not ok 2 deploy quarto-proj-r-shiny in 19000ms
# (from function `assert_output' in file contract/../node_modules/bats-assert/src/assert.bash, line 231,
#  from function `deploy_assertion' in file contract/deploy.bats, line 38,
#  in test file contract/deploy.bats, line 117)
#   `deploy_assertion' failed
#
# -- output does not contain substring --
# substring : "app_mode":"quarto-static"
# output    : {"guid":"bdf3c72a-6517-4231-a84e-8e402dcbe640","name":"","title":"quarto-proj-r-shiny","description":"quarto-proj-r-shiny description","access_type":"acl","connection_timeout":25,"read_timeout":30,"init_timeout":35,"idle_timeout":40,"max_processes":2,"min_processes":1,"max_conns_per_process":5,"load_factor":0.8,"memory_request":null,"memory_limit":null,"cpu_request":null,"cpu_limit":null,"amd_gpu_limit":null,"nvidia_gpu_limit":null,"service_account_name":null,"default_image_name":null,"created_time":"2024-05-13T14:03:08Z","last_deployed_time":"2024-05-13T14:03:09Z","bundle_id":"84","app_mode":"quarto-shiny","content_category":"","parameterized":false,"cluster_name":"Local","image_name":null,"r_version":"4.1.2","py_version":null,"quarto_version":"1.4.549","r_environment_management":true,"default_r_environment_management":null,"py_environment_management":null,"default_py_environment_management":null,"run_as":null,"run_as_current_user":false,"owner_guid":"cf934fb7-8624-436b-b635-47cf894909ac","content_url":"http://52.90.67.68:3939/content/bdf3c72a-6517-4231-a84e-8e402dcbe640/","dashboard_url":"http://52.90.67.68:3939/connect/#/apps/bdf3c72a-6517-4231-a84e-8e402dcbe640","app_role":"owner","id":"59"}
# --
#
not ok 3 redeploy quarto-proj-r-shiny in 18000ms
# (from function `assert_output' in file contract/../node_modules/bats-assert/src/assert.bash, line 231,
#  from function `deploy_assertion' in file contract/deploy.bats, line 38,
#  in test file contract/deploy.bats, line 124)
#   `deploy_assertion' failed
#
# -- output does not contain substring --
# substring : "app_mode":"quarto-static"
# output    : {"guid":"bdf3c72a-6517-4231-a84e-8e402dcbe640","name":"","title":"quarto-proj-r-shiny","description":"quarto-proj-r-shiny description","access_type":"acl","connection_timeout":25,"read_timeout":30,"init_timeout":35,"idle_timeout":40,"max_processes":2,"min_processes":1,"max_conns_per_process":5,"load_factor":0.8,"memory_request":null,"memory_limit":null,"cpu_request":null,"cpu_limit":null,"amd_gpu_limit":null,"nvidia_gpu_limit":null,"service_account_name":null,"default_image_name":null,"created_time":"2024-05-13T14:03:08Z","last_deployed_time":"2024-05-13T14:03:28Z","bundle_id":"85","app_mode":"quarto-shiny","content_category":"","parameterized":false,"cluster_name":"Local","image_name":null,"r_version":"4.1.2","py_version":null,"quarto_version":"1.4.549","r_environment_management":true,"default_r_environment_management":null,"py_environment_management":null,"default_py_environment_management":null,"run_as":null,"run_as_current_user":false,"owner_guid":"cf934fb7-8624-436b-b635-47cf894909ac","content_url":"http://52.90.67.68:3939/content/bdf3c72a-6517-4231-a84e-8e402dcbe640/","dashboard_url":"http://52.90.67.68:3939/connect/#/apps/bdf3c72a-6517-4231-a84e-8e402dcbe640","app_role":"owner","id":"59"}
# --
#
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 0ms # skip
error: Recipe `run` failed with exit code 1
Error occurred with content: quarto-proj-r-shiny

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for stock-api-fastapi in 3000ms
ok 2 deploy stock-api-fastapi in 8000ms
ok 3 redeploy stock-api-fastapi in 10000ms
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 0ms

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for python-quart in 2000ms
ok 2 deploy python-quart in 8000ms
ok 3 redeploy python-quart in 7000ms
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 0ms

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
not ok 1 setup_file failed
# (from function `setup_file' in test file contract/deploy.bats, line 9)
#   `setup_file() {' failed with status 130
#
# R version 4.3.1 (2023-06-16) -- "Beagle Scouts"
# Copyright (C) 2023 The R Foundation for Statistical Computing
# Platform: aarch64-apple-darwin20 (64-bit)
#
# R is free software and comes with ABSOLUTELY NO WARRANTY.
# You are welcome to redistribute it under certain conditions.
# Type 'license()' or 'licence()' for distribution details.
#
#   Natural language support but running in an English locale
#
# R is a collaborative project with many contributors.
# Type 'contributors()' for more information and
# 'citation()' on how to cite R or R packages in publications.
#
# Type 'demo()' for some demos, 'help()' for on-line help, or
# 'help.start()' for an HTML browser interface to help.
# Type 'q()' to quit R.
#
# * Project '~/work/publishing-client/test/content/bundles/quarto-website-r-py' loaded. [renv 0.15.2]
# > renv::restore(lockfile="renv.lock")
# The following package(s) will be updated:
#
# # CRAN ===============================
# - Rcpp          [1.0.12 -> 1.0.10]
# - askpass       [1.2.0 -> 1.1]
# - bslib         [0.5.1 -> 0.4.2]
# - cli           [3.6.2 -> 3.6.1]
# - curl          [repo: RSPM -> CRAN; ver: 5.2.1 -> 5.0.0]
# - digest        [0.6.35 -> 0.6.31]
# - evaluate      [repo: RSPM -> CRAN; ver: 0.22 -> 0.21]
# - fontawesome   [0.5.2 -> 0.5.1]
# - fs            [1.6.4 -> 1.6.2]
# - glue          [1.7.0 -> 1.6.2]
# - htmltools     [0.5.6 -> 0.5.5]
# - jsonlite      [1.8.8 -> 1.8.4]
# - knitr         [repo: RSPM -> CRAN; ver: 1.44 -> 1.42]
# - lifecycle     [1.0.4 -> 1.0.3]
# - openssl       [2.1.2 -> 2.0.6]
# - packrat       [0.9.2 -> 0.9.1]
# - processx      [3.8.3 -> 3.8.1]
# - ps            [1.7.6 -> 1.7.5]
# - rlang         [1.1.3 -> 1.1.1]
# - rmarkdown     [repo: RSPM -> CRAN; ver: 2.25 -> 2.21]
# - rsconnect     [1.2.2 -> 0.8.29]
# - rstudioapi    [0.15.0 -> 0.14]
# - sass          [0.4.7 -> 0.4.6]
# - sys           [3.4.2 -> 3.4.1]
# - tinytex       [repo: RSPM -> CRAN; ver: 0.47 -> 0.45]
# - vctrs         [0.6.5 -> 0.6.2]
# - xfun          [repo: RSPM -> CRAN; ver: 0.40 -> 0.39]
# - yaml          [2.3.8 -> 2.3.7]
# - quarto        [* -> 1.2]
#
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/bslib/bslib_0.4.2.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/sass/sass_0.4.6.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/fs/fs_1.6.2.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/curl/curl_5.0.0.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://mran.microsoft.com/snapshot/2023-10-02/bin/macosx/big-sur-arm64/contrib/4.3/evaluate_0.21.tgz' ...
#
# Traceback (most recent calls last):
# 32: renv::restore(lockfile = "renv.lock")
# 31: renv_restore_run_actions(project, diff, current, lockfile, rebuild)
# 30: retrieve(packages)
# 29: handler(package, renv_retrieve_impl(package))
# 28: renv_retrieve_impl(package)
# 27: renv_retrieve_repos(record)
# 26: catch(withCallingHandlers(method(record), renv.retrieve.error = function(error) {
#         errors$push(error$data)
#     }))
# 25: tryCatch(withCallingHandlers(expr, error = renv_error_capture),
#         error = renv_error_tag)
# 24: tryCatchList(expr, classes, parentenv, handlers)
# 23: tryCatchOne(expr, names, parentenv, handlers[[1L]])
# 22: doTryCatch(return(expr), name, parentenv, handler)
# 21: withCallingHandlers(expr, error = renv_error_capture)
# 20: withCallingHandlers(method(record), renv.retrieve.error = function(error) {
#         errors$push(error$data)
#     })
# 19: method(record)
# 18: renv_retrieve_package(record, url, path)
# 17: (function() {
#         renv_scope_auth(record)
#         catch(download(url, destfile = path, type = type))
#     })()
# 16: catch(download(url, destfile = path, type = type))
# 15: tryCatch(withCallingHandlers(expr, error = renv_error_capture),
#         error = renv_error_tag)
# 14: tryCatchList(expr, classes, parentenv, handlers)
# 13: tryCatchOne(expr, names, parentenv, handlers[[1L]])
# 12: doTryCatch(return(expr), name, parentenv, handler)
# 11: withCallingHandlers(expr, error = renv_error_capture)
# 10: download(url, destfile = path, type = type)
#  9: renv_download_impl(url = url, destfile = tempfile, type = type,
#         request = "GET", headers = headers)
#  8: catch(downloader(url, destfile, type, request, headers))
#  7: tryCatch(withCallingHandlers(expr, error = renv_error_capture),
#         error = renv_error_tag)
#  6: tryCatchList(expr, classes, parentenv, handlers)
#  5: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#  4: doTryCatch(return(expr), name, parentenv, handler)
#  3: withCallingHandlers(expr, error = renv_error_capture)
#  2: downloader(url, destfile, type, request, headers)
#  1: <condition-handler>(...)
# Warning message:
# curl: (28) Failed to connect to mran.microsoft.com port 443 after 20006 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20005 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20003 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20003 ms: Timeout was reached
# Execution halted
# publisher: error: expected "<guid>"

# Received SIGINT, aborting ...

# bats warning: Executed 1 instead of expected 5 tests
Error occurred with content: quarto-website-r-py

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
not ok 1 setup_file failed
# (from function `setup_file' in test file contract/deploy.bats, line 9)
#   `setup_file() {' failed with status 130
#
# R version 4.3.1 (2023-06-16) -- "Beagle Scouts"
# Copyright (C) 2023 The R Foundation for Statistical Computing
# Platform: aarch64-apple-darwin20 (64-bit)
#
# R is free software and comes with ABSOLUTELY NO WARRANTY.
# You are welcome to redistribute it under certain conditions.
# Type 'license()' or 'licence()' for distribution details.
#
#   Natural language support but running in an English locale
#
# R is a collaborative project with many contributors.
# Type 'contributors()' for more information and
# 'citation()' on how to cite R or R packages in publications.
#
# Type 'demo()' for some demos, 'help()' for on-line help, or
# 'help.start()' for an HTML browser interface to help.
# Type 'q()' to quit R.
#
# * Project '~/work/publishing-client/test/content/bundles/quarto-website-r' loaded. [renv 0.15.2]
# > renv::restore(lockfile="renv.lock")
# The following package(s) will be updated:
#
# # CRAN ===============================
# - Rcpp          [1.0.12 -> 1.0.10]
# - askpass       [1.2.0 -> 1.1]
# - bslib         [0.5.1 -> 0.4.2]
# - cli           [3.6.2 -> 3.6.1]
# - curl          [repo: RSPM -> CRAN; ver: 5.2.1 -> 5.0.0]
# - digest        [0.6.35 -> 0.6.31]
# - evaluate      [repo: RSPM -> CRAN; ver: 0.22 -> 0.21]
# - fontawesome   [0.5.2 -> 0.5.1]
# - fs            [1.6.4 -> 1.6.2]
# - glue          [1.7.0 -> 1.6.2]
# - htmltools     [0.5.6 -> 0.5.5]
# - jsonlite      [1.8.8 -> 1.8.4]
# - knitr         [repo: RSPM -> CRAN; ver: 1.44 -> 1.42]
# - lifecycle     [1.0.4 -> 1.0.3]
# - openssl       [2.1.2 -> 2.0.6]
# - packrat       [0.9.2 -> 0.9.1]
# - processx      [3.8.3 -> 3.8.1]
# - ps            [1.7.6 -> 1.7.5]
# - renv          [0.15.2 -> 1.0.7]
# - rlang         [1.1.3 -> 1.1.1]
# - rmarkdown     [repo: RSPM -> CRAN; ver: 2.25 -> 2.21]
# - rsconnect     [1.2.2 -> 0.8.29]
# - rstudioapi    [0.15.0 -> 0.14]
# - sass          [0.4.7 -> 0.4.6]
# - sys           [3.4.2 -> 3.4.1]
# - tinytex       [repo: RSPM -> CRAN; ver: 0.47 -> 0.45]
# - vctrs         [0.6.5 -> 0.6.2]
# - xfun          [repo: RSPM -> CRAN; ver: 0.40 -> 0.39]
# - yaml          [2.3.8 -> 2.3.7]
# - quarto        [* -> 1.2]
#
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/bslib/bslib_0.4.2.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/sass/sass_0.4.6.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/fs/fs_1.6.2.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/curl/curl_5.0.0.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://mran.microsoft.com/snapshot/2023-10-02/bin/macosx/big-sur-arm64/contrib/4.3/evaluate_0.21.tgz' ...
#
# Traceback (most recent calls last):
# 44: renv::restore(lockfile = "renv.lock")
# 43: renv_restore_run_actions(project, diff, current, lockfile, rebuild)
# 42: retrieve(packages)
# 41: handler(package, renv_retrieve_impl(package))
# 40: renv_retrieve_impl(package)
# 39: renv_retrieve_repos(record)
# 38: catch(withCallingHandlers(method(record), renv.retrieve.error = function(error) {
#         errors$push(error$data)
#     }))
# 37: tryCatch(withCallingHandlers(expr, error = renv_error_capture),
#         error = renv_error_tag)
# 36: tryCatchList(expr, classes, parentenv, handlers)
# 35: tryCatchOne(expr, names, parentenv, handlers[[1L]])
# 34: doTryCatch(return(expr), name, parentenv, handler)
# 33: withCallingHandlers(expr, error = renv_error_capture)
# 32: withCallingHandlers(method(record), renv.retrieve.error = function(error) {
#         errors$push(error$data)
#     })
# 31: method(record)
# 30: renv_retrieve_package(record, url, path)
# 29: (function() {
#         renv_scope_auth(record)
#         catch(download(url, destfile = path, type = type))
#     })()
# 28: catch(download(url, destfile = path, type = type))
# 27: tryCatch(withCallingHandlers(expr, error = renv_error_capture),
#         error = renv_error_tag)
# 26: tryCatchList(expr, classes, parentenv, handlers)
# 25: tryCatchOne(expr, names, parentenv, handlers[[1L]])
# 24: doTryCatch(return(expr), name, parentenv, handler)
# 23: withCallingHandlers(expr, error = renv_error_capture)
# 22: download(url, destfile = path, type = type)
# 21: renv_download_size(url, type, headers)
# 20: catch(renv_download_headers(url, type, headers))
# 19: tryCatch(withCallingHandlers(expr, error = renv_error_capture),
#         error = renv_error_tag)
# 18: tryCatchList(expr, classes, parentenv, handlers)
# 17: tryCatchOne(expr, names, parentenv, handlers[[1L]])
# 16: doTryCatch(return(expr), name, parentenv, handler)
# 15: withCallingHandlers(expr, error = renv_error_capture)
# 14: renv_download_headers(url, type, headers)
# 13: renv_download_impl(url = url, destfile = file, type = type, request = "HEAD",
#         headers = headers)
# 12: catch(downloader(url, destfile, type, request, headers))
# 11: tryCatch(withCallingHandlers(expr, error = renv_error_capture),
#         error = renv_error_tag)
# 10: tryCatchList(expr, classes, parentenv, handlers)
#  9: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#  8: doTryCatch(return(expr), name, parentenv, handler)
#  7: withCallingHandlers(expr, error = renv_error_capture)
#  6: downloader(url, destfile, type, request, headers)
#  5: <condition-handler>(...)
#  4: renv_exit_handlers_get(envir)
#  3: format(envir)
#  2: format.default(envir)
#  1: prettyNum(.Internal(format(x, trim, digits, nsmall, width, 3L,
#         na.encode, scientific, decimal.mark)), big.mark = big.mark,
#         big.interval = big.interval, small.mark = small.mark, small.interval = small.interval,
#         decimal.mark = decimal.mark, input.d.mark = decimal.mark,
#         zero.print = zero.print, drop0trailing = drop0trailing, is.cmplx = is.complex(x),
#         preserve.width = if (trim) "individual" else "common")
# Execution halted
# publisher: error: expected "<guid>"

# Received SIGINT, aborting ...

# bats warning: Executed 1 instead of expected 5 tests
Error occurred with content: quarto-website-r

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for plumber-tableau-loess in 1000ms # skip
not ok 2 deploy plumber-tableau-loess in 2000ms
# (from function `assert_output' in file contract/../node_modules/bats-assert/src/assert.bash, line 231,
#  from function `deploy_assertion' in file contract/deploy.bats, line 38,
#  in test file contract/deploy.bats, line 117)
#   `deploy_assertion' failed
#
# -- output does not contain substring --
# substring : "app_mode":"api"
# output    : {"guid":"91c02875-6665-4d01-9e0e-c69d4e6050a2","name":"","title":"plumber-tableau-loess","description":"plumber-tableau-loess description","access_type":"acl","connection_timeout":null,"read_timeout":null,"init_timeout":null,"idle_timeout":null,"max_processes":null,"min_processes":null,"max_conns_per_process":null,"load_factor":null,"memory_request":null,"memory_limit":null,"cpu_request":null,"cpu_limit":null,"amd_gpu_limit":null,"nvidia_gpu_limit":null,"service_account_name":null,"default_image_name":null,"created_time":"2024-05-13T14:07:26Z","last_deployed_time":"2024-05-13T14:07:26Z","bundle_id":"90","app_mode":"static","content_category":"","parameterized":false,"cluster_name":null,"image_name":null,"r_version":null,"py_version":null,"quarto_version":null,"r_environment_management":null,"default_r_environment_management":null,"py_environment_management":null,"default_py_environment_management":null,"run_as":null,"run_as_current_user":false,"owner_guid":"cf934fb7-8624-436b-b635-47cf894909ac","content_url":"http://52.90.67.68:3939/content/91c02875-6665-4d01-9e0e-c69d4e6050a2/","dashboard_url":"http://52.90.67.68:3939/connect/#/apps/91c02875-6665-4d01-9e0e-c69d4e6050a2","app_role":"owner","id":"62"}
# --
#
not ok 3 redeploy plumber-tableau-loess in 2000ms
# (from function `assert_output' in file contract/../node_modules/bats-assert/src/assert.bash, line 231,
#  from function `deploy_assertion' in file contract/deploy.bats, line 38,
#  in test file contract/deploy.bats, line 124)
#   `deploy_assertion' failed
#
# -- output does not contain substring --
# substring : "app_mode":"api"
# output    : {"guid":"91c02875-6665-4d01-9e0e-c69d4e6050a2","name":"","title":"plumber-tableau-loess","description":"plumber-tableau-loess description","access_type":"acl","connection_timeout":null,"read_timeout":null,"init_timeout":null,"idle_timeout":null,"max_processes":null,"min_processes":null,"max_conns_per_process":null,"load_factor":null,"memory_request":null,"memory_limit":null,"cpu_request":null,"cpu_limit":null,"amd_gpu_limit":null,"nvidia_gpu_limit":null,"service_account_name":null,"default_image_name":null,"created_time":"2024-05-13T14:07:26Z","last_deployed_time":"2024-05-13T14:07:28Z","bundle_id":"91","app_mode":"static","content_category":"","parameterized":false,"cluster_name":null,"image_name":null,"r_version":null,"py_version":null,"quarto_version":null,"r_environment_management":null,"default_r_environment_management":null,"py_environment_management":null,"default_py_environment_management":null,"run_as":null,"run_as_current_user":false,"owner_guid":"cf934fb7-8624-436b-b635-47cf894909ac","content_url":"http://52.90.67.68:3939/content/91c02875-6665-4d01-9e0e-c69d4e6050a2/","dashboard_url":"http://52.90.67.68:3939/connect/#/apps/91c02875-6665-4d01-9e0e-c69d4e6050a2","app_role":"owner","id":"62"}
# --
#
not ok 4 check for toml file in 0ms
# (from function `assert_output' in file contract/../node_modules/bats-assert/src/assert.bash, line 231,
#  in test file contract/deploy.bats, line 129)
#   `assert_output --partial "type = '${CONTENT_TYPE}'"' failed
#
# -- output does not contain substring --
# substring (1 lines):
#   type = 'r-plumber'
# output (38 lines):
#   # This file is automatically generated by Posit Publisher; do not edit.
#   '$schema' = 'https://cdn.posit.co/publisher/schemas/posit-publishing-record-schema-v3.json'
#   server_type = 'connect'
#   server_url = 'http://52.90.67.68:3939'
#   client_version = '1.0.alpha6-101-g693453fe'
#   created_at = '2024-05-13T10:07:25-04:00'
#   configuration_name = 'plumber-tableau-loess'
#   id = '91c02875-6665-4d01-9e0e-c69d4e6050a2'
#   deployed_at = '2024-05-13T10:07:28-04:00'
#   bundle_id = '91'
#   bundle_url = 'http://52.90.67.68:3939/__api__/v1/content/91c02875-6665-4d01-9e0e-c69d4e6050a2/bundles/91/download'
#   dashboard_url = 'http://52.90.67.68:3939/connect/#/apps/91c02875-6665-4d01-9e0e-c69d4e6050a2'
#   direct_url = 'http://52.90.67.68:3939/content/91c02875-6665-4d01-9e0e-c69d4e6050a2'
#   files = [
#     '.Rprofile',
#     '.posit/publish/default.toml',
#     '.posit/publish/deployments/ci_deploy.toml',
#     '.posit/publish/plumber-tableau-loess.toml',
#     'index.htm',
#     'meta.yaml',
#     'plumber-tableau-loess.Rproj',
#     'plumber.R',
#     'renv.lock',
#     'renv/.gitignore',
#     'renv/activate.R',
#     'renv/settings.json',
#     'test/.publisher-env'
#   ]
#
#   [configuration]
#   '$schema' = 'https://cdn.posit.co/publisher/schemas/posit-publishing-schema-v3.json'
#   type = 'html'
#   entrypoint = 'index.htm'
#   validate = true
#   has_parameters = false
#   files = ['*']
#   title = 'plumber-tableau-loess'
#   description = 'plumber-tableau-loess description'
# --
#
ok 5 deploy no requirements file in 0ms # skip
error: Recipe `run` failed with exit code 1
Error occurred with content: plumber-tableau-loess

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for blastula-multiple-images in 0ms # skip
not ok 2 deploy blastula-multiple-images in 211000ms
# (from function `assert_output' in file contract/../node_modules/bats-assert/src/assert.bash, line 231,
#  from function `deploy_assertion' in file contract/deploy.bats, line 38,
#  in test file contract/deploy.bats, line 117)
#   `deploy_assertion' failed
#
# -- output does not contain substring --
# substring : "app_mode":"rmd-static"
# output    : {"guid":"094ec993-39a2-4e72-807c-a08d60bec470","name":"","title":"blastula-multiple-images","description":"blastula-multiple-images description","access_type":"acl","connection_timeout":25,"read_timeout":30,"init_timeout":35,"idle_timeout":40,"max_processes":2,"min_processes":1,"max_conns_per_process":5,"load_factor":0.8,"memory_request":null,"memory_limit":null,"cpu_request":null,"cpu_limit":null,"amd_gpu_limit":null,"nvidia_gpu_limit":null,"service_account_name":null,"default_image_name":null,"created_time":"2024-05-13T14:07:37Z","last_deployed_time":"2024-05-13T14:07:37Z","bundle_id":"92","app_mode":"quarto-static","content_category":"","parameterized":false,"cluster_name":"Local","image_name":null,"r_version":"4.1.2","py_version":null,"quarto_version":"1.4.549","r_environment_management":true,"default_r_environment_management":null,"py_environment_management":null,"default_py_environment_management":null,"run_as":null,"run_as_current_user":false,"owner_guid":"cf934fb7-8624-436b-b635-47cf894909ac","content_url":"http://52.90.67.68:3939/content/094ec993-39a2-4e72-807c-a08d60bec470/","dashboard_url":"http://52.90.67.68:3939/connect/#/apps/094ec993-39a2-4e72-807c-a08d60bec470","app_role":"owner","id":"63"}
# --
#
not ok 3 redeploy blastula-multiple-images in 13000ms
# (from function `assert_output' in file contract/../node_modules/bats-assert/src/assert.bash, line 231,
#  from function `deploy_assertion' in file contract/deploy.bats, line 38,
#  in test file contract/deploy.bats, line 124)
#   `deploy_assertion' failed
#
# -- output does not contain substring --
# substring : "app_mode":"rmd-static"
# output    : {"guid":"094ec993-39a2-4e72-807c-a08d60bec470","name":"","title":"blastula-multiple-images","description":"blastula-multiple-images description","access_type":"acl","connection_timeout":25,"read_timeout":30,"init_timeout":35,"idle_timeout":40,"max_processes":2,"min_processes":1,"max_conns_per_process":5,"load_factor":0.8,"memory_request":null,"memory_limit":null,"cpu_request":null,"cpu_limit":null,"amd_gpu_limit":null,"nvidia_gpu_limit":null,"service_account_name":null,"default_image_name":null,"created_time":"2024-05-13T14:07:37Z","last_deployed_time":"2024-05-13T14:11:08Z","bundle_id":"93","app_mode":"quarto-static","content_category":"","parameterized":false,"cluster_name":"Local","image_name":null,"r_version":"4.1.2","py_version":null,"quarto_version":"1.4.549","r_environment_management":true,"default_r_environment_management":null,"py_environment_management":null,"default_py_environment_management":null,"run_as":null,"run_as_current_user":false,"owner_guid":"cf934fb7-8624-436b-b635-47cf894909ac","content_url":"http://52.90.67.68:3939/content/094ec993-39a2-4e72-807c-a08d60bec470/","dashboard_url":"http://52.90.67.68:3939/connect/#/apps/094ec993-39a2-4e72-807c-a08d60bec470","app_role":"owner","id":"63"}
# --
#
not ok 4 check for toml file in 3000ms
# (from function `assert_output' in file contract/../node_modules/bats-assert/src/assert.bash, line 231,
#  in test file contract/deploy.bats, line 129)
#   `assert_output --partial "type = '${CONTENT_TYPE}'"' failed
#
# -- output does not contain substring --
# substring (1 lines):
#   type = 'rmd'
# output (491 lines):
#   # This file is automatically generated by Posit Publisher; do not edit.
#   '$schema' = 'https://cdn.posit.co/publisher/schemas/posit-publishing-record-schema-v3.json'
#   server_type = 'connect'
#   server_url = 'http://52.90.67.68:3939'
#   client_version = '1.0.alpha6-101-g693453fe'
#   created_at = '2024-05-13T10:07:32-04:00'
#   configuration_name = 'blastula-multiple-images'
#   id = '094ec993-39a2-4e72-807c-a08d60bec470'
#   deployed_at = '2024-05-13T10:11:08-04:00'
#   bundle_id = '93'
#   bundle_url = 'http://52.90.67.68:3939/__api__/v1/content/094ec993-39a2-4e72-807c-a08d60bec470/bundles/93/download'
#   dashboard_url = 'http://52.90.67.68:3939/connect/#/apps/094ec993-39a2-4e72-807c-a08d60bec470'
#   direct_url = 'http://52.90.67.68:3939/content/094ec993-39a2-4e72-807c-a08d60bec470'
#   files = [
#     '.RData',
#     '.Rprofile',
#     '.meta.yaml.swp',
#     '.posit/publish/blastula-multiple-images.toml',
#     '.posit/publish/default.toml',
#     '.posit/publish/deployments/ci_deploy.toml',
#     'blastula-multiple-images.Rmd',
#     'blastula-multiple-images.Rproj',
#     'blastula-multiple-images.html',
#     'index.htm',
#     'meta.yaml',
#     'plot1.png',
#     'plot2.png',
#     'renv.lock',
#     'renv/.gitignore',
#     'renv/activate.R',
#     'renv/settings.json',
#     'test/.publisher-env'
#   ]
#
#   [configuration]
#   '$schema' = 'https://cdn.posit.co/publisher/schemas/posit-publishing-schema-v3.json'
#   type = 'quarto'
#   entrypoint = 'blastula-multiple-images.Rmd'
#   validate = true
#   has_parameters = false
#   files = ['*']
#   title = 'blastula-multiple-images'
#   description = 'blastula-multiple-images description'
#
#   [configuration.r]
#   version = '4.3.1'
#   package_file = 'renv.lock'
#   package_manager = 'renv'
#
#   [configuration.quarto]
#   version = '1.4.553'
#   engines = ['knitr']
#
#   [configuration.connect]
#   [configuration.connect.runtime]
#   connection_timeout = 25
#   read_timeout = 30
#   init_timeout = 35
#   idle_timeout = 40
#   max_processes = 2
#   min_processes = 1
#   max_conns_per_process = 5
#   load_factor = 0.8
#
#   [renv]
#   [renv.r]
#   version = '4.3.1'
#
#   [[renv.r.repositories]]
#   name = 'CRAN'
#   url = 'https://cran.case.edu'
#
#   [renv.packages]
#   [renv.packages.R6]
#   package = 'R6'
#   version = '2.5.1'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R']
#   hash = '470851b6d5d0ac559e9d01bb352b4021'
#
#   [renv.packages.askpass]
#   package = 'askpass'
#   version = '1.2.0'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['sys']
#   hash = 'cad6cf7f1d5f6e906700b9d3e718c796'
#
#   [renv.packages.base64enc]
#   package = 'base64enc'
#   version = '0.1-3'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R']
#   hash = '543776ae6848fde2f48ff3816d0628bc'
#
#   [renv.packages.blastula]
#   package = 'blastula'
#   version = '0.3.4'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'base64enc', 'commonmark', 'curl', 'digest', 'dplyr', 'fs', 'getPass', 'here', 'htmltools', 'httr', 'jsonlite', 'magrittr', 'mime', 'rlang', 'rmarkdown', 'stringr', 'uuid']
#   hash = '2ac6a5fdfb9e49fa746cb4c0342ba14c'
#
#   [renv.packages.bslib]
#   package = 'bslib'
#   version = '0.5.1'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'base64enc', 'cachem', 'grDevices', 'htmltools', 'jquerylib', 'jsonlite', 'memoise', 'mime', 'rlang', 'sass']
#   hash = '283015ddfbb9d7bf15ea9f0b5698f0d9'
#
#   [renv.packages.cachem]
#   package = 'cachem'
#   version = '1.0.8'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['fastmap', 'rlang']
#   hash = 'c35768291560ce302c0a6589f92e837d'
#
#   [renv.packages.cli]
#   package = 'cli'
#   version = '3.6.1'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'utils']
#   hash = '89e6d8219950eac806ae0c489052048a'
#
#   [renv.packages.commonmark]
#   package = 'commonmark'
#   version = '1.9.0'
#   source = 'Repository'
#   repository = 'CRAN'
#   hash = 'd691c61bff84bd63c383874d2d0c3307'
#
#   [renv.packages.curl]
#   package = 'curl'
#   version = '5.1.0'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R']
#   hash = '9123f3ef96a2c1a93927d828b2fe7d4c'
#
#   [renv.packages.digest]
#   package = 'digest'
#   version = '0.6.33'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'utils']
#   hash = 'b18a9cf3c003977b0cc49d5e76ebe48d'
#
#   [renv.packages.dplyr]
#   package = 'dplyr'
#   version = '1.1.3'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'R6', 'cli', 'generics', 'glue', 'lifecycle', 'magrittr', 'methods', 'pillar', 'rlang', 'tibble', 'tidyselect', 'utils', 'vctrs']
#   hash = 'e85ffbebaad5f70e1a2e2ef4302b4949'
#
#   [renv.packages.ellipsis]
#   package = 'ellipsis'
#   version = '0.3.2'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'rlang']
#   hash = 'bb0eec2fe32e88d9e2836c2f73ea2077'
#
#   [renv.packages.evaluate]
#   package = 'evaluate'
#   version = '0.22'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'methods']
#   hash = '66f39c7a21e03c4dcb2c2d21d738d603'
#
#   [renv.packages.fansi]
#   package = 'fansi'
#   version = '1.0.5'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'grDevices', 'utils']
#   hash = '3e8583a60163b4bc1a80016e63b9959e'
#
#   [renv.packages.fastmap]
#   package = 'fastmap'
#   version = '1.1.1'
#   source = 'Repository'
#   repository = 'CRAN'
#   hash = 'f7736a18de97dea803bde0a2daaafb27'
#
#   [renv.packages.fontawesome]
#   package = 'fontawesome'
#   version = '0.5.2'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'htmltools', 'rlang']
#   hash = 'c2efdd5f0bcd1ea861c2d4e2a883a67d'
#
#   [renv.packages.fs]
#   package = 'fs'
#   version = '1.6.3'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'methods']
#   hash = '47b5f30c720c23999b913a1a635cf0bb'
#
#   [renv.packages.generics]
#   package = 'generics'
#   version = '0.1.3'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'methods']
#   hash = '15e9634c0fcd294799e9b2e929ed1b86'
#
#   [renv.packages.getPass]
#   package = 'getPass'
#   version = '0.2-4'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'rstudioapi', 'utils']
#   hash = '281e56bcab06202f51be7b50254f2fce'
#
#   [renv.packages.glue]
#   package = 'glue'
#   version = '1.6.2'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'methods']
#   hash = '4f2596dfb05dac67b9dc558e5c6fba2e'
#
#   [renv.packages.here]
#   package = 'here'
#   version = '1.0.1'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['rprojroot']
#   hash = '24b224366f9c2e7534d2344d10d59211'
#
#   [renv.packages.highr]
#   package = 'highr'
#   version = '0.10'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'xfun']
#   hash = '06230136b2d2b9ba5805e1963fa6e890'
#
#   [renv.packages.htmltools]
#   package = 'htmltools'
#   version = '0.5.6'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'base64enc', 'digest', 'ellipsis', 'fastmap', 'grDevices', 'rlang', 'utils']
#   hash = 'a2326a66919a3311f7fbb1e3bf568283'
#
#   [renv.packages.httr]
#   package = 'httr'
#   version = '1.4.7'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'R6', 'curl', 'jsonlite', 'mime', 'openssl']
#   hash = 'ac107251d9d9fd72f0ca8049988f1d7f'
#
#   [renv.packages.jquerylib]
#   package = 'jquerylib'
#   version = '0.1.4'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['htmltools']
#   hash = '5aab57a3bd297eee1c1d862735972182'
#
#   [renv.packages.jsonlite]
#   package = 'jsonlite'
#   version = '1.8.7'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['methods']
#   hash = '266a20443ca13c65688b2116d5220f76'
#
#   [renv.packages.knitr]
#   package = 'knitr'
#   version = '1.44'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'evaluate', 'highr', 'methods', 'tools', 'xfun', 'yaml']
#   hash = '60885b9f746c9dfaef110d070b5f7dc0'
#
#   [renv.packages.lifecycle]
#   package = 'lifecycle'
#   version = '1.0.3'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'cli', 'glue', 'rlang']
#   hash = '001cecbeac1cff9301bdc3775ee46a86'
#
#   [renv.packages.magrittr]
#   package = 'magrittr'
#   version = '2.0.3'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R']
#   hash = '7ce2733a9826b3aeb1775d56fd305472'
#
#   [renv.packages.memoise]
#   package = 'memoise'
#   version = '2.0.1'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['cachem', 'rlang']
#   hash = 'e2817ccf4a065c5d9d7f2cfbe7c1d78c'
#
#   [renv.packages.mime]
#   package = 'mime'
#   version = '0.12'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['tools']
#   hash = '18e9c28c1d3ca1560ce30658b22ce104'
#
#   [renv.packages.openssl]
#   package = 'openssl'
#   version = '2.1.2'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['askpass']
#   hash = 'ea2475b073243d9d338aa8f086ce973e'
#
#   [renv.packages.pillar]
#   package = 'pillar'
#   version = '1.9.0'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['cli', 'fansi', 'glue', 'lifecycle', 'rlang', 'utf8', 'utils', 'vctrs']
#   hash = '15da5a8412f317beeee6175fbc76f4bb'
#
#   [renv.packages.pkgconfig]
#   package = 'pkgconfig'
#   version = '2.0.3'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['utils']
#   hash = '01f28d4278f15c76cddbea05899c5d6f'
#
#   [renv.packages.rappdirs]
#   package = 'rappdirs'
#   version = '0.3.3'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R']
#   hash = '5e3c5dc0b071b21fa128676560dbe94d'
#
#   [renv.packages.renv]
#   package = 'renv'
#   version = '1.0.3'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['utils']
#   hash = '41b847654f567341725473431dd0d5ab'
#
#   [renv.packages.rlang]
#   package = 'rlang'
#   version = '1.1.1'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'utils']
#   hash = 'a85c767b55f0bf9b7ad16c6d7baee5bb'
#
#   [renv.packages.rmarkdown]
#   package = 'rmarkdown'
#   version = '2.25'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'bslib', 'evaluate', 'fontawesome', 'htmltools', 'jquerylib', 'jsonlite', 'knitr', 'methods', 'stringr', 'tinytex', 'tools', 'utils', 'xfun', 'yaml']
#   hash = 'd65e35823c817f09f4de424fcdfa812a'
#
#   [renv.packages.rprojroot]
#   package = 'rprojroot'
#   version = '2.0.4'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R']
#   hash = '4c8415e0ec1e29f3f4f6fc108bef0144'
#
#   [renv.packages.rstudioapi]
#   package = 'rstudioapi'
#   version = '0.15.0'
#   source = 'Repository'
#   repository = 'CRAN'
#   hash = '5564500e25cffad9e22244ced1379887'
#
#   [renv.packages.sass]
#   package = 'sass'
#   version = '0.4.7'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R6', 'fs', 'htmltools', 'rappdirs', 'rlang']
#   hash = '6bd4d33b50ff927191ec9acbf52fd056'
#
#   [renv.packages.stringi]
#   package = 'stringi'
#   version = '1.7.12'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'stats', 'tools', 'utils']
#   hash = 'ca8bd84263c77310739d2cf64d84d7c9'
#
#   [renv.packages.stringr]
#   package = 'stringr'
#   version = '1.5.0'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'cli', 'glue', 'lifecycle', 'magrittr', 'rlang', 'stringi', 'vctrs']
#   hash = '671a4d384ae9d32fc47a14e98bfa3dc8'
#
#   [renv.packages.sys]
#   package = 'sys'
#   version = '3.4.2'
#   source = 'Repository'
#   repository = 'CRAN'
#   hash = '3a1be13d68d47a8cd0bfd74739ca1555'
#
#   [renv.packages.tibble]
#   package = 'tibble'
#   version = '3.2.1'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'fansi', 'lifecycle', 'magrittr', 'methods', 'pillar', 'pkgconfig', 'rlang', 'utils', 'vctrs']
#   hash = 'a84e2cc86d07289b3b6f5069df7a004c'
#
#   [renv.packages.tidyselect]
#   package = 'tidyselect'
#   version = '1.2.0'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'cli', 'glue', 'lifecycle', 'rlang', 'vctrs', 'withr']
#   hash = '79540e5fcd9e0435af547d885f184fd5'
#
#   [renv.packages.tinytex]
#   package = 'tinytex'
#   version = '0.47'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['xfun']
#   hash = '8d4ccb733843e513c1c1cdd66a759f0d'
#
#   [renv.packages.utf8]
#   package = 'utf8'
#   version = '1.2.4'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R']
#   hash = '62b65c52671e6665f803ff02954446e9'
#
#   [renv.packages.uuid]
#   package = 'uuid'
#   version = '1.1-1'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R']
#   hash = '3d78edfb977a69fc7a0341bee25e163f'
#
#   [renv.packages.vctrs]
#   package = 'vctrs'
#   version = '0.6.5'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'cli', 'glue', 'lifecycle', 'rlang']
#   hash = 'c03fa420630029418f7e6da3667aac4a'
#
#   [renv.packages.withr]
#   package = 'withr'
#   version = '2.5.1'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'grDevices', 'graphics', 'stats']
#   hash = 'd77c6f74be05c33164e33fbc85540cae'
#
#   [renv.packages.xfun]
#   package = 'xfun'
#   version = '0.40'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['stats', 'tools']
#   hash = 'be07d23211245fc7d4209f54c4e4ffc8'
#
#   [renv.packages.yaml]
#   package = 'yaml'
#   version = '2.3.7'
#   source = 'Repository'
#   repository = 'CRAN'
#   hash = '0d0056cc5383fbc240ccd0cb584bf436'
# --
#
ok 5 deploy no requirements file in 0ms # skip
error: Recipe `run` failed with exit code 1
Error occurred with content: blastula-multiple-images

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for quarto-proj-r in 0ms # skip
ok 2 deploy quarto-proj-r in 14000ms
ok 3 redeploy quarto-proj-r in 13000ms
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 0ms # skip

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
not ok 1 setup_file failed
# (from function `setup_file' in test file contract/deploy.bats, line 9)
#   `setup_file() {' failed with status 130
#
# R version 4.3.1 (2023-06-16) -- "Beagle Scouts"
# Copyright (C) 2023 The R Foundation for Statistical Computing
# Platform: aarch64-apple-darwin20 (64-bit)
#
# R is free software and comes with ABSOLUTELY NO WARRANTY.
# You are welcome to redistribute it under certain conditions.
# Type 'license()' or 'licence()' for distribution details.
#
#   Natural language support but running in an English locale
#
# R is a collaborative project with many contributors.
# Type 'contributors()' for more information and
# 'citation()' on how to cite R or R packages in publications.
#
# Type 'demo()' for some demos, 'help()' for on-line help, or
# 'help.start()' for an HTML browser interface to help.
# Type 'q()' to quit R.
#
# # Bootstrapping renv 0.15.2 --------------------------------------------------
# * Downloading renv 0.15.2 ... OK
# * Installing renv 0.15.2 ... Done!
# * Successfully installed and loaded renv 0.15.2.
# * Project '~/work/publishing-client/test/content/bundles/quarto-website-r-py-separate-files-deps' loaded. [renv 0.15.2]
# > renv::restore(lockfile="renv.lock")
# The following package(s) will be updated:
#
# # CRAN ===============================
# - Rcpp          [1.0.12 -> 1.0.10]
# - askpass       [1.2.0 -> 1.1]
# - bslib         [0.5.1 -> 0.4.2]
# - cli           [3.6.2 -> 3.6.1]
# - cpp11         [0.4.6 -> 0.4.3]
# - curl          [repo: RSPM -> CRAN; ver: 5.2.1 -> 5.0.0]
# - digest        [0.6.35 -> 0.6.31]
# - dplyr         [1.1.3 -> 1.1.2]
# - evaluate      [repo: RSPM -> CRAN; ver: 0.22 -> 0.21]
# - fansi         [1.0.6 -> 1.0.4]
# - fontawesome   [0.5.2 -> 0.5.1]
# - fs            [1.6.4 -> 1.6.2]
# - glue          [1.7.0 -> 1.6.2]
# - htmltools     [0.5.6 -> 0.5.5]
# - jsonlite      [1.8.8 -> 1.8.4]
# - knitr         [repo: RSPM -> CRAN; ver: 1.44 -> 1.42]
# - lifecycle     [1.0.4 -> 1.0.3]
# - openssl       [2.1.2 -> 2.0.6]
# - packrat       [0.9.2 -> 0.9.1]
# - processx      [3.8.3 -> 3.8.1]
# - ps            [1.7.6 -> 1.7.5]
# - purrr         [1.0.2 -> 1.0.1]
# - rlang         [1.1.3 -> 1.1.1]
# - rmarkdown     [repo: RSPM -> CRAN; ver: 2.25 -> 2.21]
# - rsconnect     [1.2.2 -> 0.8.29]
# - rstudioapi    [0.15.0 -> 0.14]
# - sass          [0.4.7 -> 0.4.6]
# - sys           [3.4.2 -> 3.4.1]
# - tinytex       [repo: RSPM -> CRAN; ver: 0.47 -> 0.45]
# - utf8          [1.2.4 -> 1.2.3]
# - vctrs         [0.6.5 -> 0.6.2]
# - withr         [3.0.0 -> 2.5.0]
# - xfun          [repo: RSPM -> CRAN; ver: 0.40 -> 0.39]
# - yaml          [2.3.8 -> 2.3.7]
# - furrr         [* -> 0.3.1]
# - future        [* -> 1.32.0]
# - globals       [* -> 0.16.2]
# - listenv       [* -> 0.9.0]
# - parallelly    [* -> 1.35.0]
# - quarto        [* -> 1.2]
# - rsample       [* -> 1.1.1]
# - slider        [* -> 0.3.0]
# - warp          [* -> 0.2.0]
#
# Retrieving 'https://cran.rstudio.com/src/contrib/Archive/bslib/bslib_0.4.2.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cran.rstudio.com/src/contrib/Archive/sass/sass_0.4.6.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cran.rstudio.com/src/contrib/Archive/fs/fs_1.6.2.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cran.rstudio.com/src/contrib/Archive/cpp11/cpp11_0.4.3.tar.gz' ...
# 	OK [downloaded 297.4 Kb in 0.2 secs]
# Retrieving 'https://cran.rstudio.com/src/contrib/Archive/curl/curl_5.0.0.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://mran.microsoft.com/snapshot/2023-09-03/bin/macosx/big-sur-arm64/contrib/4.3/dplyr_1.1.2.tgz' ...
#
# Traceback (most recent calls last):
# 44: renv::restore(lockfile = "renv.lock")
# 43: renv_restore_run_actions(project, diff, current, lockfile, rebuild)
# 42: retrieve(packages)
# 41: handler(package, renv_retrieve_impl(package))
# 40: renv_retrieve_impl(package)
# 39: renv_retrieve_repos(record)
# 38: catch(withCallingHandlers(method(record), renv.retrieve.error = function(error) {
#         errors$push(error$data)
#     }))
# 37: tryCatch(withCallingHandlers(expr, error = renv_error_capture),
#         error = renv_error_tag)
# 36: tryCatchList(expr, classes, parentenv, handlers)
# 35: tryCatchOne(expr, names, parentenv, handlers[[1L]])
# 34: doTryCatch(return(expr), name, parentenv, handler)
# 33: withCallingHandlers(expr, error = renv_error_capture)
# 32: withCallingHandlers(method(record), renv.retrieve.error = function(error) {
#         errors$push(error$data)
#     })
# 31: method(record)
# 30: renv_retrieve_package(record, url, path)
# 29: (function() {
#         renv_scope_auth(record)
#         catch(download(url, destfile = path, type = type))
#     })()
# 28: catch(download(url, destfile = path, type = type))
# 27: tryCatch(withCallingHandlers(expr, error = renv_error_capture),
#         error = renv_error_tag)
# 26: tryCatchList(expr, classes, parentenv, handlers)
# 25: tryCatchOne(expr, names, parentenv, handlers[[1L]])
# 24: doTryCatch(return(expr), name, parentenv, handler)
# 23: withCallingHandlers(expr, error = renv_error_capture)
# 22: download(url, destfile = path, type = type)
# 21: renv_download_size(url, type, headers)
# 20: catch(renv_download_headers(url, type, headers))
# 19: tryCatch(withCallingHandlers(expr, error = renv_error_capture),
#         error = renv_error_tag)
# 18: tryCatchList(expr, classes, parentenv, handlers)
# 17: tryCatchOne(expr, names, parentenv, handlers[[1L]])
# 16: doTryCatch(return(expr), name, parentenv, handler)
# 15: withCallingHandlers(expr, error = renv_error_capture)
# 14: renv_download_headers(url, type, headers)
# 13: renv_download_impl(url = url, destfile = file, type = type, request = "HEAD",
#         headers = headers)
# 12: catch(downloader(url, destfile, type, request, headers))
# 11: tryCatch(withCallingHandlers(expr, error = renv_error_capture),
#         error = renv_error_tag)
# 10: tryCatchList(expr, classes, parentenv, handlers)
#  9: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#  8: doTryCatch(return(expr), name, parentenv, handler)
#  7: withCallingHandlers(expr, error = renv_error_capture)
#  6: downloader(url, destfile, type, request, headers)
#  5: <condition-handler>(...)
#  4: renv_exit_handlers_get(envir)
#  3: format(envir)
#  2: format.default(envir)
#  1: match.arg(justify)
# Execution halted
# publisher: error: expected "<guid>"

# Received SIGINT, aborting ...

# bats warning: Executed 1 instead of expected 5 tests
Error occurred with content: quarto-website-r-py-separate-files-deps
Error occurred with content: quarto-multidoc-proj-none
Error occurred with content: mpg-shinyApp
Error occurred with content: quarto-website-r-deps
Error occurred with content: portfolio-report

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for quarto-proj-none-ojs in 0ms # skip
ok 2 deploy quarto-proj-none-ojs in 8000ms
/Users/kgartland/work/publishing-client/test/bats/node_modules/bats/libexec/bats-core/bats: line 328: 56079 Hangup: 1               exec bats-exec-suite "${flags[@]}" "${filenames[@]}"
     56080                       | bats_test_count_validator
     56081                       | "$interpolated_formatter" "${formatter_flags[@]}"

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for stock-dashboard-python in 3000ms
ok 2 deploy stock-dashboard-python in 8000ms
ok 3 redeploy stock-dashboard-python in 6000ms
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 0ms

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for python-flasgger in 3000ms
ok 2 deploy python-flasgger in 6000ms
ok 3 redeploy python-flasgger in 6000ms
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 0ms

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for python-streamlit in 3000ms
not ok 2 deploy python-streamlit in 12000ms
# (from function `assert_success' in file contract/../node_modules/bats-assert/src/assert.bash, line 114,
#  from function `deploy_assertion' in file contract/deploy.bats, line 26,
#  in test file contract/deploy.bats, line 117)
#   `deploy_assertion' failed
#
# -- command failed --
# status : 1
# output (12 lines):
#   Deploy to server http://52.90.67.68:3939 using account bats and configuration python-streamlit, creating deployment ci_deploy
#   Check Configuration...             [OK]
#   Create New Deployment...           [OK] (saveName="ci_deploy", contentId="ddf04e09-e805-4d9e-b294-ce7dc201276e")
#   Prepare Files...                   [OK] (filename="/var/folders/qn/0zx6630d3b15_6jcdyl_20dc0000gp/T/bundle-3130220284.tar.gz")
#   Upload Files...                    [OK] (bundleId="102")
#   Update Deployment Settings...      [OK]
#   Activate Deployment...             [OK] (taskId="MHl5jvztZxELrg3E")
#   Restore Python environment...
#   Dashboard URL:  http://52.90.67.68:3939/connect/#/apps/ddf04e09-e805-4d9e-b294-ce7dc201276e
#   [ERROR] deployFailed (message="exit status 1", dashboardUrl="http://52.90.67.68:3939/connect/#/apps/ddf04e09-e805-4d9e-b294-ce7dc201276e", url="http://52.90.67.68:3939/content/ddf04e09-e805-4d9e-b294-ce7dc201276e")
#
#   exit status 1.
# --
#
not ok 3 redeploy python-streamlit in 12000ms
# (from function `assert_success' in file contract/../node_modules/bats-assert/src/assert.bash, line 114,
#  from function `deploy_assertion' in file contract/deploy.bats, line 26,
#  in test file contract/deploy.bats, line 124)
#   `deploy_assertion' failed
#
# -- command failed --
# status : 1
# output (11 lines):
#   Redeploy ci_deploy to server http://52.90.67.68:3939 using account bats and configuration python-streamlit
#   Check Configuration...             [OK]
#   Prepare Files...                   [OK] (filename="/var/folders/qn/0zx6630d3b15_6jcdyl_20dc0000gp/T/bundle-3089665237.tar.gz")
#   Upload Files...                    [OK] (bundleId="103")
#   Update Deployment Settings...      [OK]
#   Activate Deployment...             [OK] (taskId="BcgvHdW89t9H9kt9")
#   Restore Python environment...
#   Dashboard URL:  http://52.90.67.68:3939/connect/#/apps/ddf04e09-e805-4d9e-b294-ce7dc201276e
#   [ERROR] deployFailed (url="http://52.90.67.68:3939/content/ddf04e09-e805-4d9e-b294-ce7dc201276e", message="exit status 1", dashboardUrl="http://52.90.67.68:3939/connect/#/apps/ddf04e09-e805-4d9e-b294-ce7dc201276e")
#
#   exit status 1.
# --
#
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 0ms
error: Recipe `run` failed with exit code 1
Error occurred with content: python-streamlit

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for quarto-proj-r-shiny in 0ms # skip
not ok 2 deploy quarto-proj-r-shiny in 15000ms
# (from function `assert_output' in file contract/../node_modules/bats-assert/src/assert.bash, line 231,
#  from function `deploy_assertion' in file contract/deploy.bats, line 38,
#  in test file contract/deploy.bats, line 117)
#   `deploy_assertion' failed
#
# -- output does not contain substring --
# substring : "app_mode":"quarto-static"
# output    : {"guid":"3b071f2b-e6c4-47dc-abc3-912f540f01fb","name":"","title":"quarto-proj-r-shiny","description":"quarto-proj-r-shiny description","access_type":"acl","connection_timeout":25,"read_timeout":30,"init_timeout":35,"idle_timeout":40,"max_processes":2,"min_processes":1,"max_conns_per_process":5,"load_factor":0.8,"memory_request":null,"memory_limit":null,"cpu_request":null,"cpu_limit":null,"amd_gpu_limit":null,"nvidia_gpu_limit":null,"service_account_name":null,"default_image_name":null,"created_time":"2024-05-13T14:15:15Z","last_deployed_time":"2024-05-13T14:15:16Z","bundle_id":"104","app_mode":"quarto-shiny","content_category":"","parameterized":false,"cluster_name":"Local","image_name":null,"r_version":"4.1.2","py_version":null,"quarto_version":"1.4.549","r_environment_management":true,"default_r_environment_management":null,"py_environment_management":null,"default_py_environment_management":null,"run_as":null,"run_as_current_user":false,"owner_guid":"cf934fb7-8624-436b-b635-47cf894909ac","content_url":"http://52.90.67.68:3939/content/3b071f2b-e6c4-47dc-abc3-912f540f01fb/","dashboard_url":"http://52.90.67.68:3939/connect/#/apps/3b071f2b-e6c4-47dc-abc3-912f540f01fb","app_role":"owner","id":"69"}
# --
#
not ok 3 redeploy quarto-proj-r-shiny in 13000ms
# (from function `assert_output' in file contract/../node_modules/bats-assert/src/assert.bash, line 231,
#  from function `deploy_assertion' in file contract/deploy.bats, line 38,
#  in test file contract/deploy.bats, line 124)
#   `deploy_assertion' failed
#
# -- output does not contain substring --
# substring : "app_mode":"quarto-static"
# output    : {"guid":"3b071f2b-e6c4-47dc-abc3-912f540f01fb","name":"","title":"quarto-proj-r-shiny","description":"quarto-proj-r-shiny description","access_type":"acl","connection_timeout":25,"read_timeout":30,"init_timeout":35,"idle_timeout":40,"max_processes":2,"min_processes":1,"max_conns_per_process":5,"load_factor":0.8,"memory_request":null,"memory_limit":null,"cpu_request":null,"cpu_limit":null,"amd_gpu_limit":null,"nvidia_gpu_limit":null,"service_account_name":null,"default_image_name":null,"created_time":"2024-05-13T14:15:15Z","last_deployed_time":"2024-05-13T14:15:30Z","bundle_id":"105","app_mode":"quarto-shiny","content_category":"","parameterized":false,"cluster_name":"Local","image_name":null,"r_version":"4.1.2","py_version":null,"quarto_version":"1.4.549","r_environment_management":true,"default_r_environment_management":null,"py_environment_management":null,"default_py_environment_management":null,"run_as":null,"run_as_current_user":false,"owner_guid":"cf934fb7-8624-436b-b635-47cf894909ac","content_url":"http://52.90.67.68:3939/content/3b071f2b-e6c4-47dc-abc3-912f540f01fb/","dashboard_url":"http://52.90.67.68:3939/connect/#/apps/3b071f2b-e6c4-47dc-abc3-912f540f01fb","app_role":"owner","id":"69"}
# --
#
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 0ms # skip
error: Recipe `run` failed with exit code 1
Error occurred with content: quarto-proj-r-shiny

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for stock-api-fastapi in 3000ms
ok 2 deploy stock-api-fastapi in 22000ms
ok 3 redeploy stock-api-fastapi in 7000ms
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 1000ms

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for python-quart in 3000ms
ok 2 deploy python-quart in 6000ms
ok 3 redeploy python-quart in 6000ms
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 0ms

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
not ok 1 setup_file failed
# (from function `setup_file' in test file contract/deploy.bats, line 19)
#   `R -e 'renv::restore(lockfile="renv.lock")' && \' failed
#
# R version 4.3.1 (2023-06-16) -- "Beagle Scouts"
# Copyright (C) 2023 The R Foundation for Statistical Computing
# Platform: aarch64-apple-darwin20 (64-bit)
#
# R is free software and comes with ABSOLUTELY NO WARRANTY.
# You are welcome to redistribute it under certain conditions.
# Type 'license()' or 'licence()' for distribution details.
#
#   Natural language support but running in an English locale
#
# R is a collaborative project with many contributors.
# Type 'contributors()' for more information and
# 'citation()' on how to cite R or R packages in publications.
#
# Type 'demo()' for some demos, 'help()' for on-line help, or
# 'help.start()' for an HTML browser interface to help.
# Type 'q()' to quit R.
#
# * Project '~/work/publishing-client/test/content/bundles/quarto-website-r-py' loaded. [renv 0.15.2]
# > renv::restore(lockfile="renv.lock")
# The following package(s) will be updated:
#
# # CRAN ===============================
# - Rcpp          [1.0.12 -> 1.0.10]
# - askpass       [1.2.0 -> 1.1]
# - bslib         [0.5.1 -> 0.4.2]
# - cli           [3.6.2 -> 3.6.1]
# - curl          [repo: RSPM -> CRAN; ver: 5.2.1 -> 5.0.0]
# - digest        [0.6.35 -> 0.6.31]
# - evaluate      [repo: RSPM -> CRAN; ver: 0.22 -> 0.21]
# - fontawesome   [0.5.2 -> 0.5.1]
# - fs            [1.6.4 -> 1.6.2]
# - glue          [1.7.0 -> 1.6.2]
# - htmltools     [0.5.6 -> 0.5.5]
# - jsonlite      [1.8.8 -> 1.8.4]
# - knitr         [repo: RSPM -> CRAN; ver: 1.44 -> 1.42]
# - lifecycle     [1.0.4 -> 1.0.3]
# - openssl       [2.1.2 -> 2.0.6]
# - packrat       [0.9.2 -> 0.9.1]
# - processx      [3.8.3 -> 3.8.1]
# - ps            [1.7.6 -> 1.7.5]
# - rlang         [1.1.3 -> 1.1.1]
# - rmarkdown     [repo: RSPM -> CRAN; ver: 2.25 -> 2.21]
# - rsconnect     [1.2.2 -> 0.8.29]
# - rstudioapi    [0.15.0 -> 0.14]
# - sass          [0.4.7 -> 0.4.6]
# - sys           [3.4.2 -> 3.4.1]
# - tinytex       [repo: RSPM -> CRAN; ver: 0.47 -> 0.45]
# - vctrs         [0.6.5 -> 0.6.2]
# - xfun          [repo: RSPM -> CRAN; ver: 0.40 -> 0.39]
# - yaml          [2.3.8 -> 2.3.7]
# - quarto        [* -> 1.2]
#
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/bslib/bslib_0.4.2.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/sass/sass_0.4.6.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/fs/fs_1.6.2.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/curl/curl_5.0.0.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://mran.microsoft.com/snapshot/2023-10-02/bin/macosx/big-sur-arm64/contrib/4.3/evaluate_0.21.tgz' ...
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/evaluate/evaluate_0.21.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/fontawesome/fontawesome_0.5.1.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/knitr/knitr_1.42.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/xfun/xfun_0.39.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/openssl/openssl_2.0.6.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://mran.microsoft.com/snapshot/2023-09-05/bin/macosx/big-sur-arm64/contrib/4.3/packrat_0.9.1.tgz' ...
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/packrat/packrat_0.9.1.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/processx/processx_3.8.1.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/Rcpp/Rcpp_1.0.10.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/rmarkdown/rmarkdown_2.21.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/vctrs/vctrs_0.6.2.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/tinytex/tinytex_0.45.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/rsconnect/rsconnect_0.8.29.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/rstudioapi/rstudioapi_0.14.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://mran.microsoft.com/snapshot/2023-09-19/bin/macosx/big-sur-arm64/contrib/4.3/quarto_1.2.tgz' ...
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/quarto/quarto_1.2.tar.gz' ...
# 	OK [file is up to date]
# Installing sys [3.4.1] ...
# 	OK [linked cache]
# Installing askpass [1.1] ...
# 	OK [linked cache]
# Installing digest [0.6.31] ...
# 	OK [linked cache]
# Installing rlang [1.1.1] ...
# 	OK [linked cache]
# Installing htmltools [0.5.5] ...
# 	OK [linked cache]
# Installing jsonlite [1.8.4] ...
# 	OK [linked cache]
# Installing fs [1.6.2] ...
# 	FAILED
# Error installing package 'fs':
# ==============================
#
# * installing to library ‘/Users/kgartland/work/publishing-client/test/content/bundles/quarto-website-r-py/renv/staging/1’
# * installing *source* package ‘fs’ ...
# ** package ‘fs’ successfully unpacked and MD5 sums checked
# ** using staged installation
# ** libs
# using C++ compiler: ‘Apple clang version 15.0.0 (clang-1500.3.9.4)’
# using SDK: ‘MacOSX14.4.sdk’
# clang++ -arch arm64 -std=gnu++17 -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I./libuv-1.44.2/include -I. -pthread  -I/opt/R/arm64/include    -fPIC  -falign-functions=64 -Wall -g -O2  -c dir.cc -o dir.o
# clang++ -arch arm64 -std=gnu++17 -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I./libuv-1.44.2/include -I. -pthread  -I/opt/R/arm64/include    -fPIC  -falign-functions=64 -Wall -g -O2  -c error.cc -o error.o
# clang++ -arch arm64 -std=gnu++17 -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I./libuv-1.44.2/include -I. -pthread  -I/opt/R/arm64/include    -fPIC  -falign-functions=64 -Wall -g -O2  -c file.cc -o file.o
# In file included from file.cc:13:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/vector:321:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_bool.h:20:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_integral.h:32:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/locale:202:
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:966:34: error: too many arguments provided to function-like macro invocation
#     int length(state_type& __st, const extern_type* __frm, const extern_type* __end, size_t __mx) const
#                                  ^
# /Library/Frameworks/R.framework/Resources/include/Rinternals.h:968:9: note: macro 'length' defined here
# #define length(x)               Rf_length(x)
#         ^
# In file included from file.cc:13:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/vector:321:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_bool.h:20:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_integral.h:32:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/locale:202:
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:965:5: error: '__abi_tag__' attribute only applies to structs, variables, functions, and namespaces
#     _LIBCPP_INLINE_VISIBILITY
#     ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__config:891:37: note: expanded from macro '_LIBCPP_INLINE_VISIBILITY'
# #  define _LIBCPP_INLINE_VISIBILITY _LIBCPP_HIDE_FROM_ABI
#                                     ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__config:870:26: note: expanded from macro '_LIBCPP_HIDE_FROM_ABI'
#           __attribute__((__abi_tag__(_LIBCPP_TOSTRING(_LIBCPP_ODR_SIGNATURE))))
#                          ^
# In file included from file.cc:13:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/vector:321:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_bool.h:20:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_integral.h:32:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/locale:202:
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:966:15: error: expected ';' at end of declaration list
#     int length(state_type& __st, const extern_type* __frm, const extern_type* __end, size_t __mx) const
#               ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:1052:34: error: too many arguments provided to function-like macro invocation
#     int length(state_type& __st, const extern_type* __frm, const extern_type* __end, size_t __mx) const
#                                  ^
# /Library/Frameworks/R.framework/Resources/include/Rinternals.h:968:9: note: macro 'length' defined here
# #define length(x)               Rf_length(x)
#         ^
# In file included from file.cc:13:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/vector:321:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_bool.h:20:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_integral.h:32:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/locale:202:
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:1051:5: error: '__abi_tag__' attribute only applies to structs, variables, functions, and namespaces
#     _LIBCPP_INLINE_VISIBILITY
#     ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__config:891:37: note: expanded from macro '_LIBCPP_INLINE_VISIBILITY'
# #  define _LIBCPP_INLINE_VISIBILITY _LIBCPP_HIDE_FROM_ABI
#                                     ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__config:870:26: note: expanded from macro '_LIBCPP_HIDE_FROM_ABI'
#           __attribute__((__abi_tag__(_LIBCPP_TOSTRING(_LIBCPP_ODR_SIGNATURE))))
#                          ^
# In file included from file.cc:13:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/vector:321:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_bool.h:20:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_integral.h:32:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/locale:202:
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:1052:15: error: expected ';' at end of declaration list
#     int length(state_type& __st, const extern_type* __frm, const extern_type* __end, size_t __mx) const
#               ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:1137:34: error: too many arguments provided to function-like macro invocation
#     int length(state_type& __st, const extern_type* __frm, const extern_type* __end, size_t __mx) const
#                                  ^
# /Library/Frameworks/R.framework/Resources/include/Rinternals.h:968:9: note: macro 'length' defined here
# #define length(x)               Rf_length(x)
#         ^
# In file included from file.cc:13:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/vector:321:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_bool.h:20:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_integral.h:32:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/locale:202:
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:1136:5: error: '__abi_tag__' attribute only applies to structs, variables, functions, and namespaces
#     _LIBCPP_INLINE_VISIBILITY
#     ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__config:891:37: note: expanded from macro '_LIBCPP_INLINE_VISIBILITY'
# #  define _LIBCPP_INLINE_VISIBILITY _LIBCPP_HIDE_FROM_ABI
#                                     ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__config:870:26: note: expanded from macro '_LIBCPP_HIDE_FROM_ABI'
#           __attribute__((__abi_tag__(_LIBCPP_TOSTRING(_LIBCPP_ODR_SIGNATURE))))
#                          ^
# In file included from file.cc:13:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/vector:321:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_bool.h:20:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_integral.h:32:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/locale:202:
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:1137:15: error: expected ';' at end of declaration list
#     int length(state_type& __st, const extern_type* __frm, const extern_type* __end, size_t __mx) const
#               ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:1313:34: error: too many arguments provided to function-like macro invocation
#     int length(state_type& __st, const extern_type* __frm, const extern_type* __end, size_t __mx) const
#                                  ^
# /Library/Frameworks/R.framework/Resources/include/Rinternals.h:968:9: note: macro 'length' defined here
# #define length(x)               Rf_length(x)
#         ^
# In file included from file.cc:13:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/vector:321:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_bool.h:20:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_integral.h:32:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/locale:202:
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:1312:5: error: '__abi_tag__' attribute only applies to structs, variables, functions, and namespaces
#     _LIBCPP_INLINE_VISIBILITY
#     ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__config:891:37: note: expanded from macro '_LIBCPP_INLINE_VISIBILITY'
# #  define _LIBCPP_INLINE_VISIBILITY _LIBCPP_HIDE_FROM_ABI
#                                     ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__config:870:26: note: expanded from macro '_LIBCPP_HIDE_FROM_ABI'
#           __attribute__((__abi_tag__(_LIBCPP_TOSTRING(_LIBCPP_ODR_SIGNATURE))))
#                          ^
# In file included from file.cc:13:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/vector:321:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_bool.h:20:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_integral.h:32:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/locale:202:
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:1313:15: error: expected ';' at end of declaration list
#     int length(state_type& __st, const extern_type* __frm, const extern_type* __end, size_t __mx) const
#               ^
# 12 errors generated.
# make: *** [file.o] Error 1
# ERROR: compilation failed for package ‘fs’
# * removing ‘/Users/kgartland/work/publishing-client/test/content/bundles/quarto-website-r-py/renv/staging/1/fs’
# Error: install of package 'fs' failed [error code 1]
# In addition: Warning messages:
# 1: curl: (28) Failed to connect to mran.microsoft.com port 443 after 20004 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20005 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20001 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20006 ms: Timeout was reached
# 2: curl: (28) Failed to connect to mran.microsoft.com port 443 after 20006 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20004 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20005 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20008 ms: Timeout was reached
# 3: failed to retrieve 'https://mran.microsoft.com/snapshot/2023-10-02/bin/macosx/big-sur-arm64/contrib/4.3/evaluate_0.21.tgz' [error code 28]
# 4: curl: (28) Failed to connect to mran.microsoft.com port 443 after 20004 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20011 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20004 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20008 ms: Timeout was reached
# 5: failed to retrieve 'https://mran.microsoft.com/snapshot/2023-09-05/bin/macosx/big-sur-arm64/contrib/4.3/packrat_0.9.1.tgz' [error code 28]
# 6: curl: (28) Failed to connect to mran.microsoft.com port 443 after 20007 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20010 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20011 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20007 ms: Timeout was reached
# 7: failed to retrieve 'https://mran.microsoft.com/snapshot/2023-09-19/bin/macosx/big-sur-arm64/contrib/4.3/quarto_1.2.tgz' [error code 28]
# Traceback (most recent calls last):
# 12: renv::restore(lockfile = "renv.lock")
# 11: renv_restore_run_actions(project, diff, current, lockfile, rebuild)
# 10: renv_install_impl(records)
#  9: renv_install_staged(records)
#  8: renv_install_default(records)
#  7: handler(package, renv_install_package(record))
#  6: renv_install_package(record)
#  5: withCallingHandlers(renv_install_package_impl(record), error = function(e) {
#         vwritef("\tFAILED")
#         writef(e$output)
#     })
#  4: renv_install_package_impl(record)
#  3: r_cmd_install(package, path)
#  2: r_exec_error(package, output, "install", status)
#  1: stop(error)
# Execution halted
# publisher: error: expected "<guid>"
# bats warning: Executed 1 instead of expected 5 tests
error: Recipe `run` failed with exit code 1
Error occurred with content: quarto-website-r-py

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
not ok 1 setup_file failed
# (from function `setup_file' in test file contract/deploy.bats, line 9)
#   `setup_file() {' failed with status 130
#
# R version 4.3.1 (2023-06-16) -- "Beagle Scouts"
# Copyright (C) 2023 The R Foundation for Statistical Computing
# Platform: aarch64-apple-darwin20 (64-bit)
#
# R is free software and comes with ABSOLUTELY NO WARRANTY.
# You are welcome to redistribute it under certain conditions.
# Type 'license()' or 'licence()' for distribution details.
#
#   Natural language support but running in an English locale
#
# R is a collaborative project with many contributors.
# Type 'contributors()' for more information and
# 'citation()' on how to cite R or R packages in publications.
#
# Type 'demo()' for some demos, 'help()' for on-line help, or
# 'help.start()' for an HTML browser interface to help.
# Type 'q()' to quit R.
#
# * Project '~/work/publishing-client/test/content/bundles/quarto-website-r' loaded. [renv 0.15.2]
# > renv::restore(lockfile="renv.lock")
# The following package(s) will be updated:
#
# # CRAN ===============================
# - Rcpp          [1.0.12 -> 1.0.10]
# - askpass       [1.2.0 -> 1.1]
# - bslib         [0.5.1 -> 0.4.2]
# - cli           [3.6.2 -> 3.6.1]
# - curl          [repo: RSPM -> CRAN; ver: 5.2.1 -> 5.0.0]
# - digest        [0.6.35 -> 0.6.31]
# - evaluate      [repo: RSPM -> CRAN; ver: 0.22 -> 0.21]
# - fontawesome   [0.5.2 -> 0.5.1]
# - fs            [1.6.4 -> 1.6.2]
# - glue          [1.7.0 -> 1.6.2]
# - htmltools     [0.5.6 -> 0.5.5]
# - jsonlite      [1.8.8 -> 1.8.4]
# - knitr         [repo: RSPM -> CRAN; ver: 1.44 -> 1.42]
# - lifecycle     [1.0.4 -> 1.0.3]
# - openssl       [2.1.2 -> 2.0.6]
# - packrat       [0.9.2 -> 0.9.1]
# - processx      [3.8.3 -> 3.8.1]
# - ps            [1.7.6 -> 1.7.5]
# - renv          [0.15.2 -> 1.0.7]
# - rlang         [1.1.3 -> 1.1.1]
# - rmarkdown     [repo: RSPM -> CRAN; ver: 2.25 -> 2.21]
# - rsconnect     [1.2.2 -> 0.8.29]
# - rstudioapi    [0.15.0 -> 0.14]
# - sass          [0.4.7 -> 0.4.6]
# - sys           [3.4.2 -> 3.4.1]
# - tinytex       [repo: RSPM -> CRAN; ver: 0.47 -> 0.45]
# - vctrs         [0.6.5 -> 0.6.2]
# - xfun          [repo: RSPM -> CRAN; ver: 0.40 -> 0.39]
# - yaml          [2.3.8 -> 2.3.7]
# - quarto        [* -> 1.2]
#
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/bslib/bslib_0.4.2.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/sass/sass_0.4.6.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/fs/fs_1.6.2.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/curl/curl_5.0.0.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://mran.microsoft.com/snapshot/2023-10-02/bin/macosx/big-sur-arm64/contrib/4.3/evaluate_0.21.tgz' ...
#
# Traceback (most recent calls last):
# 44: renv::restore(lockfile = "renv.lock")
# 43: renv_restore_run_actions(project, diff, current, lockfile, rebuild)
# 42: retrieve(packages)
# 41: handler(package, renv_retrieve_impl(package))
# 40: renv_retrieve_impl(package)
# 39: renv_retrieve_repos(record)
# 38: catch(withCallingHandlers(method(record), renv.retrieve.error = function(error) {
#         errors$push(error$data)
#     }))
# 37: tryCatch(withCallingHandlers(expr, error = renv_error_capture),
#         error = renv_error_tag)
# 36: tryCatchList(expr, classes, parentenv, handlers)
# 35: tryCatchOne(expr, names, parentenv, handlers[[1L]])
# 34: doTryCatch(return(expr), name, parentenv, handler)
# 33: withCallingHandlers(expr, error = renv_error_capture)
# 32: withCallingHandlers(method(record), renv.retrieve.error = function(error) {
#         errors$push(error$data)
#     })
# 31: method(record)
# 30: renv_retrieve_package(record, url, path)
# 29: (function() {
#         renv_scope_auth(record)
#         catch(download(url, destfile = path, type = type))
#     })()
# 28: catch(download(url, destfile = path, type = type))
# 27: tryCatch(withCallingHandlers(expr, error = renv_error_capture),
#         error = renv_error_tag)
# 26: tryCatchList(expr, classes, parentenv, handlers)
# 25: tryCatchOne(expr, names, parentenv, handlers[[1L]])
# 24: doTryCatch(return(expr), name, parentenv, handler)
# 23: withCallingHandlers(expr, error = renv_error_capture)
# 22: download(url, destfile = path, type = type)
# 21: renv_download_size(url, type, headers)
# 20: catch(renv_download_headers(url, type, headers))
# 19: tryCatch(withCallingHandlers(expr, error = renv_error_capture),
#         error = renv_error_tag)
# 18: tryCatchList(expr, classes, parentenv, handlers)
# 17: tryCatchOne(expr, names, parentenv, handlers[[1L]])
# 16: doTryCatch(return(expr), name, parentenv, handler)
# 15: withCallingHandlers(expr, error = renv_error_capture)
# 14: renv_download_headers(url, type, headers)
# 13: renv_download_impl(url = url, destfile = file, type = type, request = "HEAD",
#         headers = headers)
# 12: catch(downloader(url, destfile, type, request, headers))
# 11: tryCatch(withCallingHandlers(expr, error = renv_error_capture),
#         error = renv_error_tag)
# 10: tryCatchList(expr, classes, parentenv, handlers)
#  9: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#  8: doTryCatch(return(expr), name, parentenv, handler)
#  7: withCallingHandlers(expr, error = renv_error_capture)
#  6: downloader(url, destfile, type, request, headers)
#  5: <condition-handler>(...)
#  4: renv_exit_handlers_get(envir)
#  3: format(envir)
#  2: format.default(envir)
#  1: prettyNum(.Internal(format(x, trim, digits, nsmall, width, 3L,
#         na.encode, scientific, decimal.mark)), big.mark = big.mark,
#         big.interval = big.interval, small.mark = small.mark, small.interval = small.interval,
#         decimal.mark = decimal.mark, input.d.mark = decimal.mark,
#         zero.print = zero.print, drop0trailing = drop0trailing, is.cmplx = is.complex(x),
#         preserve.width = if (trim) "individual" else "common")
# Execution halted
# publisher: error: expected "<guid>"

# Received SIGINT, aborting ...

# bats warning: Executed 1 instead of expected 5 tests
Error occurred with content: quarto-website-r

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for plumber-tableau-loess in 0ms # skip
not ok 2 deploy plumber-tableau-loess in 2000ms
# (from function `assert_output' in file contract/../node_modules/bats-assert/src/assert.bash, line 231,
#  from function `deploy_assertion' in file contract/deploy.bats, line 38,
#  in test file contract/deploy.bats, line 117)
#   `deploy_assertion' failed
#
# -- output does not contain substring --
# substring : "app_mode":"api"
# output    : {"guid":"84a3aaac-7723-4722-9faa-6981a7ba4db1","name":"","title":"plumber-tableau-loess","description":"plumber-tableau-loess description","access_type":"acl","connection_timeout":null,"read_timeout":null,"init_timeout":null,"idle_timeout":null,"max_processes":null,"min_processes":null,"max_conns_per_process":null,"load_factor":null,"memory_request":null,"memory_limit":null,"cpu_request":null,"cpu_limit":null,"amd_gpu_limit":null,"nvidia_gpu_limit":null,"service_account_name":null,"default_image_name":null,"created_time":"2024-05-13T14:23:33Z","last_deployed_time":"2024-05-13T14:23:34Z","bundle_id":"110","app_mode":"static","content_category":"","parameterized":false,"cluster_name":null,"image_name":null,"r_version":null,"py_version":null,"quarto_version":null,"r_environment_management":null,"default_r_environment_management":null,"py_environment_management":null,"default_py_environment_management":null,"run_as":null,"run_as_current_user":false,"owner_guid":"cf934fb7-8624-436b-b635-47cf894909ac","content_url":"http://52.90.67.68:3939/content/84a3aaac-7723-4722-9faa-6981a7ba4db1/","dashboard_url":"http://52.90.67.68:3939/connect/#/apps/84a3aaac-7723-4722-9faa-6981a7ba4db1","app_role":"owner","id":"72"}
# --
#
not ok 3 redeploy plumber-tableau-loess in 2000ms
# (from function `assert_output' in file contract/../node_modules/bats-assert/src/assert.bash, line 231,
#  from function `deploy_assertion' in file contract/deploy.bats, line 38,
#  in test file contract/deploy.bats, line 124)
#   `deploy_assertion' failed
#
# -- output does not contain substring --
# substring : "app_mode":"api"
# output    : {"guid":"84a3aaac-7723-4722-9faa-6981a7ba4db1","name":"","title":"plumber-tableau-loess","description":"plumber-tableau-loess description","access_type":"acl","connection_timeout":null,"read_timeout":null,"init_timeout":null,"idle_timeout":null,"max_processes":null,"min_processes":null,"max_conns_per_process":null,"load_factor":null,"memory_request":null,"memory_limit":null,"cpu_request":null,"cpu_limit":null,"amd_gpu_limit":null,"nvidia_gpu_limit":null,"service_account_name":null,"default_image_name":null,"created_time":"2024-05-13T14:23:33Z","last_deployed_time":"2024-05-13T14:23:36Z","bundle_id":"111","app_mode":"static","content_category":"","parameterized":false,"cluster_name":null,"image_name":null,"r_version":null,"py_version":null,"quarto_version":null,"r_environment_management":null,"default_r_environment_management":null,"py_environment_management":null,"default_py_environment_management":null,"run_as":null,"run_as_current_user":false,"owner_guid":"cf934fb7-8624-436b-b635-47cf894909ac","content_url":"http://52.90.67.68:3939/content/84a3aaac-7723-4722-9faa-6981a7ba4db1/","dashboard_url":"http://52.90.67.68:3939/connect/#/apps/84a3aaac-7723-4722-9faa-6981a7ba4db1","app_role":"owner","id":"72"}
# --
#
not ok 4 check for toml file in 0ms
# (from function `assert_output' in file contract/../node_modules/bats-assert/src/assert.bash, line 231,
#  in test file contract/deploy.bats, line 129)
#   `assert_output --partial "type = '${CONTENT_TYPE}'"' failed
#
# -- output does not contain substring --
# substring (1 lines):
#   type = 'r-plumber'
# output (38 lines):
#   # This file is automatically generated by Posit Publisher; do not edit.
#   '$schema' = 'https://cdn.posit.co/publisher/schemas/posit-publishing-record-schema-v3.json'
#   server_type = 'connect'
#   server_url = 'http://52.90.67.68:3939'
#   client_version = '1.0.alpha6-106-gcb3e141e'
#   created_at = '2024-05-13T10:23:32-04:00'
#   configuration_name = 'plumber-tableau-loess'
#   id = '84a3aaac-7723-4722-9faa-6981a7ba4db1'
#   deployed_at = '2024-05-13T10:23:36-04:00'
#   bundle_id = '111'
#   bundle_url = 'http://52.90.67.68:3939/__api__/v1/content/84a3aaac-7723-4722-9faa-6981a7ba4db1/bundles/111/download'
#   dashboard_url = 'http://52.90.67.68:3939/connect/#/apps/84a3aaac-7723-4722-9faa-6981a7ba4db1'
#   direct_url = 'http://52.90.67.68:3939/content/84a3aaac-7723-4722-9faa-6981a7ba4db1'
#   files = [
#     '.Rprofile',
#     '.posit/publish/default.toml',
#     '.posit/publish/deployments/ci_deploy.toml',
#     '.posit/publish/plumber-tableau-loess.toml',
#     'index.htm',
#     'meta.yaml',
#     'plumber-tableau-loess.Rproj',
#     'plumber.R',
#     'renv.lock',
#     'renv/.gitignore',
#     'renv/activate.R',
#     'renv/settings.json',
#     'test/.publisher-env'
#   ]
#
#   [configuration]
#   '$schema' = 'https://cdn.posit.co/publisher/schemas/posit-publishing-schema-v3.json'
#   type = 'html'
#   entrypoint = 'index.htm'
#   validate = true
#   has_parameters = false
#   files = ['*']
#   title = 'plumber-tableau-loess'
#   description = 'plumber-tableau-loess description'
# --
#
ok 5 deploy no requirements file in 0ms # skip
error: Recipe `run` failed with exit code 1
Error occurred with content: plumber-tableau-loess

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for blastula-multiple-images in 1000ms # skip

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
/Users/kgartland/work/publishing-client/test/bats/node_modules/bats/libexec/bats-core/bats: line 328: 65416 Hangup: 1               exec bats-exec-suite "${flags[@]}" "${filenames[@]}"
     65417                       | bats_test_count_validator
     65418                       | "$interpolated_formatter" "${formatter_flags[@]}"
ok 1 requirements create works as expected for stock-dashboard-python in 3000ms
ok 2 deploy stock-dashboard-python in 7000ms
ok 3 redeploy stock-dashboard-python in 6000ms
ok 4 check for toml file in 1000ms
ok 5 deploy no requirements file in 0ms

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for python-flasgger in 3000ms
ok 2 deploy python-flasgger in 5000ms
ok 3 redeploy python-flasgger in 6000ms
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 0ms

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for python-streamlit in 3000ms
ok 2 deploy python-streamlit in 6000ms
ok 3 redeploy python-streamlit in 6000ms
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 1000ms

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for quarto-proj-r-shiny in 0ms # skip
not ok 2 deploy quarto-proj-r-shiny in 14000ms
# (from function `assert_output' in file contract/../node_modules/bats-assert/src/assert.bash, line 231,
#  from function `deploy_assertion' in file contract/deploy.bats, line 38,
#  in test file contract/deploy.bats, line 117)
#   `deploy_assertion' failed
#
# -- output does not contain substring --
# substring : "app_mode":"quarto-static"
# output    : {"guid":"14b8ee7e-6dae-4bda-b6f6-cf3dedd8ee2b","name":"","title":"quarto-proj-r-shiny","description":"quarto-proj-r-shiny description","access_type":"acl","connection_timeout":25,"read_timeout":30,"init_timeout":35,"idle_timeout":40,"max_processes":2,"min_processes":1,"max_conns_per_process":5,"load_factor":0.8,"memory_request":null,"memory_limit":null,"cpu_request":null,"cpu_limit":null,"amd_gpu_limit":null,"nvidia_gpu_limit":null,"service_account_name":null,"default_image_name":null,"created_time":"2024-05-13T14:24:41Z","last_deployed_time":"2024-05-13T14:24:42Z","bundle_id":"118","app_mode":"quarto-shiny","content_category":"","parameterized":false,"cluster_name":"Local","image_name":null,"r_version":"4.1.2","py_version":null,"quarto_version":"1.4.549","r_environment_management":true,"default_r_environment_management":null,"py_environment_management":null,"default_py_environment_management":null,"run_as":null,"run_as_current_user":false,"owner_guid":"cf934fb7-8624-436b-b635-47cf894909ac","content_url":"http://52.90.67.68:3939/content/14b8ee7e-6dae-4bda-b6f6-cf3dedd8ee2b/","dashboard_url":"http://52.90.67.68:3939/connect/#/apps/14b8ee7e-6dae-4bda-b6f6-cf3dedd8ee2b","app_role":"owner","id":"76"}
# --
#
not ok 3 redeploy quarto-proj-r-shiny in 14000ms
# (from function `assert_output' in file contract/../node_modules/bats-assert/src/assert.bash, line 231,
#  from function `deploy_assertion' in file contract/deploy.bats, line 38,
#  in test file contract/deploy.bats, line 124)
#   `deploy_assertion' failed
#
# -- output does not contain substring --
# substring : "app_mode":"quarto-static"
# output    : {"guid":"14b8ee7e-6dae-4bda-b6f6-cf3dedd8ee2b","name":"","title":"quarto-proj-r-shiny","description":"quarto-proj-r-shiny description","access_type":"acl","connection_timeout":25,"read_timeout":30,"init_timeout":35,"idle_timeout":40,"max_processes":2,"min_processes":1,"max_conns_per_process":5,"load_factor":0.8,"memory_request":null,"memory_limit":null,"cpu_request":null,"cpu_limit":null,"amd_gpu_limit":null,"nvidia_gpu_limit":null,"service_account_name":null,"default_image_name":null,"created_time":"2024-05-13T14:24:41Z","last_deployed_time":"2024-05-13T14:24:56Z","bundle_id":"119","app_mode":"quarto-shiny","content_category":"","parameterized":false,"cluster_name":"Local","image_name":null,"r_version":"4.1.2","py_version":null,"quarto_version":"1.4.549","r_environment_management":true,"default_r_environment_management":null,"py_environment_management":null,"default_py_environment_management":null,"run_as":null,"run_as_current_user":false,"owner_guid":"cf934fb7-8624-436b-b635-47cf894909ac","content_url":"http://52.90.67.68:3939/content/14b8ee7e-6dae-4bda-b6f6-cf3dedd8ee2b/","dashboard_url":"http://52.90.67.68:3939/connect/#/apps/14b8ee7e-6dae-4bda-b6f6-cf3dedd8ee2b","app_role":"owner","id":"76"}
# --
#
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 0ms # skip
error: Recipe `run` failed with exit code 1
Error occurred with content: quarto-proj-r-shiny

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for stock-api-fastapi in 2000ms
ok 2 deploy stock-api-fastapi in 8000ms
ok 3 redeploy stock-api-fastapi in 7000ms
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 0ms

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for python-quart in 3000ms
ok 2 deploy python-quart in 5000ms
ok 3 redeploy python-quart in 5000ms
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 1000ms

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
not ok 1 setup_file failed
# (from function `setup_file' in test file contract/deploy.bats, line 19)
#   `R -e 'renv::restore(lockfile="renv.lock")' && \' failed
#
# R version 4.3.1 (2023-06-16) -- "Beagle Scouts"
# Copyright (C) 2023 The R Foundation for Statistical Computing
# Platform: aarch64-apple-darwin20 (64-bit)
#
# R is free software and comes with ABSOLUTELY NO WARRANTY.
# You are welcome to redistribute it under certain conditions.
# Type 'license()' or 'licence()' for distribution details.
#
#   Natural language support but running in an English locale
#
# R is a collaborative project with many contributors.
# Type 'contributors()' for more information and
# 'citation()' on how to cite R or R packages in publications.
#
# Type 'demo()' for some demos, 'help()' for on-line help, or
# 'help.start()' for an HTML browser interface to help.
# Type 'q()' to quit R.
#
# * Project '~/work/publishing-client/test/content/bundles/quarto-website-r-py' loaded. [renv 0.15.2]
# > renv::restore(lockfile="renv.lock")
# The following package(s) will be updated:
#
# # CRAN ===============================
# - Rcpp          [1.0.12 -> 1.0.10]
# - askpass       [1.2.0 -> 1.1]
# - bslib         [0.5.1 -> 0.4.2]
# - cli           [3.6.2 -> 3.6.1]
# - curl          [repo: RSPM -> CRAN; ver: 5.2.1 -> 5.0.0]
# - digest        [0.6.35 -> 0.6.31]
# - evaluate      [repo: RSPM -> CRAN; ver: 0.22 -> 0.21]
# - fontawesome   [0.5.2 -> 0.5.1]
# - fs            [1.6.4 -> 1.6.2]
# - glue          [1.7.0 -> 1.6.2]
# - htmltools     [0.5.6 -> 0.5.5]
# - jsonlite      [1.8.8 -> 1.8.4]
# - knitr         [repo: RSPM -> CRAN; ver: 1.44 -> 1.42]
# - lifecycle     [1.0.4 -> 1.0.3]
# - openssl       [2.1.2 -> 2.0.6]
# - packrat       [0.9.2 -> 0.9.1]
# - processx      [3.8.3 -> 3.8.1]
# - ps            [1.7.6 -> 1.7.5]
# - rlang         [1.1.3 -> 1.1.1]
# - rmarkdown     [repo: RSPM -> CRAN; ver: 2.25 -> 2.21]
# - rsconnect     [1.2.2 -> 0.8.29]
# - rstudioapi    [0.15.0 -> 0.14]
# - sass          [0.4.7 -> 0.4.6]
# - sys           [3.4.2 -> 3.4.1]
# - tinytex       [repo: RSPM -> CRAN; ver: 0.47 -> 0.45]
# - vctrs         [0.6.5 -> 0.6.2]
# - xfun          [repo: RSPM -> CRAN; ver: 0.40 -> 0.39]
# - yaml          [2.3.8 -> 2.3.7]
# - quarto        [* -> 1.2]
#
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/bslib/bslib_0.4.2.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/sass/sass_0.4.6.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/fs/fs_1.6.2.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/curl/curl_5.0.0.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://mran.microsoft.com/snapshot/2023-10-02/bin/macosx/big-sur-arm64/contrib/4.3/evaluate_0.21.tgz' ...
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/evaluate/evaluate_0.21.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/fontawesome/fontawesome_0.5.1.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/knitr/knitr_1.42.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/xfun/xfun_0.39.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/openssl/openssl_2.0.6.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://mran.microsoft.com/snapshot/2023-09-05/bin/macosx/big-sur-arm64/contrib/4.3/packrat_0.9.1.tgz' ...
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/packrat/packrat_0.9.1.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/processx/processx_3.8.1.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/Rcpp/Rcpp_1.0.10.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/rmarkdown/rmarkdown_2.21.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/vctrs/vctrs_0.6.2.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/tinytex/tinytex_0.45.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/rsconnect/rsconnect_0.8.29.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/rstudioapi/rstudioapi_0.14.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://mran.microsoft.com/snapshot/2023-09-19/bin/macosx/big-sur-arm64/contrib/4.3/quarto_1.2.tgz' ...
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/quarto/quarto_1.2.tar.gz' ...
# 	OK [file is up to date]
# Installing sys [3.4.1] ...
# 	OK [linked cache]
# Installing askpass [1.1] ...
# 	OK [linked cache]
# Installing digest [0.6.31] ...
# 	OK [linked cache]
# Installing rlang [1.1.1] ...
# 	OK [linked cache]
# Installing htmltools [0.5.5] ...
# 	OK [linked cache]
# Installing jsonlite [1.8.4] ...
# 	OK [linked cache]
# Installing fs [1.6.2] ...
# 	FAILED
# Error installing package 'fs':
# ==============================
#
# * installing to library ‘/Users/kgartland/work/publishing-client/test/content/bundles/quarto-website-r-py/renv/staging/1’
# * installing *source* package ‘fs’ ...
# ** package ‘fs’ successfully unpacked and MD5 sums checked
# ** using staged installation
# ** libs
# using C++ compiler: ‘Apple clang version 15.0.0 (clang-1500.3.9.4)’
# using SDK: ‘MacOSX14.4.sdk’
# clang++ -arch arm64 -std=gnu++17 -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I./libuv-1.44.2/include -I. -pthread  -I/opt/R/arm64/include    -fPIC  -falign-functions=64 -Wall -g -O2  -c dir.cc -o dir.o
# clang++ -arch arm64 -std=gnu++17 -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I./libuv-1.44.2/include -I. -pthread  -I/opt/R/arm64/include    -fPIC  -falign-functions=64 -Wall -g -O2  -c error.cc -o error.o
# clang++ -arch arm64 -std=gnu++17 -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I./libuv-1.44.2/include -I. -pthread  -I/opt/R/arm64/include    -fPIC  -falign-functions=64 -Wall -g -O2  -c file.cc -o file.o
# In file included from file.cc:13:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/vector:321:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_bool.h:20:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_integral.h:32:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/locale:202:
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:966:34: error: too many arguments provided to function-like macro invocation
#     int length(state_type& __st, const extern_type* __frm, const extern_type* __end, size_t __mx) const
#                                  ^
# /Library/Frameworks/R.framework/Resources/include/Rinternals.h:968:9: note: macro 'length' defined here
# #define length(x)               Rf_length(x)
#         ^
# In file included from file.cc:13:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/vector:321:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_bool.h:20:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_integral.h:32:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/locale:202:
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:965:5: error: '__abi_tag__' attribute only applies to structs, variables, functions, and namespaces
#     _LIBCPP_INLINE_VISIBILITY
#     ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__config:891:37: note: expanded from macro '_LIBCPP_INLINE_VISIBILITY'
# #  define _LIBCPP_INLINE_VISIBILITY _LIBCPP_HIDE_FROM_ABI
#                                     ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__config:870:26: note: expanded from macro '_LIBCPP_HIDE_FROM_ABI'
#           __attribute__((__abi_tag__(_LIBCPP_TOSTRING(_LIBCPP_ODR_SIGNATURE))))
#                          ^
# In file included from file.cc:13:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/vector:321:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_bool.h:20:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_integral.h:32:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/locale:202:
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:966:15: error: expected ';' at end of declaration list
#     int length(state_type& __st, const extern_type* __frm, const extern_type* __end, size_t __mx) const
#               ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:1052:34: error: too many arguments provided to function-like macro invocation
#     int length(state_type& __st, const extern_type* __frm, const extern_type* __end, size_t __mx) const
#                                  ^
# /Library/Frameworks/R.framework/Resources/include/Rinternals.h:968:9: note: macro 'length' defined here
# #define length(x)               Rf_length(x)
#         ^
# In file included from file.cc:13:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/vector:321:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_bool.h:20:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_integral.h:32:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/locale:202:
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:1051:5: error: '__abi_tag__' attribute only applies to structs, variables, functions, and namespaces
#     _LIBCPP_INLINE_VISIBILITY
#     ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__config:891:37: note: expanded from macro '_LIBCPP_INLINE_VISIBILITY'
# #  define _LIBCPP_INLINE_VISIBILITY _LIBCPP_HIDE_FROM_ABI
#                                     ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__config:870:26: note: expanded from macro '_LIBCPP_HIDE_FROM_ABI'
#           __attribute__((__abi_tag__(_LIBCPP_TOSTRING(_LIBCPP_ODR_SIGNATURE))))
#                          ^
# In file included from file.cc:13:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/vector:321:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_bool.h:20:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_integral.h:32:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/locale:202:
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:1052:15: error: expected ';' at end of declaration list
#     int length(state_type& __st, const extern_type* __frm, const extern_type* __end, size_t __mx) const
#               ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:1137:34: error: too many arguments provided to function-like macro invocation
#     int length(state_type& __st, const extern_type* __frm, const extern_type* __end, size_t __mx) const
#                                  ^
# /Library/Frameworks/R.framework/Resources/include/Rinternals.h:968:9: note: macro 'length' defined here
# #define length(x)               Rf_length(x)
#         ^
# In file included from file.cc:13:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/vector:321:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_bool.h:20:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_integral.h:32:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/locale:202:
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:1136:5: error: '__abi_tag__' attribute only applies to structs, variables, functions, and namespaces
#     _LIBCPP_INLINE_VISIBILITY
#     ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__config:891:37: note: expanded from macro '_LIBCPP_INLINE_VISIBILITY'
# #  define _LIBCPP_INLINE_VISIBILITY _LIBCPP_HIDE_FROM_ABI
#                                     ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__config:870:26: note: expanded from macro '_LIBCPP_HIDE_FROM_ABI'
#           __attribute__((__abi_tag__(_LIBCPP_TOSTRING(_LIBCPP_ODR_SIGNATURE))))
#                          ^
# In file included from file.cc:13:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/vector:321:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_bool.h:20:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_integral.h:32:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/locale:202:
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:1137:15: error: expected ';' at end of declaration list
#     int length(state_type& __st, const extern_type* __frm, const extern_type* __end, size_t __mx) const
#               ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:1313:34: error: too many arguments provided to function-like macro invocation
#     int length(state_type& __st, const extern_type* __frm, const extern_type* __end, size_t __mx) const
#                                  ^
# /Library/Frameworks/R.framework/Resources/include/Rinternals.h:968:9: note: macro 'length' defined here
# #define length(x)               Rf_length(x)
#         ^
# In file included from file.cc:13:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/vector:321:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_bool.h:20:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_integral.h:32:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/locale:202:
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:1312:5: error: '__abi_tag__' attribute only applies to structs, variables, functions, and namespaces
#     _LIBCPP_INLINE_VISIBILITY
#     ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__config:891:37: note: expanded from macro '_LIBCPP_INLINE_VISIBILITY'
# #  define _LIBCPP_INLINE_VISIBILITY _LIBCPP_HIDE_FROM_ABI
#                                     ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__config:870:26: note: expanded from macro '_LIBCPP_HIDE_FROM_ABI'
#           __attribute__((__abi_tag__(_LIBCPP_TOSTRING(_LIBCPP_ODR_SIGNATURE))))
#                          ^
# In file included from file.cc:13:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/vector:321:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_bool.h:20:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_integral.h:32:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/locale:202:
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:1313:15: error: expected ';' at end of declaration list
#     int length(state_type& __st, const extern_type* __frm, const extern_type* __end, size_t __mx) const
#               ^
# 12 errors generated.
# make: *** [file.o] Error 1
# ERROR: compilation failed for package ‘fs’
# * removing ‘/Users/kgartland/work/publishing-client/test/content/bundles/quarto-website-r-py/renv/staging/1/fs’
# Error: install of package 'fs' failed [error code 1]
# In addition: Warning messages:
# 1: curl: (28) Failed to connect to mran.microsoft.com port 443 after 20003 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20004 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20004 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20004 ms: Timeout was reached
# 2: curl: (28) Failed to connect to mran.microsoft.com port 443 after 20002 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20003 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20006 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20004 ms: Timeout was reached
# 3: failed to retrieve 'https://mran.microsoft.com/snapshot/2023-10-02/bin/macosx/big-sur-arm64/contrib/4.3/evaluate_0.21.tgz' [error code 28]
# 4: curl: (28) Failed to connect to mran.microsoft.com port 443 after 20002 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20006 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20002 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20004 ms: Timeout was reached
# 5: failed to retrieve 'https://mran.microsoft.com/snapshot/2023-09-05/bin/macosx/big-sur-arm64/contrib/4.3/packrat_0.9.1.tgz' [error code 28]
# 6: curl: (28) Failed to connect to mran.microsoft.com port 443 after 20002 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20004 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20007 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20004 ms: Timeout was reached
# 7: failed to retrieve 'https://mran.microsoft.com/snapshot/2023-09-19/bin/macosx/big-sur-arm64/contrib/4.3/quarto_1.2.tgz' [error code 28]
# Traceback (most recent calls last):
# 12: renv::restore(lockfile = "renv.lock")
# 11: renv_restore_run_actions(project, diff, current, lockfile, rebuild)
# 10: renv_install_impl(records)
#  9: renv_install_staged(records)
#  8: renv_install_default(records)
#  7: handler(package, renv_install_package(record))
#  6: renv_install_package(record)
#  5: withCallingHandlers(renv_install_package_impl(record), error = function(e) {
#         vwritef("\tFAILED")
#         writef(e$output)
#     })
#  4: renv_install_package_impl(record)
#  3: r_cmd_install(package, path)
#  2: r_exec_error(package, output, "install", status)
#  1: stop(error)
# Execution halted
# publisher: error: expected "<guid>"
# bats warning: Executed 1 instead of expected 5 tests
error: Recipe `run` failed with exit code 1
Error occurred with content: quarto-website-r-py

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
not ok 1 setup_file failed
# (from function `setup_file' in test file contract/deploy.bats, line 19)
#   `R -e 'renv::restore(lockfile="renv.lock")' && \' failed
#
# R version 4.3.1 (2023-06-16) -- "Beagle Scouts"
# Copyright (C) 2023 The R Foundation for Statistical Computing
# Platform: aarch64-apple-darwin20 (64-bit)
#
# R is free software and comes with ABSOLUTELY NO WARRANTY.
# You are welcome to redistribute it under certain conditions.
# Type 'license()' or 'licence()' for distribution details.
#
#   Natural language support but running in an English locale
#
# R is a collaborative project with many contributors.
# Type 'contributors()' for more information and
# 'citation()' on how to cite R or R packages in publications.
#
# Type 'demo()' for some demos, 'help()' for on-line help, or
# 'help.start()' for an HTML browser interface to help.
# Type 'q()' to quit R.
#
# * Project '~/work/publishing-client/test/content/bundles/quarto-website-r' loaded. [renv 0.15.2]
# > renv::restore(lockfile="renv.lock")
# The following package(s) will be updated:
#
# # CRAN ===============================
# - Rcpp          [1.0.12 -> 1.0.10]
# - askpass       [1.2.0 -> 1.1]
# - bslib         [0.5.1 -> 0.4.2]
# - cli           [3.6.2 -> 3.6.1]
# - curl          [repo: RSPM -> CRAN; ver: 5.2.1 -> 5.0.0]
# - digest        [0.6.35 -> 0.6.31]
# - evaluate      [repo: RSPM -> CRAN; ver: 0.22 -> 0.21]
# - fontawesome   [0.5.2 -> 0.5.1]
# - fs            [1.6.4 -> 1.6.2]
# - glue          [1.7.0 -> 1.6.2]
# - htmltools     [0.5.6 -> 0.5.5]
# - jsonlite      [1.8.8 -> 1.8.4]
# - knitr         [repo: RSPM -> CRAN; ver: 1.44 -> 1.42]
# - lifecycle     [1.0.4 -> 1.0.3]
# - openssl       [2.1.2 -> 2.0.6]
# - packrat       [0.9.2 -> 0.9.1]
# - processx      [3.8.3 -> 3.8.1]
# - ps            [1.7.6 -> 1.7.5]
# - renv          [0.15.2 -> 1.0.7]
# - rlang         [1.1.3 -> 1.1.1]
# - rmarkdown     [repo: RSPM -> CRAN; ver: 2.25 -> 2.21]
# - rsconnect     [1.2.2 -> 0.8.29]
# - rstudioapi    [0.15.0 -> 0.14]
# - sass          [0.4.7 -> 0.4.6]
# - sys           [3.4.2 -> 3.4.1]
# - tinytex       [repo: RSPM -> CRAN; ver: 0.47 -> 0.45]
# - vctrs         [0.6.5 -> 0.6.2]
# - xfun          [repo: RSPM -> CRAN; ver: 0.40 -> 0.39]
# - yaml          [2.3.8 -> 2.3.7]
# - quarto        [* -> 1.2]
#
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/bslib/bslib_0.4.2.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/sass/sass_0.4.6.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/fs/fs_1.6.2.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/curl/curl_5.0.0.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://mran.microsoft.com/snapshot/2023-10-02/bin/macosx/big-sur-arm64/contrib/4.3/evaluate_0.21.tgz' ...
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/evaluate/evaluate_0.21.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/fontawesome/fontawesome_0.5.1.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/knitr/knitr_1.42.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/xfun/xfun_0.39.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/openssl/openssl_2.0.6.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://mran.microsoft.com/snapshot/2023-09-05/bin/macosx/big-sur-arm64/contrib/4.3/packrat_0.9.1.tgz' ...
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/packrat/packrat_0.9.1.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/processx/processx_3.8.1.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/Rcpp/Rcpp_1.0.10.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/rmarkdown/rmarkdown_2.21.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/vctrs/vctrs_0.6.2.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/tinytex/tinytex_0.45.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/rsconnect/rsconnect_0.8.29.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/rstudioapi/rstudioapi_0.14.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://mran.microsoft.com/snapshot/2023-09-19/bin/macosx/big-sur-arm64/contrib/4.3/quarto_1.2.tgz' ...
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/quarto/quarto_1.2.tar.gz' ...
# 	OK [file is up to date]
# Installing renv [1.0.7] ...
# 	OK [linked cache]
# Installing sys [3.4.1] ...
# 	OK [linked cache]
# Installing askpass [1.1] ...
# 	OK [linked cache]
# Installing digest [0.6.31] ...
# 	OK [linked cache]
# Installing rlang [1.1.1] ...
# 	OK [linked cache]
# Installing htmltools [0.5.5] ...
# 	OK [linked cache]
# Installing jsonlite [1.8.4] ...
# 	OK [linked cache]
# Installing fs [1.6.2] ...
# 	FAILED
# Error installing package 'fs':
# ==============================
#
# * installing to library ‘/Users/kgartland/work/publishing-client/test/content/bundles/quarto-website-r/renv/staging/1’
# * installing *source* package ‘fs’ ...
# ** package ‘fs’ successfully unpacked and MD5 sums checked
# ** using staged installation
# ** libs
# using C++ compiler: ‘Apple clang version 15.0.0 (clang-1500.3.9.4)’
# using SDK: ‘MacOSX14.4.sdk’
# clang++ -arch arm64 -std=gnu++17 -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I./libuv-1.44.2/include -I. -pthread  -I/opt/R/arm64/include    -fPIC  -falign-functions=64 -Wall -g -O2  -c dir.cc -o dir.o
# clang++ -arch arm64 -std=gnu++17 -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I./libuv-1.44.2/include -I. -pthread  -I/opt/R/arm64/include    -fPIC  -falign-functions=64 -Wall -g -O2  -c error.cc -o error.o
# clang++ -arch arm64 -std=gnu++17 -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I./libuv-1.44.2/include -I. -pthread  -I/opt/R/arm64/include    -fPIC  -falign-functions=64 -Wall -g -O2  -c file.cc -o file.o
# In file included from file.cc:13:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/vector:321:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_bool.h:20:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_integral.h:32:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/locale:202:
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:966:34: error: too many arguments provided to function-like macro invocation
#     int length(state_type& __st, const extern_type* __frm, const extern_type* __end, size_t __mx) const
#                                  ^
# /Library/Frameworks/R.framework/Resources/include/Rinternals.h:968:9: note: macro 'length' defined here
# #define length(x)               Rf_length(x)
#         ^
# In file included from file.cc:13:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/vector:321:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_bool.h:20:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_integral.h:32:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/locale:202:
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:965:5: error: '__abi_tag__' attribute only applies to structs, variables, functions, and namespaces
#     _LIBCPP_INLINE_VISIBILITY
#     ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__config:891:37: note: expanded from macro '_LIBCPP_INLINE_VISIBILITY'
# #  define _LIBCPP_INLINE_VISIBILITY _LIBCPP_HIDE_FROM_ABI
#                                     ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__config:870:26: note: expanded from macro '_LIBCPP_HIDE_FROM_ABI'
#           __attribute__((__abi_tag__(_LIBCPP_TOSTRING(_LIBCPP_ODR_SIGNATURE))))
#                          ^
# In file included from file.cc:13:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/vector:321:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_bool.h:20:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_integral.h:32:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/locale:202:
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:966:15: error: expected ';' at end of declaration list
#     int length(state_type& __st, const extern_type* __frm, const extern_type* __end, size_t __mx) const
#               ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:1052:34: error: too many arguments provided to function-like macro invocation
#     int length(state_type& __st, const extern_type* __frm, const extern_type* __end, size_t __mx) const
#                                  ^
# /Library/Frameworks/R.framework/Resources/include/Rinternals.h:968:9: note: macro 'length' defined here
# #define length(x)               Rf_length(x)
#         ^
# In file included from file.cc:13:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/vector:321:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_bool.h:20:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_integral.h:32:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/locale:202:
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:1051:5: error: '__abi_tag__' attribute only applies to structs, variables, functions, and namespaces
#     _LIBCPP_INLINE_VISIBILITY
#     ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__config:891:37: note: expanded from macro '_LIBCPP_INLINE_VISIBILITY'
# #  define _LIBCPP_INLINE_VISIBILITY _LIBCPP_HIDE_FROM_ABI
#                                     ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__config:870:26: note: expanded from macro '_LIBCPP_HIDE_FROM_ABI'
#           __attribute__((__abi_tag__(_LIBCPP_TOSTRING(_LIBCPP_ODR_SIGNATURE))))
#                          ^
# In file included from file.cc:13:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/vector:321:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_bool.h:20:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_integral.h:32:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/locale:202:
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:1052:15: error: expected ';' at end of declaration list
#     int length(state_type& __st, const extern_type* __frm, const extern_type* __end, size_t __mx) const
#               ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:1137:34: error: too many arguments provided to function-like macro invocation
#     int length(state_type& __st, const extern_type* __frm, const extern_type* __end, size_t __mx) const
#                                  ^
# /Library/Frameworks/R.framework/Resources/include/Rinternals.h:968:9: note: macro 'length' defined here
# #define length(x)               Rf_length(x)
#         ^
# In file included from file.cc:13:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/vector:321:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_bool.h:20:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_integral.h:32:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/locale:202:
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:1136:5: error: '__abi_tag__' attribute only applies to structs, variables, functions, and namespaces
#     _LIBCPP_INLINE_VISIBILITY
#     ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__config:891:37: note: expanded from macro '_LIBCPP_INLINE_VISIBILITY'
# #  define _LIBCPP_INLINE_VISIBILITY _LIBCPP_HIDE_FROM_ABI
#                                     ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__config:870:26: note: expanded from macro '_LIBCPP_HIDE_FROM_ABI'
#           __attribute__((__abi_tag__(_LIBCPP_TOSTRING(_LIBCPP_ODR_SIGNATURE))))
#                          ^
# In file included from file.cc:13:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/vector:321:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_bool.h:20:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_integral.h:32:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/locale:202:
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:1137:15: error: expected ';' at end of declaration list
#     int length(state_type& __st, const extern_type* __frm, const extern_type* __end, size_t __mx) const
#               ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:1313:34: error: too many arguments provided to function-like macro invocation
#     int length(state_type& __st, const extern_type* __frm, const extern_type* __end, size_t __mx) const
#                                  ^
# /Library/Frameworks/R.framework/Resources/include/Rinternals.h:968:9: note: macro 'length' defined here
# #define length(x)               Rf_length(x)
#         ^
# In file included from file.cc:13:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/vector:321:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_bool.h:20:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_integral.h:32:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/locale:202:
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:1312:5: error: '__abi_tag__' attribute only applies to structs, variables, functions, and namespaces
#     _LIBCPP_INLINE_VISIBILITY
#     ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__config:891:37: note: expanded from macro '_LIBCPP_INLINE_VISIBILITY'
# #  define _LIBCPP_INLINE_VISIBILITY _LIBCPP_HIDE_FROM_ABI
#                                     ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__config:870:26: note: expanded from macro '_LIBCPP_HIDE_FROM_ABI'
#           __attribute__((__abi_tag__(_LIBCPP_TOSTRING(_LIBCPP_ODR_SIGNATURE))))
#                          ^
# In file included from file.cc:13:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/vector:321:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_bool.h:20:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_integral.h:32:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/locale:202:
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:1313:15: error: expected ';' at end of declaration list
#     int length(state_type& __st, const extern_type* __frm, const extern_type* __end, size_t __mx) const
#               ^
# 12 errors generated.
# make: *** [file.o] Error 1
# ERROR: compilation failed for package ‘fs’
# * removing ‘/Users/kgartland/work/publishing-client/test/content/bundles/quarto-website-r/renv/staging/1/fs’
# Error: install of package 'fs' failed [error code 1]
# In addition: Warning messages:
# 1: curl: (28) Failed to connect to mran.microsoft.com port 443 after 20006 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20006 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20006 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20005 ms: Timeout was reached
# 2: curl: (28) Failed to connect to mran.microsoft.com port 443 after 20003 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20005 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20006 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20006 ms: Timeout was reached
# 3: failed to retrieve 'https://mran.microsoft.com/snapshot/2023-10-02/bin/macosx/big-sur-arm64/contrib/4.3/evaluate_0.21.tgz' [error code 28]
# 4: curl: (28) Failed to connect to mran.microsoft.com port 443 after 20006 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20006 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20003 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20006 ms: Timeout was reached
# 5: failed to retrieve 'https://mran.microsoft.com/snapshot/2023-09-05/bin/macosx/big-sur-arm64/contrib/4.3/packrat_0.9.1.tgz' [error code 28]
# 6: curl: (28) Failed to connect to mran.microsoft.com port 443 after 20006 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20002 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20005 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20006 ms: Timeout was reached
# 7: failed to retrieve 'https://mran.microsoft.com/snapshot/2023-09-19/bin/macosx/big-sur-arm64/contrib/4.3/quarto_1.2.tgz' [error code 28]
# Traceback (most recent calls last):
# 12: renv::restore(lockfile = "renv.lock")
# 11: renv_restore_run_actions(project, diff, current, lockfile, rebuild)
# 10: renv_install_impl(records)
#  9: renv_install_staged(records)
#  8: renv_install_default(records)
#  7: handler(package, renv_install_package(record))
#  6: renv_install_package(record)
#  5: withCallingHandlers(renv_install_package_impl(record), error = function(e) {
#         vwritef("\tFAILED")
#         writef(e$output)
#     })
#  4: renv_install_package_impl(record)
#  3: r_cmd_install(package, path)
#  2: r_exec_error(package, output, "install", status)
#  1: stop(error)
# Execution halted
# publisher: error: expected "<guid>"
# bats warning: Executed 1 instead of expected 5 tests
error: Recipe `run` failed with exit code 1
Error occurred with content: quarto-website-r

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for plumber-tableau-loess in 0ms # skip
not ok 2 deploy plumber-tableau-loess in 2000ms
# (from function `assert_output' in file contract/../node_modules/bats-assert/src/assert.bash, line 231,
#  from function `deploy_assertion' in file contract/deploy.bats, line 38,
#  in test file contract/deploy.bats, line 117)
#   `deploy_assertion' failed
#
# -- output does not contain substring --
# substring : "app_mode":"api"
# output    : {"guid":"0e5d27e5-4343-4c3d-9646-9b62330f3515","name":"","title":"plumber-tableau-loess","description":"plumber-tableau-loess description","access_type":"acl","connection_timeout":null,"read_timeout":null,"init_timeout":null,"idle_timeout":null,"max_processes":null,"min_processes":null,"max_conns_per_process":null,"load_factor":null,"memory_request":null,"memory_limit":null,"cpu_request":null,"cpu_limit":null,"amd_gpu_limit":null,"nvidia_gpu_limit":null,"service_account_name":null,"default_image_name":null,"created_time":"2024-05-13T14:37:56Z","last_deployed_time":"2024-05-13T14:37:56Z","bundle_id":"124","app_mode":"static","content_category":"","parameterized":false,"cluster_name":null,"image_name":null,"r_version":null,"py_version":null,"quarto_version":null,"r_environment_management":null,"default_r_environment_management":null,"py_environment_management":null,"default_py_environment_management":null,"run_as":null,"run_as_current_user":false,"owner_guid":"cf934fb7-8624-436b-b635-47cf894909ac","content_url":"http://52.90.67.68:3939/content/0e5d27e5-4343-4c3d-9646-9b62330f3515/","dashboard_url":"http://52.90.67.68:3939/connect/#/apps/0e5d27e5-4343-4c3d-9646-9b62330f3515","app_role":"owner","id":"79"}
# --
#
not ok 3 redeploy plumber-tableau-loess in 2000ms
# (from function `assert_output' in file contract/../node_modules/bats-assert/src/assert.bash, line 231,
#  from function `deploy_assertion' in file contract/deploy.bats, line 38,
#  in test file contract/deploy.bats, line 124)
#   `deploy_assertion' failed
#
# -- output does not contain substring --
# substring : "app_mode":"api"
# output    : {"guid":"0e5d27e5-4343-4c3d-9646-9b62330f3515","name":"","title":"plumber-tableau-loess","description":"plumber-tableau-loess description","access_type":"acl","connection_timeout":null,"read_timeout":null,"init_timeout":null,"idle_timeout":null,"max_processes":null,"min_processes":null,"max_conns_per_process":null,"load_factor":null,"memory_request":null,"memory_limit":null,"cpu_request":null,"cpu_limit":null,"amd_gpu_limit":null,"nvidia_gpu_limit":null,"service_account_name":null,"default_image_name":null,"created_time":"2024-05-13T14:37:56Z","last_deployed_time":"2024-05-13T14:37:58Z","bundle_id":"125","app_mode":"static","content_category":"","parameterized":false,"cluster_name":null,"image_name":null,"r_version":null,"py_version":null,"quarto_version":null,"r_environment_management":null,"default_r_environment_management":null,"py_environment_management":null,"default_py_environment_management":null,"run_as":null,"run_as_current_user":false,"owner_guid":"cf934fb7-8624-436b-b635-47cf894909ac","content_url":"http://52.90.67.68:3939/content/0e5d27e5-4343-4c3d-9646-9b62330f3515/","dashboard_url":"http://52.90.67.68:3939/connect/#/apps/0e5d27e5-4343-4c3d-9646-9b62330f3515","app_role":"owner","id":"79"}
# --
#
not ok 4 check for toml file in 1000ms
# (from function `assert_output' in file contract/../node_modules/bats-assert/src/assert.bash, line 231,
#  in test file contract/deploy.bats, line 129)
#   `assert_output --partial "type = '${CONTENT_TYPE}'"' failed
#
# -- output does not contain substring --
# substring (1 lines):
#   type = 'r-plumber'
# output (38 lines):
#   # This file is automatically generated by Posit Publisher; do not edit.
#   '$schema' = 'https://cdn.posit.co/publisher/schemas/posit-publishing-record-schema-v3.json'
#   server_type = 'connect'
#   server_url = 'http://52.90.67.68:3939'
#   client_version = '1.0.alpha6-106-gcb3e141e'
#   created_at = '2024-05-13T10:37:55-04:00'
#   configuration_name = 'plumber-tableau-loess'
#   id = '0e5d27e5-4343-4c3d-9646-9b62330f3515'
#   deployed_at = '2024-05-13T10:37:58-04:00'
#   bundle_id = '125'
#   bundle_url = 'http://52.90.67.68:3939/__api__/v1/content/0e5d27e5-4343-4c3d-9646-9b62330f3515/bundles/125/download'
#   dashboard_url = 'http://52.90.67.68:3939/connect/#/apps/0e5d27e5-4343-4c3d-9646-9b62330f3515'
#   direct_url = 'http://52.90.67.68:3939/content/0e5d27e5-4343-4c3d-9646-9b62330f3515'
#   files = [
#     '.Rprofile',
#     '.posit/publish/default.toml',
#     '.posit/publish/deployments/ci_deploy.toml',
#     '.posit/publish/plumber-tableau-loess.toml',
#     'index.htm',
#     'meta.yaml',
#     'plumber-tableau-loess.Rproj',
#     'plumber.R',
#     'renv.lock',
#     'renv/.gitignore',
#     'renv/activate.R',
#     'renv/settings.json',
#     'test/.publisher-env'
#   ]
#
#   [configuration]
#   '$schema' = 'https://cdn.posit.co/publisher/schemas/posit-publishing-schema-v3.json'
#   type = 'html'
#   entrypoint = 'index.htm'
#   validate = true
#   has_parameters = false
#   files = ['*']
#   title = 'plumber-tableau-loess'
#   description = 'plumber-tableau-loess description'
# --
#
ok 5 deploy no requirements file in 0ms # skip
error: Recipe `run` failed with exit code 1
Error occurred with content: plumber-tableau-loess

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for blastula-multiple-images in 0ms # skip
ok 2 deploy blastula-multiple-images in 10000ms
ok 3 redeploy blastula-multiple-images in 19000ms
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 0ms # skip

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for quarto-proj-r in 0ms # skip
ok 2 deploy quarto-proj-r in 13000ms
ok 3 redeploy quarto-proj-r in 13000ms
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 0ms # skip

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
not ok 1 setup_file failed
# (from function `setup_file' in test file contract/deploy.bats, line 19)
#   `R -e 'renv::restore(lockfile="renv.lock")' && \' failed
#
# R version 4.3.1 (2023-06-16) -- "Beagle Scouts"
# Copyright (C) 2023 The R Foundation for Statistical Computing
# Platform: aarch64-apple-darwin20 (64-bit)
#
# R is free software and comes with ABSOLUTELY NO WARRANTY.
# You are welcome to redistribute it under certain conditions.
# Type 'license()' or 'licence()' for distribution details.
#
#   Natural language support but running in an English locale
#
# R is a collaborative project with many contributors.
# Type 'contributors()' for more information and
# 'citation()' on how to cite R or R packages in publications.
#
# Type 'demo()' for some demos, 'help()' for on-line help, or
# 'help.start()' for an HTML browser interface to help.
# Type 'q()' to quit R.
#
# * Project '~/work/publishing-client/test/content/bundles/quarto-website-r-py-separate-files-deps' loaded. [renv 0.15.2]
# > renv::restore(lockfile="renv.lock")
# The following package(s) will be updated:
#
# # CRAN ===============================
# - Rcpp          [1.0.12 -> 1.0.10]
# - askpass       [1.2.0 -> 1.1]
# - bslib         [0.5.1 -> 0.4.2]
# - cli           [3.6.2 -> 3.6.1]
# - cpp11         [0.4.6 -> 0.4.3]
# - curl          [repo: RSPM -> CRAN; ver: 5.2.1 -> 5.0.0]
# - digest        [0.6.35 -> 0.6.31]
# - dplyr         [1.1.3 -> 1.1.2]
# - evaluate      [repo: RSPM -> CRAN; ver: 0.22 -> 0.21]
# - fansi         [1.0.6 -> 1.0.4]
# - fontawesome   [0.5.2 -> 0.5.1]
# - fs            [1.6.4 -> 1.6.2]
# - glue          [1.7.0 -> 1.6.2]
# - htmltools     [0.5.6 -> 0.5.5]
# - jsonlite      [1.8.8 -> 1.8.4]
# - knitr         [repo: RSPM -> CRAN; ver: 1.44 -> 1.42]
# - lifecycle     [1.0.4 -> 1.0.3]
# - openssl       [2.1.2 -> 2.0.6]
# - packrat       [0.9.2 -> 0.9.1]
# - processx      [3.8.3 -> 3.8.1]
# - ps            [1.7.6 -> 1.7.5]
# - purrr         [1.0.2 -> 1.0.1]
# - rlang         [1.1.3 -> 1.1.1]
# - rmarkdown     [repo: RSPM -> CRAN; ver: 2.25 -> 2.21]
# - rsconnect     [1.2.2 -> 0.8.29]
# - rstudioapi    [0.15.0 -> 0.14]
# - sass          [0.4.7 -> 0.4.6]
# - sys           [3.4.2 -> 3.4.1]
# - tinytex       [repo: RSPM -> CRAN; ver: 0.47 -> 0.45]
# - utf8          [1.2.4 -> 1.2.3]
# - vctrs         [0.6.5 -> 0.6.2]
# - withr         [3.0.0 -> 2.5.0]
# - xfun          [repo: RSPM -> CRAN; ver: 0.40 -> 0.39]
# - yaml          [2.3.8 -> 2.3.7]
# - furrr         [* -> 0.3.1]
# - future        [* -> 1.32.0]
# - globals       [* -> 0.16.2]
# - listenv       [* -> 0.9.0]
# - parallelly    [* -> 1.35.0]
# - quarto        [* -> 1.2]
# - rsample       [* -> 1.1.1]
# - slider        [* -> 0.3.0]
# - warp          [* -> 0.2.0]
#
# Retrieving 'https://cran.rstudio.com/src/contrib/Archive/bslib/bslib_0.4.2.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cran.rstudio.com/src/contrib/Archive/sass/sass_0.4.6.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cran.rstudio.com/src/contrib/Archive/fs/fs_1.6.2.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cran.rstudio.com/src/contrib/Archive/cpp11/cpp11_0.4.3.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cran.rstudio.com/src/contrib/Archive/curl/curl_5.0.0.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://mran.microsoft.com/snapshot/2023-09-03/bin/macosx/big-sur-arm64/contrib/4.3/dplyr_1.1.2.tgz' ...
# Retrieving 'https://cran.rstudio.com/src/contrib/Archive/dplyr/dplyr_1.1.2.tar.gz' ...
# 	OK [downloaded 1 Mb in 0.3 secs]
# Retrieving 'https://mran.microsoft.com/snapshot/2023-10-08/bin/macosx/big-sur-arm64/contrib/4.3/fansi_1.0.4.tgz' ...
# Warning: failed to find binary for 'dplyr 1.1.2' in package repositories
# Warning: failed to retrieve 'https://mran.microsoft.com/snapshot/2023-09-03/bin/macosx/big-sur-arm64/contrib/4.3/dplyr_1.1.2.tgz' [error code 28]
# Warning: failed to find source for 'dplyr 1.1.2' in package repositories
# Warning: failed to find binary for 'fansi 1.0.4' in package repositories
# Warning: failed to retrieve 'https://mran.microsoft.com/snapshot/2023-10-08/bin/macosx/big-sur-arm64/contrib/4.3/fansi_1.0.4.tgz' [error code 28]
# Error: failed to retrieve package 'dplyr@1.1.2'
# In addition: Warning messages:
# 1: curl: (28) Failed to connect to mran.microsoft.com port 443 after 20006 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20004 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20004 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20003 ms: Timeout was reached
# 2: curl: (28) Failed to connect to mran.microsoft.com port 443 after 20006 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20001 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20004 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20002 ms: Timeout was reached
# 3: failed to retrieve 'https://mran.microsoft.com/snapshot/2023-09-03/bin/macosx/big-sur-arm64/contrib/4.3/dplyr_1.1.2.tgz' [error code 28]
# 4: curl: (28) Failed to connect to mran.microsoft.com port 443 after 20005 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20003 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20006 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20006 ms: Timeout was reached
# 5: curl: (28) Failed to connect to mran.microsoft.com port 443 after 20005 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20005 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20004 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20003 ms: Timeout was reached
# Traceback (most recent calls last):
# 8: renv::restore(lockfile = "renv.lock")
# 7: renv_restore_run_actions(project, diff, current, lockfile, rebuild)
# 6: retrieve(packages)
# 5: handler(package, renv_retrieve_impl(package))
# 4: renv_retrieve_impl(package)
# 3: renv_retrieve_repos(record)
# 2: stopf("failed to retrieve package '%s'", renv_record_format_remote(record))
# 1: stop(sprintf(fmt, ...), call. = call.)
# Execution halted
# publisher: error: expected "<guid>"
# bats warning: Executed 1 instead of expected 5 tests
error: Recipe `run` failed with exit code 1
Error occurred with content: quarto-website-r-py-separate-files-deps

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for quarto-multidoc-proj-none in 0ms # skip
ok 2 deploy quarto-multidoc-proj-none in 8000ms
ok 3 redeploy quarto-multidoc-proj-none in 7000ms
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 0ms # skip

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for mpg-shinyApp in 0ms # skip
ok 2 deploy mpg-shinyApp in 139000ms
ok 3 redeploy mpg-shinyApp in 8000ms
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 0ms # skip

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
not ok 1 setup_file failed
# (from function `setup_file' in test file contract/deploy.bats, line 19)
#   `R -e 'renv::restore(lockfile="renv.lock")' && \' failed
#
# R version 4.3.1 (2023-06-16) -- "Beagle Scouts"
# Copyright (C) 2023 The R Foundation for Statistical Computing
# Platform: aarch64-apple-darwin20 (64-bit)
#
# R is free software and comes with ABSOLUTELY NO WARRANTY.
# You are welcome to redistribute it under certain conditions.
# Type 'license()' or 'licence()' for distribution details.
#
#   Natural language support but running in an English locale
#
# R is a collaborative project with many contributors.
# Type 'contributors()' for more information and
# 'citation()' on how to cite R or R packages in publications.
#
# Type 'demo()' for some demos, 'help()' for on-line help, or
# 'help.start()' for an HTML browser interface to help.
# Type 'q()' to quit R.
#
# # Bootstrapping renv 0.15.2 --------------------------------------------------
# * Downloading renv 0.15.2 ... OK
# * Installing renv 0.15.2 ... Done!
# * Successfully installed and loaded renv 0.15.2.
# * Project '~/work/publishing-client/test/content/bundles/quarto-website-r-deps' loaded. [renv 0.15.2]
# > renv::restore(lockfile="renv.lock")
# The following package(s) will be updated:
#
# # CRAN ===============================
# - Rcpp          [1.0.12 -> 1.0.10]
# - askpass       [1.2.0 -> 1.1]
# - bslib         [0.5.1 -> 0.4.2]
# - cli           [3.6.2 -> 3.6.1]
# - cpp11         [0.4.6 -> 0.4.3]
# - curl          [repo: RSPM -> CRAN; ver: 5.2.1 -> 5.0.0]
# - digest        [0.6.35 -> 0.6.31]
# - dplyr         [1.1.3 -> 1.1.2]
# - evaluate      [repo: RSPM -> CRAN; ver: 0.22 -> 0.21]
# - fansi         [1.0.6 -> 1.0.4]
# - fontawesome   [0.5.2 -> 0.5.1]
# - fs            [1.6.4 -> 1.6.2]
# - glue          [1.7.0 -> 1.6.2]
# - htmltools     [0.5.6 -> 0.5.5]
# - jsonlite      [1.8.8 -> 1.8.4]
# - knitr         [repo: RSPM -> CRAN; ver: 1.44 -> 1.42]
# - lifecycle     [1.0.4 -> 1.0.3]
# - openssl       [2.1.2 -> 2.0.6]
# - packrat       [0.9.2 -> 0.9.1]
# - processx      [3.8.3 -> 3.8.1]
# - ps            [1.7.6 -> 1.7.5]
# - purrr         [1.0.2 -> 1.0.1]
# - rlang         [1.1.3 -> 1.1.1]
# - rmarkdown     [repo: RSPM -> CRAN; ver: 2.25 -> 2.21]
# - rsconnect     [1.2.2 -> 0.8.29]
# - rstudioapi    [0.15.0 -> 0.14]
# - sass          [0.4.7 -> 0.4.6]
# - sys           [3.4.2 -> 3.4.1]
# - tinytex       [repo: RSPM -> CRAN; ver: 0.47 -> 0.45]
# - utf8          [1.2.4 -> 1.2.3]
# - vctrs         [0.6.5 -> 0.6.2]
# - withr         [3.0.0 -> 2.5.0]
# - xfun          [repo: RSPM -> CRAN; ver: 0.40 -> 0.39]
# - yaml          [2.3.8 -> 2.3.7]
# - furrr         [* -> 0.3.1]
# - future        [* -> 1.32.0]
# - globals       [* -> 0.16.2]
# - listenv       [* -> 0.9.0]
# - parallelly    [* -> 1.35.0]
# - quarto        [* -> 1.2]
# - rsample       [* -> 1.1.1]
# - slider        [* -> 0.3.0]
# - warp          [* -> 0.2.0]
#
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/bslib/bslib_0.4.2.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/sass/sass_0.4.6.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/fs/fs_1.6.2.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/cpp11/cpp11_0.4.3.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/curl/curl_5.0.0.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://mran.microsoft.com/snapshot/2023-09-03/bin/macosx/big-sur-arm64/contrib/4.3/dplyr_1.1.2.tgz' ...
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/dplyr/dplyr_1.1.2.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://mran.microsoft.com/snapshot/2023-10-08/bin/macosx/big-sur-arm64/contrib/4.3/fansi_1.0.4.tgz' ...
# Warning: failed to find binary for 'dplyr 1.1.2' in package repositories
# Warning: failed to retrieve 'https://mran.microsoft.com/snapshot/2023-09-03/bin/macosx/big-sur-arm64/contrib/4.3/dplyr_1.1.2.tgz' [error code 28]
# Warning: failed to find source for 'dplyr 1.1.2' in package repositories
# Warning: failed to find binary for 'fansi 1.0.4' in package repositories
# Warning: failed to retrieve 'https://mran.microsoft.com/snapshot/2023-10-08/bin/macosx/big-sur-arm64/contrib/4.3/fansi_1.0.4.tgz' [error code 28]
# Error: failed to retrieve package 'dplyr@1.1.2'
# In addition: Warning messages:
# 1: curl: (28) Failed to connect to mran.microsoft.com port 443 after 20006 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20006 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20006 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20002 ms: Timeout was reached
# 2: curl: (28) Failed to connect to mran.microsoft.com port 443 after 20004 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20005 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20006 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20004 ms: Timeout was reached
# 3: failed to retrieve 'https://mran.microsoft.com/snapshot/2023-09-03/bin/macosx/big-sur-arm64/contrib/4.3/dplyr_1.1.2.tgz' [error code 28]
# 4: curl: (28) Failed to connect to mran.microsoft.com port 443 after 20006 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20006 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20006 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20004 ms: Timeout was reached
# 5: curl: (28) Failed to connect to mran.microsoft.com port 443 after 20004 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20006 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20003 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20004 ms: Timeout was reached
# Traceback (most recent calls last):
# 8: renv::restore(lockfile = "renv.lock")
# 7: renv_restore_run_actions(project, diff, current, lockfile, rebuild)
# 6: retrieve(packages)
# 5: handler(package, renv_retrieve_impl(package))
# 4: renv_retrieve_impl(package)
# 3: renv_retrieve_repos(record)
# 2: stopf("failed to retrieve package '%s'", renv_record_format_remote(record))
# 1: stop(sprintf(fmt, ...), call. = call.)
# Execution halted
# publisher: error: expected "<guid>"
# bats warning: Executed 1 instead of expected 5 tests
error: Recipe `run` failed with exit code 1
Error occurred with content: quarto-website-r-deps

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for portfolio-report in 0ms # skip
not ok 2 deploy portfolio-report in 194000ms
# (from function `assert_output' in file contract/../node_modules/bats-assert/src/assert.bash, line 231,
#  from function `deploy_assertion' in file contract/deploy.bats, line 38,
#  in test file contract/deploy.bats, line 117)
#   `deploy_assertion' failed
#
# -- output does not contain substring --
# substring : "app_mode":"rmd"
# output    : {"guid":"d75bf9f3-f06a-425c-867f-4f3cb1efb31f","name":"","title":"Portfolio Report","description":"portfolio-report description","access_type":"acl","connection_timeout":25,"read_timeout":30,"init_timeout":35,"idle_timeout":40,"max_processes":2,"min_processes":1,"max_conns_per_process":5,"load_factor":0.8,"memory_request":null,"memory_limit":null,"cpu_request":null,"cpu_limit":null,"amd_gpu_limit":null,"nvidia_gpu_limit":null,"service_account_name":null,"default_image_name":null,"created_time":"2024-05-13T14:53:53Z","last_deployed_time":"2024-05-13T14:53:54Z","bundle_id":"134","app_mode":"rmd-static","content_category":"","parameterized":true,"cluster_name":"Local","image_name":null,"r_version":"4.1.2","py_version":null,"quarto_version":null,"r_environment_management":true,"default_r_environment_management":null,"py_environment_management":null,"default_py_environment_management":null,"run_as":null,"run_as_current_user":false,"owner_guid":"cf934fb7-8624-436b-b635-47cf894909ac","content_url":"http://52.90.67.68:3939/content/d75bf9f3-f06a-425c-867f-4f3cb1efb31f/","dashboard_url":"http://52.90.67.68:3939/connect/#/apps/d75bf9f3-f06a-425c-867f-4f3cb1efb31f","app_role":"owner","id":"84"}
# --
#
not ok 3 redeploy portfolio-report in 16000ms
# (from function `assert_output' in file contract/../node_modules/bats-assert/src/assert.bash, line 231,
#  from function `deploy_assertion' in file contract/deploy.bats, line 38,
#  in test file contract/deploy.bats, line 124)
#   `deploy_assertion' failed
#
# -- output does not contain substring --
# substring : "app_mode":"rmd"
# output    : {"guid":"d75bf9f3-f06a-425c-867f-4f3cb1efb31f","name":"","title":"Portfolio Report","description":"portfolio-report description","access_type":"acl","connection_timeout":25,"read_timeout":30,"init_timeout":35,"idle_timeout":40,"max_processes":2,"min_processes":1,"max_conns_per_process":5,"load_factor":0.8,"memory_request":null,"memory_limit":null,"cpu_request":null,"cpu_limit":null,"amd_gpu_limit":null,"nvidia_gpu_limit":null,"service_account_name":null,"default_image_name":null,"created_time":"2024-05-13T14:53:53Z","last_deployed_time":"2024-05-13T14:57:07Z","bundle_id":"135","app_mode":"rmd-static","content_category":"","parameterized":true,"cluster_name":"Local","image_name":null,"r_version":"4.1.2","py_version":null,"quarto_version":null,"r_environment_management":true,"default_r_environment_management":null,"py_environment_management":null,"default_py_environment_management":null,"run_as":null,"run_as_current_user":false,"owner_guid":"cf934fb7-8624-436b-b635-47cf894909ac","content_url":"http://52.90.67.68:3939/content/d75bf9f3-f06a-425c-867f-4f3cb1efb31f/","dashboard_url":"http://52.90.67.68:3939/connect/#/apps/d75bf9f3-f06a-425c-867f-4f3cb1efb31f","app_role":"owner","id":"84"}
# --
#
not ok 4 check for toml file in 4000ms
# (from function `assert_output' in file contract/../node_modules/bats-assert/src/assert.bash, line 231,
#  in test file contract/deploy.bats, line 130)
#   `assert_output --partial "entrypoint = '${ENTRYPOINT}'"' failed
#
# -- output does not contain substring --
# substring (1 lines):
#   entrypoint = 'portfolio-report-email.Rmd'
# output (799 lines):
#   # This file is automatically generated by Posit Publisher; do not edit.
#   '$schema' = 'https://cdn.posit.co/publisher/schemas/posit-publishing-record-schema-v3.json'
#   server_type = 'connect'
#   server_url = 'http://52.90.67.68:3939'
#   client_version = '1.0.alpha6-106-gcb3e141e'
#   created_at = '2024-05-13T10:53:48-04:00'
#   configuration_name = 'portfolio-report'
#   id = 'd75bf9f3-f06a-425c-867f-4f3cb1efb31f'
#   deployed_at = '2024-05-13T10:57:07-04:00'
#   bundle_id = '135'
#   bundle_url = 'http://52.90.67.68:3939/__api__/v1/content/d75bf9f3-f06a-425c-867f-4f3cb1efb31f/bundles/135/download'
#   dashboard_url = 'http://52.90.67.68:3939/connect/#/apps/d75bf9f3-f06a-425c-867f-4f3cb1efb31f'
#   direct_url = 'http://52.90.67.68:3939/content/d75bf9f3-f06a-425c-867f-4f3cb1efb31f'
#   files = [
#     '.Rprofile',
#     '.posit/publish/default.toml',
#     '.posit/publish/deployments/ci_deploy.toml',
#     '.posit/publish/portfolio-report.toml',
#     'README.md',
#     'balanced_portfolio_returns2021-03-01.xlsx',
#     'balanced_portfolio_returns2023-05-19.xlsx',
#     'meta.yaml',
#     'portfolio-report-email.Rmd',
#     'portfolio-report.Rmd',
#     'portfolio-report.Rproj',
#     'portfolio-report.html',
#     'portfolio-report_email.html',
#     'renv.lock',
#     'renv/.gitignore',
#     'renv/activate.R',
#     'renv/settings.json',
#     'returns.rds',
#     'test/.publisher-env',
#     'thumbnail.jpg'
#   ]
#
#   [configuration]
#   '$schema' = 'https://cdn.posit.co/publisher/schemas/posit-publishing-schema-v3.json'
#   type = 'rmd'
#   entrypoint = 'portfolio-report.Rmd'
#   validate = true
#   has_parameters = true
#   files = ['*']
#   title = 'Portfolio Report'
#   description = 'portfolio-report description'
#
#   [configuration.r]
#   version = '4.3.1'
#   package_file = 'renv.lock'
#   package_manager = 'renv'
#
#   [configuration.connect]
#   [configuration.connect.runtime]
#   connection_timeout = 25
#   read_timeout = 30
#   init_timeout = 35
#   idle_timeout = 40
#   max_processes = 2
#   min_processes = 1
#   max_conns_per_process = 5
#   load_factor = 0.8
#
#   [renv]
#   [renv.r]
#   version = '4.3.1'
#
#   [[renv.r.repositories]]
#   name = 'CRAN'
#   url = 'https://packagemanager.posit.co/cran/latest'
#
#   [renv.packages]
#   [renv.packages.MASS]
#   package = 'MASS'
#   version = '7.3-60'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'grDevices', 'graphics', 'methods', 'stats', 'utils']
#   hash = 'a56a6365b3fa73293ea8d084be0d9bb0'
#
#   [renv.packages.Matrix]
#   package = 'Matrix'
#   version = '1.5-4.1'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'graphics', 'grid', 'lattice', 'methods', 'stats', 'utils']
#   hash = '38082d362d317745fb932e13956dccbb'
#
#   [renv.packages.PerformanceAnalytics]
#   package = 'PerformanceAnalytics'
#   version = '2.0.4'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'methods', 'quadprog', 'xts', 'zoo']
#   hash = '5ff15925d7e369565203053934e8d9d9'
#
#   [renv.packages.R6]
#   package = 'R6'
#   version = '2.5.1'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R']
#   hash = '470851b6d5d0ac559e9d01bb352b4021'
#
#   [renv.packages.RColorBrewer]
#   package = 'RColorBrewer'
#   version = '1.1-3'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R']
#   hash = '45f0398006e83a5b10b72a90663d8d8c'
#
#   [renv.packages.Rcpp]
#   package = 'Rcpp'
#   version = '1.0.12'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['methods', 'utils']
#   hash = '5ea2700d21e038ace58269ecdbeb9ec0'
#
#   [renv.packages.askpass]
#   package = 'askpass'
#   version = '1.2.0'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['sys']
#   hash = 'cad6cf7f1d5f6e906700b9d3e718c796'
#
#   [renv.packages.base64enc]
#   package = 'base64enc'
#   version = '0.1-3'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R']
#   hash = '543776ae6848fde2f48ff3816d0628bc'
#
#   [renv.packages.blastula]
#   package = 'blastula'
#   version = '0.3.4'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'base64enc', 'commonmark', 'curl', 'digest', 'dplyr', 'fs', 'getPass', 'here', 'htmltools', 'httr', 'jsonlite', 'magrittr', 'mime', 'rlang', 'rmarkdown', 'stringr', 'uuid']
#   hash = '2ac6a5fdfb9e49fa746cb4c0342ba14c'
#
#   [renv.packages.bslib]
#   package = 'bslib'
#   version = '0.5.1'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'base64enc', 'cachem', 'grDevices', 'htmltools', 'jquerylib', 'jsonlite', 'memoise', 'mime', 'rlang', 'sass']
#   hash = '283015ddfbb9d7bf15ea9f0b5698f0d9'
#
#   [renv.packages.cachem]
#   package = 'cachem'
#   version = '1.0.8'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['fastmap', 'rlang']
#   hash = 'c35768291560ce302c0a6589f92e837d'
#
#   [renv.packages.cli]
#   package = 'cli'
#   version = '3.6.2'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'utils']
#   hash = '1216ac65ac55ec0058a6f75d7ca0fd52'
#
#   [renv.packages.colorspace]
#   package = 'colorspace'
#   version = '2.1-0'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'grDevices', 'graphics', 'methods', 'stats']
#   hash = 'f20c47fd52fae58b4e377c37bb8c335b'
#
#   [renv.packages.commonmark]
#   package = 'commonmark'
#   version = '1.9.0'
#   source = 'Repository'
#   repository = 'CRAN'
#   hash = 'd691c61bff84bd63c383874d2d0c3307'
#
#   [renv.packages.cpp11]
#   package = 'cpp11'
#   version = '0.4.6'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R']
#   hash = '707fae4bbf73697ec8d85f9d7076c061'
#
#   [renv.packages.crayon]
#   package = 'crayon'
#   version = '1.5.2'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['grDevices', 'methods', 'utils']
#   hash = 'e8a1e41acf02548751f45c718d55aa6a'
#
#   [renv.packages.crosstalk]
#   package = 'crosstalk'
#   version = '1.2.0'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R6', 'htmltools', 'jsonlite', 'lazyeval']
#   hash = '6aa54f69598c32177e920eb3402e8293'
#
#   [renv.packages.curl]
#   package = 'curl'
#   version = '5.2.1'
#   source = 'Repository'
#   repository = 'RSPM'
#   requirements = ['R']
#   hash = '411ca2c03b1ce5f548345d2fc2685f7a'
#
#   [renv.packages.'data.table']
#   package = 'data.table'
#   version = '1.14.8'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'methods']
#   hash = 'b4c06e554f33344e044ccd7fdca750a9'
#
#   [renv.packages.digest]
#   package = 'digest'
#   version = '0.6.35'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'utils']
#   hash = '698ece7ba5a4fa4559e3d537e7ec3d31'
#
#   [renv.packages.dplyr]
#   package = 'dplyr'
#   version = '1.1.3'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'R6', 'cli', 'generics', 'glue', 'lifecycle', 'magrittr', 'methods', 'pillar', 'rlang', 'tibble', 'tidyselect', 'utils', 'vctrs']
#   hash = 'e85ffbebaad5f70e1a2e2ef4302b4949'
#
#   [renv.packages.ellipsis]
#   package = 'ellipsis'
#   version = '0.3.2'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'rlang']
#   hash = 'bb0eec2fe32e88d9e2836c2f73ea2077'
#
#   [renv.packages.evaluate]
#   package = 'evaluate'
#   version = '0.22'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'methods']
#   hash = '66f39c7a21e03c4dcb2c2d21d738d603'
#
#   [renv.packages.fansi]
#   package = 'fansi'
#   version = '1.0.6'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'grDevices', 'utils']
#   hash = '962174cf2aeb5b9eea581522286a911f'
#
#   [renv.packages.farver]
#   package = 'farver'
#   version = '2.1.1'
#   source = 'Repository'
#   repository = 'CRAN'
#   hash = '8106d78941f34855c440ddb946b8f7a5'
#
#   [renv.packages.fastmap]
#   package = 'fastmap'
#   version = '1.1.1'
#   source = 'Repository'
#   repository = 'CRAN'
#   hash = 'f7736a18de97dea803bde0a2daaafb27'
#
#   [renv.packages.flexdashboard]
#   package = 'flexdashboard'
#   version = '0.6.2'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'bslib', 'grDevices', 'htmltools', 'htmlwidgets', 'jsonlite', 'knitr', 'rmarkdown', 'sass', 'scales', 'shiny', 'tools', 'utils']
#   hash = 'c3c5a921ab91cb02845cb287efa7fcff'
#
#   [renv.packages.fontawesome]
#   package = 'fontawesome'
#   version = '0.5.2'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'htmltools', 'rlang']
#   hash = 'c2efdd5f0bcd1ea861c2d4e2a883a67d'
#
#   [renv.packages.formattable]
#   package = 'formattable'
#   version = '0.2.1'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'htmltools', 'htmlwidgets', 'knitr', 'methods', 'rmarkdown']
#   hash = '870d6d5d39b23923d0c816f904075b4c'
#
#   [renv.packages.fs]
#   package = 'fs'
#   version = '1.6.4'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'methods']
#   hash = '15aeb8c27f5ea5161f9f6a641fafd93a'
#
#   [renv.packages.generics]
#   package = 'generics'
#   version = '0.1.3'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'methods']
#   hash = '15e9634c0fcd294799e9b2e929ed1b86'
#
#   [renv.packages.getPass]
#   package = 'getPass'
#   version = '0.2-4'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'rstudioapi', 'utils']
#   hash = '281e56bcab06202f51be7b50254f2fce'
#
#   [renv.packages.ggplot2]
#   package = 'ggplot2'
#   version = '3.4.4'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['MASS', 'R', 'cli', 'glue', 'grDevices', 'grid', 'gtable', 'isoband', 'lifecycle', 'mgcv', 'rlang', 'scales', 'stats', 'tibble', 'vctrs', 'withr']
#   hash = '313d31eff2274ecf4c1d3581db7241f9'
#
#   [renv.packages.glue]
#   package = 'glue'
#   version = '1.7.0'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'methods']
#   hash = 'e0b3a53876554bd45879e596cdb10a52'
#
#   [renv.packages.gtable]
#   package = 'gtable'
#   version = '0.3.4'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'cli', 'glue', 'grid', 'lifecycle', 'rlang']
#   hash = 'b29cf3031f49b04ab9c852c912547eef'
#
#   [renv.packages.here]
#   package = 'here'
#   version = '1.0.1'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['rprojroot']
#   hash = '24b224366f9c2e7534d2344d10d59211'
#
#   [renv.packages.highr]
#   package = 'highr'
#   version = '0.10'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'xfun']
#   hash = '06230136b2d2b9ba5805e1963fa6e890'
#
#   [renv.packages.htmltools]
#   package = 'htmltools'
#   version = '0.5.6'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'base64enc', 'digest', 'ellipsis', 'fastmap', 'grDevices', 'rlang', 'utils']
#   hash = 'a2326a66919a3311f7fbb1e3bf568283'
#
#   [renv.packages.htmlwidgets]
#   package = 'htmlwidgets'
#   version = '1.6.2'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['grDevices', 'htmltools', 'jsonlite', 'knitr', 'rmarkdown', 'yaml']
#   hash = 'a865aa85bcb2697f47505bfd70422471'
#
#   [renv.packages.httpuv]
#   package = 'httpuv'
#   version = '1.6.11'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'R6', 'Rcpp', 'later', 'promises', 'utils']
#   hash = '838602f54e32c1a0f8cc80708cefcefa'
#
#   [renv.packages.httr]
#   package = 'httr'
#   version = '1.4.7'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'R6', 'curl', 'jsonlite', 'mime', 'openssl']
#   hash = 'ac107251d9d9fd72f0ca8049988f1d7f'
#
#   [renv.packages.isoband]
#   package = 'isoband'
#   version = '0.2.7'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['grid', 'utils']
#   hash = '0080607b4a1a7b28979aecef976d8bc2'
#
#   [renv.packages.jquerylib]
#   package = 'jquerylib'
#   version = '0.1.4'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['htmltools']
#   hash = '5aab57a3bd297eee1c1d862735972182'
#
#   [renv.packages.jsonlite]
#   package = 'jsonlite'
#   version = '1.8.8'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['methods']
#   hash = 'e1b9c55281c5adc4dd113652d9e26768'
#
#   [renv.packages.knitr]
#   package = 'knitr'
#   version = '1.44'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'evaluate', 'highr', 'methods', 'tools', 'xfun', 'yaml']
#   hash = '60885b9f746c9dfaef110d070b5f7dc0'
#
#   [renv.packages.labeling]
#   package = 'labeling'
#   version = '0.4.3'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['graphics', 'stats']
#   hash = 'b64ec208ac5bc1852b285f665d6368b3'
#
#   [renv.packages.later]
#   package = 'later'
#   version = '1.3.1'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['Rcpp', 'rlang']
#   hash = '40401c9cf2bc2259dfe83311c9384710'
#
#   [renv.packages.lattice]
#   package = 'lattice'
#   version = '0.21-8'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'grDevices', 'graphics', 'grid', 'stats', 'utils']
#   hash = '0b8a6d63c8770f02a8b5635f3c431e6b'
#
#   [renv.packages.lazyeval]
#   package = 'lazyeval'
#   version = '0.2.2'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R']
#   hash = 'd908914ae53b04d4c0c0fd72ecc35370'
#
#   [renv.packages.lifecycle]
#   package = 'lifecycle'
#   version = '1.0.4'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'cli', 'glue', 'rlang']
#   hash = 'b8552d117e1b808b09a832f589b79035'
#
#   [renv.packages.magrittr]
#   package = 'magrittr'
#   version = '2.0.3'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R']
#   hash = '7ce2733a9826b3aeb1775d56fd305472'
#
#   [renv.packages.memoise]
#   package = 'memoise'
#   version = '2.0.1'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['cachem', 'rlang']
#   hash = 'e2817ccf4a065c5d9d7f2cfbe7c1d78c'
#
#   [renv.packages.mgcv]
#   package = 'mgcv'
#   version = '1.8-42'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['Matrix', 'R', 'graphics', 'methods', 'nlme', 'splines', 'stats', 'utils']
#   hash = '3460beba7ccc8946249ba35327ba902a'
#
#   [renv.packages.mime]
#   package = 'mime'
#   version = '0.12'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['tools']
#   hash = '18e9c28c1d3ca1560ce30658b22ce104'
#
#   [renv.packages.munsell]
#   package = 'munsell'
#   version = '0.5.0'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['colorspace', 'methods']
#   hash = '6dfe8bf774944bd5595785e3229d8771'
#
#   [renv.packages.nlme]
#   package = 'nlme'
#   version = '3.1-162'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'graphics', 'lattice', 'stats', 'utils']
#   hash = '0984ce8da8da9ead8643c5cbbb60f83e'
#
#   [renv.packages.openssl]
#   package = 'openssl'
#   version = '2.1.2'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['askpass']
#   hash = 'ea2475b073243d9d338aa8f086ce973e'
#
#   [renv.packages.openxlsx]
#   package = 'openxlsx'
#   version = '4.2.5.2'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'Rcpp', 'grDevices', 'methods', 'stats', 'stringi', 'utils', 'zip']
#   hash = 'c03b4c18d42da881fb8e15a085c2b9d6'
#
#   [renv.packages.pillar]
#   package = 'pillar'
#   version = '1.9.0'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['cli', 'fansi', 'glue', 'lifecycle', 'rlang', 'utf8', 'utils', 'vctrs']
#   hash = '15da5a8412f317beeee6175fbc76f4bb'
#
#   [renv.packages.pkgconfig]
#   package = 'pkgconfig'
#   version = '2.0.3'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['utils']
#   hash = '01f28d4278f15c76cddbea05899c5d6f'
#
#   [renv.packages.plotly]
#   package = 'plotly'
#   version = '4.10.3'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'RColorBrewer', 'base64enc', 'crosstalk', 'data.table', 'digest', 'dplyr', 'ggplot2', 'htmltools', 'htmlwidgets', 'httr', 'jsonlite', 'lazyeval', 'magrittr', 'promises', 'purrr', 'rlang', 'scales', 'tibble', 'tidyr', 'tools', 'vctrs', 'viridisLite']
#   hash = '56914cc61df53f2d0283d5498680867e'
#
#   [renv.packages.promises]
#   package = 'promises'
#   version = '1.2.1'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R6', 'Rcpp', 'fastmap', 'later', 'magrittr', 'rlang', 'stats']
#   hash = '0d8a15c9d000970ada1ab21405387dee'
#
#   [renv.packages.purrr]
#   package = 'purrr'
#   version = '1.0.2'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'cli', 'lifecycle', 'magrittr', 'rlang', 'vctrs']
#   hash = '1cba04a4e9414bdefc9dcaa99649a8dc'
#
#   [renv.packages.quadprog]
#   package = 'quadprog'
#   version = '1.5-8'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R']
#   hash = '5f919ae5e7f83a6f91dcf2288943370d'
#
#   [renv.packages.rappdirs]
#   package = 'rappdirs'
#   version = '0.3.3'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R']
#   hash = '5e3c5dc0b071b21fa128676560dbe94d'
#
#   [renv.packages.renv]
#   package = 'renv'
#   version = '1.0.7'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['utils']
#   hash = '397b7b2a265bc5a7a06852524dabae20'
#
#   [renv.packages.rlang]
#   package = 'rlang'
#   version = '1.1.3'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'utils']
#   hash = '42548638fae05fd9a9b5f3f437fbbbe2'
#
#   [renv.packages.rmarkdown]
#   package = 'rmarkdown'
#   version = '2.25'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'bslib', 'evaluate', 'fontawesome', 'htmltools', 'jquerylib', 'jsonlite', 'knitr', 'methods', 'stringr', 'tinytex', 'tools', 'utils', 'xfun', 'yaml']
#   hash = 'd65e35823c817f09f4de424fcdfa812a'
#
#   [renv.packages.rprojroot]
#   package = 'rprojroot'
#   version = '2.0.4'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R']
#   hash = '4c8415e0ec1e29f3f4f6fc108bef0144'
#
#   [renv.packages.rstudioapi]
#   package = 'rstudioapi'
#   version = '0.15.0'
#   source = 'Repository'
#   repository = 'CRAN'
#   hash = '5564500e25cffad9e22244ced1379887'
#
#   [renv.packages.sass]
#   package = 'sass'
#   version = '0.4.7'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R6', 'fs', 'htmltools', 'rappdirs', 'rlang']
#   hash = '6bd4d33b50ff927191ec9acbf52fd056'
#
#   [renv.packages.scales]
#   package = 'scales'
#   version = '1.3.0'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'R6', 'RColorBrewer', 'cli', 'farver', 'glue', 'labeling', 'lifecycle', 'munsell', 'rlang', 'viridisLite']
#   hash = 'c19df082ba346b0ffa6f833e92de34d1'
#
#   [renv.packages.shiny]
#   package = 'shiny'
#   version = '1.7.5'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'R6', 'bslib', 'cachem', 'commonmark', 'crayon', 'ellipsis', 'fastmap', 'fontawesome', 'glue', 'grDevices', 'htmltools', 'httpuv', 'jsonlite', 'later', 'lifecycle', 'methods', 'mime', 'promises', 'rlang', 'sourcetools', 'tools', 'utils', 'withr', 'xtable']
#   hash = '438b99792adbe82a8329ad8697d45afe'
#
#   [renv.packages.sourcetools]
#   package = 'sourcetools'
#   version = '0.1.7-1'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R']
#   hash = '5f5a7629f956619d519205ec475fe647'
#
#   [renv.packages.stringi]
#   package = 'stringi'
#   version = '1.7.12'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'stats', 'tools', 'utils']
#   hash = 'ca8bd84263c77310739d2cf64d84d7c9'
#
#   [renv.packages.stringr]
#   package = 'stringr'
#   version = '1.5.0'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'cli', 'glue', 'lifecycle', 'magrittr', 'rlang', 'stringi', 'vctrs']
#   hash = '671a4d384ae9d32fc47a14e98bfa3dc8'
#
#   [renv.packages.sys]
#   package = 'sys'
#   version = '3.4.2'
#   source = 'Repository'
#   repository = 'CRAN'
#   hash = '3a1be13d68d47a8cd0bfd74739ca1555'
#
#   [renv.packages.tibble]
#   package = 'tibble'
#   version = '3.2.1'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'fansi', 'lifecycle', 'magrittr', 'methods', 'pillar', 'pkgconfig', 'rlang', 'utils', 'vctrs']
#   hash = 'a84e2cc86d07289b3b6f5069df7a004c'
#
#   [renv.packages.tidyr]
#   package = 'tidyr'
#   version = '1.3.0'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'cli', 'cpp11', 'dplyr', 'glue', 'lifecycle', 'magrittr', 'purrr', 'rlang', 'stringr', 'tibble', 'tidyselect', 'utils', 'vctrs']
#   hash = 'e47debdc7ce599b070c8e78e8ac0cfcf'
#
#   [renv.packages.tidyselect]
#   package = 'tidyselect'
#   version = '1.2.0'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'cli', 'glue', 'lifecycle', 'rlang', 'vctrs', 'withr']
#   hash = '79540e5fcd9e0435af547d885f184fd5'
#
#   [renv.packages.tinytex]
#   package = 'tinytex'
#   version = '0.47'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['xfun']
#   hash = '8d4ccb733843e513c1c1cdd66a759f0d'
#
#   [renv.packages.utf8]
#   package = 'utf8'
#   version = '1.2.4'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R']
#   hash = '62b65c52671e6665f803ff02954446e9'
#
#   [renv.packages.uuid]
#   package = 'uuid'
#   version = '1.1-1'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R']
#   hash = '3d78edfb977a69fc7a0341bee25e163f'
#
#   [renv.packages.vctrs]
#   package = 'vctrs'
#   version = '0.6.5'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'cli', 'glue', 'lifecycle', 'rlang']
#   hash = 'c03fa420630029418f7e6da3667aac4a'
#
#   [renv.packages.viridisLite]
#   package = 'viridisLite'
#   version = '0.4.2'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R']
#   hash = 'c826c7c4241b6fc89ff55aaea3fa7491'
#
#   [renv.packages.withr]
#   package = 'withr'
#   version = '3.0.0'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'grDevices', 'graphics']
#   hash = 'd31b6c62c10dcf11ec530ca6b0dd5d35'
#
#   [renv.packages.xfun]
#   package = 'xfun'
#   version = '0.40'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['stats', 'tools']
#   hash = 'be07d23211245fc7d4209f54c4e4ffc8'
#
#   [renv.packages.xtable]
#   package = 'xtable'
#   version = '1.8-4'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'stats', 'utils']
#   hash = 'b8acdf8af494d9ec19ccb2481a9b11c2'
#
#   [renv.packages.xts]
#   package = 'xts'
#   version = '0.13.1'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'methods', 'zoo']
#   hash = 'b8aa1235fd8b0ff10756150b792dc60f'
#
#   [renv.packages.yaml]
#   package = 'yaml'
#   version = '2.3.8'
#   source = 'Repository'
#   repository = 'CRAN'
#   hash = '29240487a071f535f5e5d5a323b7afbd'
#
#   [renv.packages.zip]
#   package = 'zip'
#   version = '2.3.0'
#   source = 'Repository'
#   repository = 'CRAN'
#   hash = 'd98c94dacb7e0efcf83b0a133a705504'
#
#   [renv.packages.zoo]
#   package = 'zoo'
#   version = '1.8-12'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'grDevices', 'graphics', 'lattice', 'stats', 'utils']
#   hash = '5c715954112b45499fb1dadc6ee6ee3e'
# --
#
ok 5 deploy no requirements file in 0ms # skip
error: Recipe `run` failed with exit code 1
Error occurred with content: portfolio-report

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for quarto-proj-none-ojs in 0ms # skip
ok 2 deploy quarto-proj-none-ojs in 8000ms
ok 3 redeploy quarto-proj-none-ojs in 7000ms
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 0ms # skip

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for python-pycnic-py3 in 3000ms
ok 2 deploy python-pycnic-py3 in 15000ms
ok 3 redeploy python-pycnic-py3 in 6000ms
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 0ms

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for plotly-shiny-matrix-input in 0ms # skip
not ok 2 deploy plotly-shiny-matrix-input in 12000ms
# (from function `assert_success' in file contract/../node_modules/bats-assert/src/assert.bash, line 114,
#  from function `deploy_assertion' in file contract/deploy.bats, line 26,
#  in test file contract/deploy.bats, line 117)
#   `deploy_assertion' failed
#
# -- command failed --
# status : 1
# output (12 lines):
#   Deploy to server http://52.90.67.68:3939 using account bats and configuration plotly-shiny-matrix-input, creating deployment ci_deploy
#   Check Configuration...             [OK]
#   Create New Deployment...           [OK] (contentId="f0eaffa1-e62b-409b-906d-9c20e08f6f93", saveName="ci_deploy")
#   Prepare Files...                   [OK] (filename="/var/folders/qn/0zx6630d3b15_6jcdyl_20dc0000gp/T/bundle-890045770.tar.gz")
#   Upload Files...                    [OK] (bundleId="140")
#   Update Deployment Settings...      [OK]
#   Activate Deployment...             [OK] (taskId="NCEfCbHA9h1ZlsIn")
#   Restore R environment...
#   Dashboard URL:  http://52.90.67.68:3939/connect/#/apps/f0eaffa1-e62b-409b-906d-9c20e08f6f93
#   [ERROR] deployFailed (message="An error occurred while building your content. (Error code: r-missing-system-library)", dashboardUrl="http://52.90.67.68:3939/connect/#/apps/f0eaffa1-e62b-409b-906d-9c20e08f6f93", url="http://52.90.67.68:3939/content/f0eaffa1-e62b-409b-906d-9c20e08f6f93", ConnectErrorCode="r-missing-system-library", DocumentationLink="https://docs.posit.co/connect/user/troubleshooting/#r-missing-system-library")
#
#   An error occurred while building your content. (Error code: r-missing-system-library).
# --
#
not ok 3 redeploy plotly-shiny-matrix-input in 11000ms
# (from function `assert_success' in file contract/../node_modules/bats-assert/src/assert.bash, line 114,
#  from function `deploy_assertion' in file contract/deploy.bats, line 26,
#  in test file contract/deploy.bats, line 124)
#   `deploy_assertion' failed
#
# -- command failed --
# status : 1
# output (11 lines):
#   Redeploy ci_deploy to server http://52.90.67.68:3939 using account bats and configuration plotly-shiny-matrix-input
#   Check Configuration...             [OK]
#   Prepare Files...                   [OK] (filename="/var/folders/qn/0zx6630d3b15_6jcdyl_20dc0000gp/T/bundle-3153253594.tar.gz")
#   Upload Files...                    [OK] (bundleId="141")
#   Update Deployment Settings...      [OK]
#   Activate Deployment...             [OK] (taskId="DdgSTMabNHOQlc0T")
#   Restore R environment...
#   Dashboard URL:  http://52.90.67.68:3939/connect/#/apps/f0eaffa1-e62b-409b-906d-9c20e08f6f93
#   [ERROR] deployFailed (message="An error occurred while building your content. (Error code: r-missing-system-library)", dashboardUrl="http://52.90.67.68:3939/connect/#/apps/f0eaffa1-e62b-409b-906d-9c20e08f6f93", url="http://52.90.67.68:3939/content/f0eaffa1-e62b-409b-906d-9c20e08f6f93", ConnectErrorCode="r-missing-system-library", DocumentationLink="https://docs.posit.co/connect/user/troubleshooting/#r-missing-system-library")
#
#   An error occurred while building your content. (Error code: r-missing-system-library).
# --
#
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 0ms # skip
error: Recipe `run` failed with exit code 1
Error occurred with content: plotly-shiny-matrix-input

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for python-shiny-express in 2000ms
ok 2 deploy python-shiny-express in 18000ms
ok 3 redeploy python-shiny-express in 4000ms
ok 4 check for toml file in 1000ms
ok 5 deploy no requirements file in 0ms

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for top-5-income-share-streamlit in 3000ms
ok 2 deploy top-5-income-share-streamlit in 39000ms
ok 3 redeploy top-5-income-share-streamlit in 5000ms
ok 4 check for toml file in 0ms
not ok 5 deploy no requirements file in 0ms
# (from function `assert_output' in file contract/../node_modules/bats-assert/src/assert.bash, line 231,
#  in test file contract/deploy.bats, line 140)
#   `assert_output --partial "\' failed
#
# -- output does not contain substring --
# substring (4 lines):
#   can't find the package file (requirements.txt) in the project directory.
#   Create the file, listing the packages your project depends on.
#   Or scan your project dependencies using the publisher UI or
#   the 'publisher requirements create' command.
# output (2 lines):
#
#   /Users/kgartland/work/publishing-client/test/content/bundles/top-5-income-share-streamlit/.posit/publish/default.toml:10:1: unknown key 'python.package-file'.
# --
#
error: Recipe `run` failed with exit code 1
Error occurred with content: top-5-income-share-streamlit

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for python-falcon in 2000ms
ok 2 deploy python-falcon in 15000ms
ok 3 redeploy python-falcon in 5000ms
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 1000ms

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for python-bottle in 2000ms
ok 2 deploy python-bottle in 13000ms
ok 3 redeploy python-bottle in 6000ms
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 0ms

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for python-flask-slow in 2000ms
ok 2 deploy python-flask-slow in 13000ms
ok 3 redeploy python-flask-slow in 5000ms
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 1000ms

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for quarto-proj-r-py in 0ms # skip
not ok 2 deploy quarto-proj-r-py in 44000ms
# (from function `assert_success' in file contract/../node_modules/bats-assert/src/assert.bash, line 114,
#  from function `deploy_assertion' in file contract/deploy.bats, line 26,
#  in test file contract/deploy.bats, line 117)
#   `deploy_assertion' failed
#
# -- command failed --
# status : 1
# output (14 lines):
#   Deploy to server http://52.90.67.68:3939 using account bats and configuration quarto-proj-r-py, creating deployment ci_deploy
#   Check Configuration...             [OK]
#   Create New Deployment...           [OK] (contentId="838b1b75-f1ef-4b25-8c99-1d5be7e779f9", saveName="ci_deploy")
#   Prepare Files...                   [OK] (filename="/var/folders/qn/0zx6630d3b15_6jcdyl_20dc0000gp/T/bundle-192585795.tar.gz")
#   Upload Files...                    [OK] (bundleId="152")
#   Update Deployment Settings...      [OK]
#   Activate Deployment...             [OK] (taskId="OKbkIV7zDtx2flbp")
#   Restore R environment...           [OK]
#   Restore Python environment...      [OK]
#   Run Content...
#   Dashboard URL:  http://52.90.67.68:3939/connect/#/apps/838b1b75-f1ef-4b25-8c99-1d5be7e779f9
#   [ERROR] deployFailed (DocumentationLink="https://docs.posit.co/connect/user/troubleshooting/#render-missing-r-package", message="An error occurred while running your content. (Error code: render-missing-r-package)", dashboardUrl="http://52.90.67.68:3939/connect/#/apps/838b1b75-f1ef-4b25-8c99-1d5be7e779f9", url="http://52.90.67.68:3939/content/838b1b75-f1ef-4b25-8c99-1d5be7e779f9", ConnectErrorCode="render-missing-r-package")
#
#   An error occurred while running your content. (Error code: render-missing-r-package).
# --
#
not ok 3 redeploy quarto-proj-r-py in 14000ms
# (from function `assert_success' in file contract/../node_modules/bats-assert/src/assert.bash, line 114,
#  from function `deploy_assertion' in file contract/deploy.bats, line 26,
#  in test file contract/deploy.bats, line 124)
#   `deploy_assertion' failed
#
# -- command failed --
# status : 1
# output (13 lines):
#   Redeploy ci_deploy to server http://52.90.67.68:3939 using account bats and configuration quarto-proj-r-py
#   Check Configuration...             [OK]
#   Prepare Files...                   [OK] (filename="/var/folders/qn/0zx6630d3b15_6jcdyl_20dc0000gp/T/bundle-4041059104.tar.gz")
#   Upload Files...                    [OK] (bundleId="153")
#   Update Deployment Settings...      [OK]
#   Activate Deployment...             [OK] (taskId="EaHpkYQ1938RzSsO")
#   Restore R environment...           [OK]
#   Restore Python environment...      [OK]
#   Run Content...
#   Dashboard URL:  http://52.90.67.68:3939/connect/#/apps/838b1b75-f1ef-4b25-8c99-1d5be7e779f9
#   [ERROR] deployFailed (dashboardUrl="http://52.90.67.68:3939/connect/#/apps/838b1b75-f1ef-4b25-8c99-1d5be7e779f9", url="http://52.90.67.68:3939/content/838b1b75-f1ef-4b25-8c99-1d5be7e779f9", DocumentationLink="https://docs.posit.co/connect/user/troubleshooting/#render-missing-r-package", ConnectErrorCode="render-missing-r-package", message="An error occurred while running your content. (Error code: render-missing-r-package)")
#
#   An error occurred while running your content. (Error code: render-missing-r-package).
# --
#
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 0ms # skip
error: Recipe `run` failed with exit code 1
Error occurred with content: quarto-proj-r-py

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for connectwidgets-example in 0ms # skip
ok 2 deploy connectwidgets-example in 43000ms
ok 3 redeploy connectwidgets-example in 17000ms
not ok 4 check for toml file in 3000ms
# (from function `assert_output' in file contract/../node_modules/bats-assert/src/assert.bash, line 231,
#  in test file contract/deploy.bats, line 131)
#   `assert_output --partial "title = '${TITLE}'"' failed
#
# -- output does not contain substring --
# substring (1 lines):
#   title = 'connectwidgets-example'
# output (478 lines):
#   # This file is automatically generated by Posit Publisher; do not edit.
#   '$schema' = 'https://cdn.posit.co/publisher/schemas/posit-publishing-record-schema-v3.json'
#   server_type = 'connect'
#   server_url = 'http://52.90.67.68:3939'
#   client_version = '1.0.alpha6-106-gcb3e141e'
#   created_at = '2024-05-13T11:02:00-04:00'
#   configuration_name = 'connectwidgets-example'
#   id = 'a6b0bc15-a919-450f-8277-e54307de84fc'
#   deployed_at = '2024-05-13T11:02:47-04:00'
#   bundle_id = '155'
#   bundle_url = 'http://52.90.67.68:3939/__api__/v1/content/a6b0bc15-a919-450f-8277-e54307de84fc/bundles/155/download'
#   dashboard_url = 'http://52.90.67.68:3939/connect/#/apps/a6b0bc15-a919-450f-8277-e54307de84fc'
#   direct_url = 'http://52.90.67.68:3939/content/a6b0bc15-a919-450f-8277-e54307de84fc'
#   files = [
#     '.RData',
#     '.Rprofile',
#     '.posit/publish/connectwidgets-example.toml',
#     '.posit/publish/default.toml',
#     '.posit/publish/deployments/ci_deploy.toml',
#     'README.md',
#     'connectwidgets-example.Rmd',
#     'connectwidgets-example.Rproj',
#     'connectwidgets-example.html',
#     'meta.yaml',
#     'renv.lock',
#     'renv/.gitignore',
#     'renv/activate.R',
#     'renv/settings.json',
#     'test/.publisher-env'
#   ]
#
#   [configuration]
#   '$schema' = 'https://cdn.posit.co/publisher/schemas/posit-publishing-schema-v3.json'
#   type = 'rmd'
#   entrypoint = 'connectwidgets-example.Rmd'
#   validate = true
#   has_parameters = false
#   files = ['*']
#   title = 'Untitled'
#   description = 'connectwidgets-example description'
#
#   [configuration.r]
#   version = '4.3.1'
#   package_file = 'renv.lock'
#   package_manager = 'renv'
#
#   [configuration.connect]
#   [configuration.connect.runtime]
#   connection_timeout = 25
#   read_timeout = 30
#   init_timeout = 35
#   idle_timeout = 40
#   max_processes = 2
#   min_processes = 1
#   max_conns_per_process = 5
#   load_factor = 0.8
#
#   [renv]
#   [renv.r]
#   version = '4.3.1'
#
#   [[renv.r.repositories]]
#   name = 'CRAN'
#   url = 'https://cran.rstudio.com'
#
#   [renv.packages]
#   [renv.packages.R6]
#   package = 'R6'
#   version = '2.5.1'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R']
#   hash = '470851b6d5d0ac559e9d01bb352b4021'
#
#   [renv.packages.askpass]
#   package = 'askpass'
#   version = '1.2.0'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['sys']
#   hash = 'cad6cf7f1d5f6e906700b9d3e718c796'
#
#   [renv.packages.base64enc]
#   package = 'base64enc'
#   version = '0.1-3'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R']
#   hash = '543776ae6848fde2f48ff3816d0628bc'
#
#   [renv.packages.bslib]
#   package = 'bslib'
#   version = '0.5.1'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'base64enc', 'cachem', 'grDevices', 'htmltools', 'jquerylib', 'jsonlite', 'memoise', 'mime', 'rlang', 'sass']
#   hash = '283015ddfbb9d7bf15ea9f0b5698f0d9'
#
#   [renv.packages.cachem]
#   package = 'cachem'
#   version = '1.0.8'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['fastmap', 'rlang']
#   hash = 'c35768291560ce302c0a6589f92e837d'
#
#   [renv.packages.cli]
#   package = 'cli'
#   version = '3.6.1'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'utils']
#   hash = '89e6d8219950eac806ae0c489052048a'
#
#   [renv.packages.connectwidgets]
#   package = 'connectwidgets'
#   version = '0.2.1'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'R6', 'bslib', 'crosstalk', 'digest', 'dplyr', 'glue', 'htmltools', 'htmlwidgets', 'httr', 'jsonlite', 'magrittr', 'purrr', 'reactR', 'reactable', 'rlang', 'sass', 'tibble']
#   hash = '25ca560044c0c9c468c8b4f9dc73396a'
#
#   [renv.packages.crosstalk]
#   package = 'crosstalk'
#   version = '1.2.1'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R6', 'htmltools', 'jsonlite', 'lazyeval']
#   hash = 'ab12c7b080a57475248a30f4db6298c0'
#
#   [renv.packages.curl]
#   package = 'curl'
#   version = '5.2.1'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R']
#   hash = '411ca2c03b1ce5f548345d2fc2685f7a'
#
#   [renv.packages.digest]
#   package = 'digest'
#   version = '0.6.33'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'utils']
#   hash = 'b18a9cf3c003977b0cc49d5e76ebe48d'
#
#   [renv.packages.dplyr]
#   package = 'dplyr'
#   version = '1.1.3'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'R6', 'cli', 'generics', 'glue', 'lifecycle', 'magrittr', 'methods', 'pillar', 'rlang', 'tibble', 'tidyselect', 'utils', 'vctrs']
#   hash = 'e85ffbebaad5f70e1a2e2ef4302b4949'
#
#   [renv.packages.evaluate]
#   package = 'evaluate'
#   version = '0.22'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'methods']
#   hash = '66f39c7a21e03c4dcb2c2d21d738d603'
#
#   [renv.packages.fansi]
#   package = 'fansi'
#   version = '1.0.5'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'grDevices', 'utils']
#   hash = '3e8583a60163b4bc1a80016e63b9959e'
#
#   [renv.packages.fastmap]
#   package = 'fastmap'
#   version = '1.1.1'
#   source = 'Repository'
#   repository = 'CRAN'
#   hash = 'f7736a18de97dea803bde0a2daaafb27'
#
#   [renv.packages.fontawesome]
#   package = 'fontawesome'
#   version = '0.5.2'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'htmltools', 'rlang']
#   hash = 'c2efdd5f0bcd1ea861c2d4e2a883a67d'
#
#   [renv.packages.fs]
#   package = 'fs'
#   version = '1.6.3'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'methods']
#   hash = '47b5f30c720c23999b913a1a635cf0bb'
#
#   [renv.packages.generics]
#   package = 'generics'
#   version = '0.1.3'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'methods']
#   hash = '15e9634c0fcd294799e9b2e929ed1b86'
#
#   [renv.packages.glue]
#   package = 'glue'
#   version = '1.6.2'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'methods']
#   hash = '4f2596dfb05dac67b9dc558e5c6fba2e'
#
#   [renv.packages.highr]
#   package = 'highr'
#   version = '0.10'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'xfun']
#   hash = '06230136b2d2b9ba5805e1963fa6e890'
#
#   [renv.packages.htmltools]
#   package = 'htmltools'
#   version = '0.5.8.1'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'base64enc', 'digest', 'fastmap', 'grDevices', 'rlang', 'utils']
#   hash = '81d371a9cc60640e74e4ab6ac46dcedc'
#
#   [renv.packages.htmlwidgets]
#   package = 'htmlwidgets'
#   version = '1.6.4'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['grDevices', 'htmltools', 'jsonlite', 'knitr', 'rmarkdown', 'yaml']
#   hash = '04291cc45198225444a397606810ac37'
#
#   [renv.packages.httr]
#   package = 'httr'
#   version = '1.4.7'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'R6', 'curl', 'jsonlite', 'mime', 'openssl']
#   hash = 'ac107251d9d9fd72f0ca8049988f1d7f'
#
#   [renv.packages.jquerylib]
#   package = 'jquerylib'
#   version = '0.1.4'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['htmltools']
#   hash = '5aab57a3bd297eee1c1d862735972182'
#
#   [renv.packages.jsonlite]
#   package = 'jsonlite'
#   version = '1.8.7'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['methods']
#   hash = '266a20443ca13c65688b2116d5220f76'
#
#   [renv.packages.knitr]
#   package = 'knitr'
#   version = '1.44'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'evaluate', 'highr', 'methods', 'tools', 'xfun', 'yaml']
#   hash = '60885b9f746c9dfaef110d070b5f7dc0'
#
#   [renv.packages.lazyeval]
#   package = 'lazyeval'
#   version = '0.2.2'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R']
#   hash = 'd908914ae53b04d4c0c0fd72ecc35370'
#
#   [renv.packages.lifecycle]
#   package = 'lifecycle'
#   version = '1.0.3'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'cli', 'glue', 'rlang']
#   hash = '001cecbeac1cff9301bdc3775ee46a86'
#
#   [renv.packages.magrittr]
#   package = 'magrittr'
#   version = '2.0.3'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R']
#   hash = '7ce2733a9826b3aeb1775d56fd305472'
#
#   [renv.packages.memoise]
#   package = 'memoise'
#   version = '2.0.1'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['cachem', 'rlang']
#   hash = 'e2817ccf4a065c5d9d7f2cfbe7c1d78c'
#
#   [renv.packages.mime]
#   package = 'mime'
#   version = '0.12'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['tools']
#   hash = '18e9c28c1d3ca1560ce30658b22ce104'
#
#   [renv.packages.openssl]
#   package = 'openssl'
#   version = '2.1.2'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['askpass']
#   hash = 'ea2475b073243d9d338aa8f086ce973e'
#
#   [renv.packages.pillar]
#   package = 'pillar'
#   version = '1.9.0'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['cli', 'fansi', 'glue', 'lifecycle', 'rlang', 'utf8', 'utils', 'vctrs']
#   hash = '15da5a8412f317beeee6175fbc76f4bb'
#
#   [renv.packages.pkgconfig]
#   package = 'pkgconfig'
#   version = '2.0.3'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['utils']
#   hash = '01f28d4278f15c76cddbea05899c5d6f'
#
#   [renv.packages.purrr]
#   package = 'purrr'
#   version = '1.0.2'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'cli', 'lifecycle', 'magrittr', 'rlang', 'vctrs']
#   hash = '1cba04a4e9414bdefc9dcaa99649a8dc'
#
#   [renv.packages.rappdirs]
#   package = 'rappdirs'
#   version = '0.3.3'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R']
#   hash = '5e3c5dc0b071b21fa128676560dbe94d'
#
#   [renv.packages.reactR]
#   package = 'reactR'
#   version = '0.5.0'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['htmltools']
#   hash = 'c9014fd1a435b2d790dd506589cb24e5'
#
#   [renv.packages.reactable]
#   package = 'reactable'
#   version = '0.4.4'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'digest', 'htmltools', 'htmlwidgets', 'jsonlite', 'reactR']
#   hash = '6069eb2a6597963eae0605c1875ff14c'
#
#   [renv.packages.renv]
#   package = 'renv'
#   version = '1.0.7'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['utils']
#   hash = '397b7b2a265bc5a7a06852524dabae20'
#
#   [renv.packages.rlang]
#   package = 'rlang'
#   version = '1.1.1'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'utils']
#   hash = 'a85c767b55f0bf9b7ad16c6d7baee5bb'
#
#   [renv.packages.rmarkdown]
#   package = 'rmarkdown'
#   version = '2.25'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'bslib', 'evaluate', 'fontawesome', 'htmltools', 'jquerylib', 'jsonlite', 'knitr', 'methods', 'stringr', 'tinytex', 'tools', 'utils', 'xfun', 'yaml']
#   hash = 'd65e35823c817f09f4de424fcdfa812a'
#
#   [renv.packages.sass]
#   package = 'sass'
#   version = '0.4.7'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R6', 'fs', 'htmltools', 'rappdirs', 'rlang']
#   hash = '6bd4d33b50ff927191ec9acbf52fd056'
#
#   [renv.packages.stringi]
#   package = 'stringi'
#   version = '1.7.12'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'stats', 'tools', 'utils']
#   hash = 'ca8bd84263c77310739d2cf64d84d7c9'
#
#   [renv.packages.stringr]
#   package = 'stringr'
#   version = '1.5.0'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'cli', 'glue', 'lifecycle', 'magrittr', 'rlang', 'stringi', 'vctrs']
#   hash = '671a4d384ae9d32fc47a14e98bfa3dc8'
#
#   [renv.packages.sys]
#   package = 'sys'
#   version = '3.4.2'
#   source = 'Repository'
#   repository = 'CRAN'
#   hash = '3a1be13d68d47a8cd0bfd74739ca1555'
#
#   [renv.packages.tibble]
#   package = 'tibble'
#   version = '3.2.1'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'fansi', 'lifecycle', 'magrittr', 'methods', 'pillar', 'pkgconfig', 'rlang', 'utils', 'vctrs']
#   hash = 'a84e2cc86d07289b3b6f5069df7a004c'
#
#   [renv.packages.tidyselect]
#   package = 'tidyselect'
#   version = '1.2.0'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'cli', 'glue', 'lifecycle', 'rlang', 'vctrs', 'withr']
#   hash = '79540e5fcd9e0435af547d885f184fd5'
#
#   [renv.packages.tinytex]
#   package = 'tinytex'
#   version = '0.47'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['xfun']
#   hash = '8d4ccb733843e513c1c1cdd66a759f0d'
#
#   [renv.packages.utf8]
#   package = 'utf8'
#   version = '1.2.4'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R']
#   hash = '62b65c52671e6665f803ff02954446e9'
#
#   [renv.packages.vctrs]
#   package = 'vctrs'
#   version = '0.6.5'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'cli', 'glue', 'lifecycle', 'rlang']
#   hash = 'c03fa420630029418f7e6da3667aac4a'
#
#   [renv.packages.withr]
#   package = 'withr'
#   version = '2.5.1'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['R', 'grDevices', 'graphics', 'stats']
#   hash = 'd77c6f74be05c33164e33fbc85540cae'
#
#   [renv.packages.xfun]
#   package = 'xfun'
#   version = '0.40'
#   source = 'Repository'
#   repository = 'CRAN'
#   requirements = ['stats', 'tools']
#   hash = 'be07d23211245fc7d4209f54c4e4ffc8'
#
#   [renv.packages.yaml]
#   package = 'yaml'
#   version = '2.3.8'
#   source = 'Repository'
#   repository = 'CRAN'
#   hash = '29240487a071f535f5e5d5a323b7afbd'
# --
#
ok 5 deploy no requirements file in 0ms # skip
error: Recipe `run` failed with exit code 1
Error occurred with content: connectwidgets-example

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for quarto-website-py-deps in 0ms # skip
ok 2 deploy quarto-website-py-deps in 52000ms
ok 3 redeploy quarto-website-py-deps in 14000ms
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 0ms # skip

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for stock-api-flask in 2000ms
ok 2 deploy stock-api-flask in 27000ms
ok 3 redeploy stock-api-flask in 6000ms
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 0ms

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for quarto-book-none in 0ms # skip
ok 2 deploy quarto-book-none in 9000ms
ok 3 redeploy quarto-book-none in 9000ms
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 0ms # skip

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for fastapi-simple in 3000ms
ok 2 deploy fastapi-simple in 19000ms
ok 3 redeploy fastapi-simple in 6000ms
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 0ms

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for quarto-website-py in 0ms # skip
ok 2 deploy quarto-website-py in 16000ms
ok 3 redeploy quarto-website-py in 14000ms
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 0ms # skip

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for pins-tutorial in 0ms # skip
ok 2 deploy pins-tutorial in 24000ms
ok 3 redeploy pins-tutorial in 10000ms
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 0ms # skip

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for portfolio-dashboard in 0ms # skip
ok 2 deploy portfolio-dashboard in 20000ms
ok 3 redeploy portfolio-dashboard in 20000ms
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 0ms # skip

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for voila-example in 3000ms
ok 2 deploy voila-example in 33000ms
ok 3 redeploy voila-example in 9000ms
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 0ms

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for quarto-website-none in 0ms # skip
ok 2 deploy quarto-website-none in 8000ms
ok 3 redeploy quarto-website-none in 6000ms
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 0ms # skip

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
not ok 1 setup_file failed
# (from function `setup_file' in test file contract/deploy.bats, line 19)
#   `R -e 'renv::restore(lockfile="renv.lock")' && \' failed
#
# R version 4.3.1 (2023-06-16) -- "Beagle Scouts"
# Copyright (C) 2023 The R Foundation for Statistical Computing
# Platform: aarch64-apple-darwin20 (64-bit)
#
# R is free software and comes with ABSOLUTELY NO WARRANTY.
# You are welcome to redistribute it under certain conditions.
# Type 'license()' or 'licence()' for distribution details.
#
#   Natural language support but running in an English locale
#
# R is a collaborative project with many contributors.
# Type 'contributors()' for more information and
# 'citation()' on how to cite R or R packages in publications.
#
# Type 'demo()' for some demos, 'help()' for on-line help, or
# 'help.start()' for an HTML browser interface to help.
# Type 'q()' to quit R.
#
# # Bootstrapping renv 0.15.2 --------------------------------------------------
# * Downloading renv 0.15.2 ... OK
# * Installing renv 0.15.2 ... Done!
# * Successfully installed and loaded renv 0.15.2.
# * Project '~/work/publishing-client/test/content/bundles/quarto-website-r-py-deps' loaded. [renv 0.15.2]
# > renv::restore(lockfile="renv.lock")
# The following package(s) will be updated:
#
# # CRAN ===============================
# - Rcpp          [1.0.12 -> 1.0.10]
# - askpass       [1.2.0 -> 1.1]
# - bslib         [0.5.1 -> 0.4.2]
# - cli           [3.6.2 -> 3.6.1]
# - cpp11         [0.4.6 -> 0.4.3]
# - curl          [repo: RSPM -> CRAN; ver: 5.2.1 -> 5.0.0]
# - digest        [0.6.35 -> 0.6.31]
# - dplyr         [1.1.3 -> 1.1.2]
# - evaluate      [repo: RSPM -> CRAN; ver: 0.22 -> 0.21]
# - fansi         [1.0.6 -> 1.0.4]
# - fontawesome   [0.5.2 -> 0.5.1]
# - fs            [1.6.4 -> 1.6.2]
# - glue          [1.7.0 -> 1.6.2]
# - htmltools     [0.5.6 -> 0.5.5]
# - jsonlite      [1.8.8 -> 1.8.4]
# - knitr         [repo: RSPM -> CRAN; ver: 1.44 -> 1.42]
# - lifecycle     [1.0.4 -> 1.0.3]
# - openssl       [2.1.2 -> 2.0.6]
# - packrat       [0.9.2 -> 0.9.1]
# - processx      [3.8.3 -> 3.8.1]
# - ps            [1.7.6 -> 1.7.5]
# - purrr         [1.0.2 -> 1.0.1]
# - rlang         [1.1.3 -> 1.1.1]
# - rmarkdown     [repo: RSPM -> CRAN; ver: 2.25 -> 2.21]
# - rsconnect     [1.2.2 -> 0.8.29]
# - rstudioapi    [0.15.0 -> 0.14]
# - sass          [0.4.7 -> 0.4.6]
# - sys           [3.4.2 -> 3.4.1]
# - tinytex       [repo: RSPM -> CRAN; ver: 0.47 -> 0.45]
# - utf8          [1.2.4 -> 1.2.3]
# - vctrs         [0.6.5 -> 0.6.2]
# - withr         [3.0.0 -> 2.5.0]
# - xfun          [repo: RSPM -> CRAN; ver: 0.40 -> 0.39]
# - yaml          [2.3.8 -> 2.3.7]
# - furrr         [* -> 0.3.1]
# - future        [* -> 1.32.0]
# - globals       [* -> 0.16.2]
# - listenv       [* -> 0.9.0]
# - parallelly    [* -> 1.35.0]
# - quarto        [* -> 1.2]
# - rsample       [* -> 1.1.1]
# - slider        [* -> 0.3.0]
# - warp          [* -> 0.2.0]
#
# Retrieving 'https://cran.rstudio.com/src/contrib/Archive/bslib/bslib_0.4.2.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cran.rstudio.com/src/contrib/Archive/sass/sass_0.4.6.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cran.rstudio.com/src/contrib/Archive/fs/fs_1.6.2.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cran.rstudio.com/src/contrib/Archive/cpp11/cpp11_0.4.3.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cran.rstudio.com/src/contrib/Archive/curl/curl_5.0.0.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://mran.microsoft.com/snapshot/2023-09-03/bin/macosx/big-sur-arm64/contrib/4.3/dplyr_1.1.2.tgz' ...
# Retrieving 'https://cran.rstudio.com/src/contrib/Archive/dplyr/dplyr_1.1.2.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://mran.microsoft.com/snapshot/2023-10-08/bin/macosx/big-sur-arm64/contrib/4.3/fansi_1.0.4.tgz' ...
# Warning: failed to find binary for 'dplyr 1.1.2' in package repositories
# Warning: failed to retrieve 'https://mran.microsoft.com/snapshot/2023-09-03/bin/macosx/big-sur-arm64/contrib/4.3/dplyr_1.1.2.tgz' [error code 28]
# Warning: failed to find source for 'dplyr 1.1.2' in package repositories
# Warning: failed to find binary for 'fansi 1.0.4' in package repositories
# Warning: failed to retrieve 'https://mran.microsoft.com/snapshot/2023-10-08/bin/macosx/big-sur-arm64/contrib/4.3/fansi_1.0.4.tgz' [error code 28]
# Error: failed to retrieve package 'dplyr@1.1.2'
# In addition: Warning messages:
# 1: curl: (28) Failed to connect to mran.microsoft.com port 443 after 20004 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20006 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20003 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20002 ms: Timeout was reached
# 2: curl: (28) Failed to connect to mran.microsoft.com port 443 after 20003 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20002 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20004 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20006 ms: Timeout was reached
# 3: failed to retrieve 'https://mran.microsoft.com/snapshot/2023-09-03/bin/macosx/big-sur-arm64/contrib/4.3/dplyr_1.1.2.tgz' [error code 28]
# 4: curl: (28) Failed to connect to mran.microsoft.com port 443 after 20006 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20005 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20003 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20003 ms: Timeout was reached
# 5: curl: (28) Failed to connect to mran.microsoft.com port 443 after 20005 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20005 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20006 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20006 ms: Timeout was reached
# Traceback (most recent calls last):
# 8: renv::restore(lockfile = "renv.lock")
# 7: renv_restore_run_actions(project, diff, current, lockfile, rebuild)
# 6: retrieve(packages)
# 5: handler(package, renv_retrieve_impl(package))
# 4: renv_retrieve_impl(package)
# 3: renv_retrieve_repos(record)
# 2: stopf("failed to retrieve package '%s'", renv_record_format_remote(record))
# 1: stop(sprintf(fmt, ...), call. = call.)
# Execution halted
# publisher: error: expected "<guid>"
# bats warning: Executed 1 instead of expected 5 tests
error: Recipe `run` failed with exit code 1
Error occurred with content: quarto-website-r-py-deps

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for fastapitableau-simple in 3000ms
ok 2 deploy fastapitableau-simple in 18000ms
ok 3 redeploy fastapitableau-simple in 5000ms
ok 4 check for toml file in 0ms
not ok 5 deploy no requirements file in 0ms
# (from function `assert_output' in file contract/../node_modules/bats-assert/src/assert.bash, line 231,
#  in test file contract/deploy.bats, line 140)
#   `assert_output --partial "\' failed
#
# -- output does not contain substring --
# substring (4 lines):
#   can't find the package file (requirements.txt) in the project directory.
#   Create the file, listing the packages your project depends on.
#   Or scan your project dependencies using the publisher UI or
#   the 'publisher requirements create' command.
# output (2 lines):
#
#   /Users/kgartland/work/publishing-client/test/content/bundles/fastapitableau-simple/.posit/publish/default.toml:10:1: unknown key 'python.package-file'.
# --
#
error: Recipe `run` failed with exit code 1
Error occurred with content: fastapitableau-simple

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for parameterized_report in 0ms # skip
not ok 2 deploy parameterized_report in 2000ms
# (from function `assert_success' in file contract/../node_modules/bats-assert/src/assert.bash, line 114,
#  from function `deploy_assertion' in file contract/deploy.bats, line 26,
#  in test file contract/deploy.bats, line 117)
#   `deploy_assertion' failed
#
# -- command failed --
# status : 1
# output (4 lines):
#   Deploy to server http://52.90.67.68:3939 using account bats and configuration parameterized_report, creating deployment ci_deploy
#   Check Configuration...             [ERROR] unknown (message="runtime settings cannot be applied to static content")
#
#   runtime settings cannot be applied to static content.
# --
#
not ok 3 redeploy parameterized_report in 0ms
# (from function `assert_success' in file contract/../node_modules/bats-assert/src/assert.bash, line 114,
#  from function `deploy_assertion' in file contract/deploy.bats, line 26,
#  in test file contract/deploy.bats, line 124)
#   `deploy_assertion' failed
#
# -- command failed --
# status : 1
# output (23 lines):
#   2024/05/13 11:15:03 ERROR Error running command command=quarto error="exit status 1"
#   [91mERROR: YAMLError: unknown tag !<!r> at line 11, column 26:
#         exprtruthiness: !r TRUE
#                                ^
#   Did you try to use a '!' in a YAML string? If so, you need to add explicit quotes to your string.
#
#   Stack trace:
#         exprtruthiness: !r TRUE
#                                ^
#   Did you try to use a '!' in a YAML string? If so, you need to add explicit quotes to your string.
#       at generateError (file:///Applications/quarto/bin/quarto.js:10480:12)
#       at throwError (file:///Applications/quarto/bin/quarto.js:10483:11)
#       at composeNode (file:///Applications/quarto/bin/quarto.js:11350:20)
#       at readBlockMapping (file:///Applications/quarto/bin/quarto.js:11117:17)
#       at composeNode (file:///Applications/quarto/bin/quarto.js:11299:84)
#       at readBlockMapping (file:///Applications/quarto/bin/quarto.js:11117:17)
#       at composeNode (file:///Applications/quarto/bin/quarto.js:11299:84)
#       at readDocument (file:///Applications/quarto/bin/quarto.js:11413:5)
#       at loadDocuments (file:///Applications/quarto/bin/quarto.js:11448:9)
#       at load (file:///Applications/quarto/bin/quarto.js:11453:23)[39m
#   2024/05/13 11:15:03 WARN quarto inspect failed file=/Users/kgartland/work/publishing-client/test/content/bundles/parameterized_report/parameterized.Rmd error="quarto inspect failed: exit status 1"
#
#   there is no account for the server ''.
# --
#
not ok 4 check for toml file in 1000ms
# (from function `assert_output' in file contract/../node_modules/bats-assert/src/assert.bash, line 231,
#  in test file contract/deploy.bats, line 129)
#   `assert_output --partial "type = '${CONTENT_TYPE}'"' failed
#
# -- output does not contain substring --
# substring (1 lines):
#   type = 'rmd'
# output (34 lines):
#   # This file is automatically generated by Posit Publisher; do not edit.
#   '$schema' = 'https://cdn.posit.co/publisher/schemas/posit-publishing-record-schema-v3.json'
#   server_type = 'connect'
#   server_url = ''
#   client_version = '1.0.alpha6-106-gcb3e141e'
#   created_at = '2024-05-13T11:15:02-04:00'
#   configuration_name = 'parameterized_report'
#   deployed_at = '2024-05-13T11:15:02-04:00'
#
#   [deployment_error]
#   code = 'unknown'
#   message = 'runtime settings cannot be applied to static content'
#   operation = 'publish/checkCapabilities'
#
#   [configuration]
#   '$schema' = 'https://cdn.posit.co/publisher/schemas/posit-publishing-schema-v3.json'
#   type = 'html'
#   entrypoint = 'index.htm'
#   validate = true
#   has_parameters = false
#   files = ['*']
#   title = 'parameterized_report'
#   description = 'parameterized_report description'
#
#   [configuration.connect]
#   [configuration.connect.runtime]
#   connection_timeout = 25
#   read_timeout = 30
#   init_timeout = 35
#   idle_timeout = 40
#   max_processes = 2
#   min_processes = 1
#   max_conns_per_process = 5
#   load_factor = 0.8
# --
#
ok 5 deploy no requirements file in 0ms # skip
error: Recipe `run` failed with exit code 1
Error occurred with content: parameterized_report

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
not ok 1 setup_file failed
# (from function `setup_file' in test file contract/deploy.bats, line 19)
#   `R -e 'renv::restore(lockfile="renv.lock")' && \' failed
#
# R version 4.3.1 (2023-06-16) -- "Beagle Scouts"
# Copyright (C) 2023 The R Foundation for Statistical Computing
# Platform: aarch64-apple-darwin20 (64-bit)
#
# R is free software and comes with ABSOLUTELY NO WARRANTY.
# You are welcome to redistribute it under certain conditions.
# Type 'license()' or 'licence()' for distribution details.
#
#   Natural language support but running in an English locale
#
# R is a collaborative project with many contributors.
# Type 'contributors()' for more information and
# 'citation()' on how to cite R or R packages in publications.
#
# Type 'demo()' for some demos, 'help()' for on-line help, or
# 'help.start()' for an HTML browser interface to help.
# Type 'q()' to quit R.
#
# # Bootstrapping renv 0.15.2 --------------------------------------------------
# * Downloading renv 0.15.2 ... OK
# * Installing renv 0.15.2 ... Done!
# * Successfully installed and loaded renv 0.15.2.
# * Project '~/work/publishing-client/test/content/bundles/quarto-website-r-py-separate-files' loaded. [renv 0.15.2]
# > renv::restore(lockfile="renv.lock")
# The following package(s) will be updated:
#
# # CRAN ===============================
# - Rcpp          [1.0.12 -> 1.0.10]
# - askpass       [1.2.0 -> 1.1]
# - bslib         [0.5.1 -> 0.4.2]
# - cli           [3.6.2 -> 3.6.1]
# - curl          [repo: RSPM -> CRAN; ver: 5.2.1 -> 5.0.0]
# - digest        [0.6.35 -> 0.6.31]
# - evaluate      [repo: RSPM -> CRAN; ver: 0.22 -> 0.21]
# - fontawesome   [0.5.2 -> 0.5.1]
# - fs            [1.6.4 -> 1.6.2]
# - glue          [1.7.0 -> 1.6.2]
# - htmltools     [0.5.6 -> 0.5.5]
# - jsonlite      [1.8.8 -> 1.8.4]
# - knitr         [repo: RSPM -> CRAN; ver: 1.44 -> 1.42]
# - lifecycle     [1.0.4 -> 1.0.3]
# - openssl       [2.1.2 -> 2.0.6]
# - packrat       [0.9.2 -> 0.9.1]
# - processx      [3.8.3 -> 3.8.1]
# - ps            [1.7.6 -> 1.7.5]
# - rlang         [1.1.3 -> 1.1.1]
# - rmarkdown     [repo: RSPM -> CRAN; ver: 2.25 -> 2.21]
# - rsconnect     [1.2.2 -> 0.8.29]
# - rstudioapi    [0.15.0 -> 0.14]
# - sass          [0.4.7 -> 0.4.6]
# - sys           [3.4.2 -> 3.4.1]
# - tinytex       [repo: RSPM -> CRAN; ver: 0.47 -> 0.45]
# - vctrs         [0.6.5 -> 0.6.2]
# - xfun          [repo: RSPM -> CRAN; ver: 0.40 -> 0.39]
# - yaml          [2.3.8 -> 2.3.7]
# - quarto        [* -> 1.2]
#
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/bslib/bslib_0.4.2.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/sass/sass_0.4.6.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/fs/fs_1.6.2.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/curl/curl_5.0.0.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://mran.microsoft.com/snapshot/2023-10-02/bin/macosx/big-sur-arm64/contrib/4.3/evaluate_0.21.tgz' ...
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/evaluate/evaluate_0.21.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/fontawesome/fontawesome_0.5.1.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/knitr/knitr_1.42.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/xfun/xfun_0.39.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/openssl/openssl_2.0.6.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://mran.microsoft.com/snapshot/2023-09-05/bin/macosx/big-sur-arm64/contrib/4.3/packrat_0.9.1.tgz' ...
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/packrat/packrat_0.9.1.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/processx/processx_3.8.1.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/Rcpp/Rcpp_1.0.10.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/rmarkdown/rmarkdown_2.21.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/vctrs/vctrs_0.6.2.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/tinytex/tinytex_0.45.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/rsconnect/rsconnect_0.8.29.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/rstudioapi/rstudioapi_0.14.tar.gz' ...
# 	OK [file is up to date]
# Retrieving 'https://mran.microsoft.com/snapshot/2023-09-19/bin/macosx/big-sur-arm64/contrib/4.3/quarto_1.2.tgz' ...
# Retrieving 'https://cloud.r-project.org/src/contrib/Archive/quarto/quarto_1.2.tar.gz' ...
# 	OK [file is up to date]
# Installing sys [3.4.1] ...
# 	OK [linked cache]
# Installing askpass [1.1] ...
# 	OK [linked cache]
# Installing digest [0.6.31] ...
# 	OK [linked cache]
# Installing rlang [1.1.1] ...
# 	OK [linked cache]
# Installing htmltools [0.5.5] ...
# 	OK [linked cache]
# Installing jsonlite [1.8.4] ...
# 	OK [linked cache]
# Installing fs [1.6.2] ...
# 	FAILED
# Error installing package 'fs':
# ==============================
#
# * installing to library ‘/Users/kgartland/work/publishing-client/test/content/bundles/quarto-website-r-py-separate-files/renv/staging/1’
# * installing *source* package ‘fs’ ...
# ** package ‘fs’ successfully unpacked and MD5 sums checked
# ** using staged installation
# ** libs
# using C++ compiler: ‘Apple clang version 15.0.0 (clang-1500.3.9.4)’
# using SDK: ‘MacOSX14.4.sdk’
# clang++ -arch arm64 -std=gnu++17 -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I./libuv-1.44.2/include -I. -pthread  -I/opt/R/arm64/include    -fPIC  -falign-functions=64 -Wall -g -O2  -c dir.cc -o dir.o
# clang++ -arch arm64 -std=gnu++17 -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I./libuv-1.44.2/include -I. -pthread  -I/opt/R/arm64/include    -fPIC  -falign-functions=64 -Wall -g -O2  -c error.cc -o error.o
# clang++ -arch arm64 -std=gnu++17 -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I./libuv-1.44.2/include -I. -pthread  -I/opt/R/arm64/include    -fPIC  -falign-functions=64 -Wall -g -O2  -c file.cc -o file.o
# In file included from file.cc:13:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/vector:321:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_bool.h:20:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_integral.h:32:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/locale:202:
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:966:34: error: too many arguments provided to function-like macro invocation
#     int length(state_type& __st, const extern_type* __frm, const extern_type* __end, size_t __mx) const
#                                  ^
# /Library/Frameworks/R.framework/Resources/include/Rinternals.h:968:9: note: macro 'length' defined here
# #define length(x)               Rf_length(x)
#         ^
# In file included from file.cc:13:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/vector:321:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_bool.h:20:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_integral.h:32:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/locale:202:
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:965:5: error: '__abi_tag__' attribute only applies to structs, variables, functions, and namespaces
#     _LIBCPP_INLINE_VISIBILITY
#     ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__config:891:37: note: expanded from macro '_LIBCPP_INLINE_VISIBILITY'
# #  define _LIBCPP_INLINE_VISIBILITY _LIBCPP_HIDE_FROM_ABI
#                                     ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__config:870:26: note: expanded from macro '_LIBCPP_HIDE_FROM_ABI'
#           __attribute__((__abi_tag__(_LIBCPP_TOSTRING(_LIBCPP_ODR_SIGNATURE))))
#                          ^
# In file included from file.cc:13:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/vector:321:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_bool.h:20:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_integral.h:32:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/locale:202:
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:966:15: error: expected ';' at end of declaration list
#     int length(state_type& __st, const extern_type* __frm, const extern_type* __end, size_t __mx) const
#               ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:1052:34: error: too many arguments provided to function-like macro invocation
#     int length(state_type& __st, const extern_type* __frm, const extern_type* __end, size_t __mx) const
#                                  ^
# /Library/Frameworks/R.framework/Resources/include/Rinternals.h:968:9: note: macro 'length' defined here
# #define length(x)               Rf_length(x)
#         ^
# In file included from file.cc:13:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/vector:321:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_bool.h:20:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_integral.h:32:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/locale:202:
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:1051:5: error: '__abi_tag__' attribute only applies to structs, variables, functions, and namespaces
#     _LIBCPP_INLINE_VISIBILITY
#     ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__config:891:37: note: expanded from macro '_LIBCPP_INLINE_VISIBILITY'
# #  define _LIBCPP_INLINE_VISIBILITY _LIBCPP_HIDE_FROM_ABI
#                                     ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__config:870:26: note: expanded from macro '_LIBCPP_HIDE_FROM_ABI'
#           __attribute__((__abi_tag__(_LIBCPP_TOSTRING(_LIBCPP_ODR_SIGNATURE))))
#                          ^
# In file included from file.cc:13:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/vector:321:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_bool.h:20:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_integral.h:32:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/locale:202:
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:1052:15: error: expected ';' at end of declaration list
#     int length(state_type& __st, const extern_type* __frm, const extern_type* __end, size_t __mx) const
#               ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:1137:34: error: too many arguments provided to function-like macro invocation
#     int length(state_type& __st, const extern_type* __frm, const extern_type* __end, size_t __mx) const
#                                  ^
# /Library/Frameworks/R.framework/Resources/include/Rinternals.h:968:9: note: macro 'length' defined here
# #define length(x)               Rf_length(x)
#         ^
# In file included from file.cc:13:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/vector:321:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_bool.h:20:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_integral.h:32:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/locale:202:
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:1136:5: error: '__abi_tag__' attribute only applies to structs, variables, functions, and namespaces
#     _LIBCPP_INLINE_VISIBILITY
#     ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__config:891:37: note: expanded from macro '_LIBCPP_INLINE_VISIBILITY'
# #  define _LIBCPP_INLINE_VISIBILITY _LIBCPP_HIDE_FROM_ABI
#                                     ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__config:870:26: note: expanded from macro '_LIBCPP_HIDE_FROM_ABI'
#           __attribute__((__abi_tag__(_LIBCPP_TOSTRING(_LIBCPP_ODR_SIGNATURE))))
#                          ^
# In file included from file.cc:13:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/vector:321:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_bool.h:20:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_integral.h:32:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/locale:202:
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:1137:15: error: expected ';' at end of declaration list
#     int length(state_type& __st, const extern_type* __frm, const extern_type* __end, size_t __mx) const
#               ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:1313:34: error: too many arguments provided to function-like macro invocation
#     int length(state_type& __st, const extern_type* __frm, const extern_type* __end, size_t __mx) const
#                                  ^
# /Library/Frameworks/R.framework/Resources/include/Rinternals.h:968:9: note: macro 'length' defined here
# #define length(x)               Rf_length(x)
#         ^
# In file included from file.cc:13:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/vector:321:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_bool.h:20:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_integral.h:32:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/locale:202:
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:1312:5: error: '__abi_tag__' attribute only applies to structs, variables, functions, and namespaces
#     _LIBCPP_INLINE_VISIBILITY
#     ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__config:891:37: note: expanded from macro '_LIBCPP_INLINE_VISIBILITY'
# #  define _LIBCPP_INLINE_VISIBILITY _LIBCPP_HIDE_FROM_ABI
#                                     ^
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__config:870:26: note: expanded from macro '_LIBCPP_HIDE_FROM_ABI'
#           __attribute__((__abi_tag__(_LIBCPP_TOSTRING(_LIBCPP_ODR_SIGNATURE))))
#                          ^
# In file included from file.cc:13:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/vector:321:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_bool.h:20:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__format/formatter_integral.h:32:
# In file included from /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/locale:202:
# /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1/__locale:1313:15: error: expected ';' at end of declaration list
#     int length(state_type& __st, const extern_type* __frm, const extern_type* __end, size_t __mx) const
#               ^
# 12 errors generated.
# make: *** [file.o] Error 1
# ERROR: compilation failed for package ‘fs’
# * removing ‘/Users/kgartland/work/publishing-client/test/content/bundles/quarto-website-r-py-separate-files/renv/staging/1/fs’
# Error: install of package 'fs' failed [error code 1]
# In addition: Warning messages:
# 1: curl: (28) Failed to connect to mran.microsoft.com port 443 after 20005 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20004 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20002 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20003 ms: Timeout was reached
# 2: curl: (28) Failed to connect to mran.microsoft.com port 443 after 20004 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20005 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20001 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20003 ms: Timeout was reached
# 3: failed to retrieve 'https://mran.microsoft.com/snapshot/2023-10-02/bin/macosx/big-sur-arm64/contrib/4.3/evaluate_0.21.tgz' [error code 28]
# 4: curl: (28) Failed to connect to mran.microsoft.com port 443 after 20003 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20001 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20005 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20002 ms: Timeout was reached
# 5: failed to retrieve 'https://mran.microsoft.com/snapshot/2023-09-05/bin/macosx/big-sur-arm64/contrib/4.3/packrat_0.9.1.tgz' [error code 28]
# 6: curl: (28) Failed to connect to mran.microsoft.com port 443 after 20002 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20004 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20006 ms: Timeout was reachedcurl: (28) Failed to connect to mran.microsoft.com port 443 after 20002 ms: Timeout was reached
# 7: failed to retrieve 'https://mran.microsoft.com/snapshot/2023-09-19/bin/macosx/big-sur-arm64/contrib/4.3/quarto_1.2.tgz' [error code 28]
# Traceback (most recent calls last):
# 12: renv::restore(lockfile = "renv.lock")
# 11: renv_restore_run_actions(project, diff, current, lockfile, rebuild)
# 10: renv_install_impl(records)
#  9: renv_install_staged(records)
#  8: renv_install_default(records)
#  7: handler(package, renv_install_package(record))
#  6: renv_install_package(record)
#  5: withCallingHandlers(renv_install_package_impl(record), error = function(e) {
#         vwritef("\tFAILED")
#         writef(e$output)
#     })
#  4: renv_install_package_impl(record)
#  3: r_cmd_install(package, path)
#  2: r_exec_error(package, output, "install", status)
#  1: stop(error)
# Execution halted
# publisher: error: expected "<guid>"
# bats warning: Executed 1 instead of expected 5 tests
error: Recipe `run` failed with exit code 1
Error occurred with content: quarto-website-r-py-separate-files

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for quarto-proj-py in 0ms # skip
ok 2 deploy quarto-proj-py in 12000ms
ok 3 redeploy quarto-proj-py in 10000ms
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 0ms # skip

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for quarto-proj-none in 0ms # skip
ok 2 deploy quarto-proj-none in 7000ms
ok 3 redeploy quarto-proj-none in 7000ms
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 0ms # skip

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for plumber-new-swagger in 0ms # skip
ok 2 deploy plumber-new-swagger in 238000ms
ok 3 redeploy plumber-new-swagger in 9000ms
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 0ms # skip

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for stock-report-jupyter in 2000ms
ok 2 deploy stock-report-jupyter in 59000ms
ok 3 redeploy stock-report-jupyter in 14000ms
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 0ms

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for top-5-income-share-bokeh in 2000ms
ok 2 deploy top-5-income-share-bokeh in 26000ms
ok 3 redeploy top-5-income-share-bokeh in 6000ms
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 1000ms

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for plumber-tableau-textcase in 0ms # skip
ok 2 deploy plumber-tableau-textcase in 123000ms
ok 3 redeploy plumber-tableau-textcase in 10000ms
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 0ms # skip

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for python-flask-restful in 2000ms
ok 2 deploy python-flask-restful in 15000ms
ok 3 redeploy python-flask-restful in 5000ms
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 0ms

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for top-5-income-share-shiny in 2000ms
ok 2 deploy top-5-income-share-shiny in 33000ms
ok 3 redeploy top-5-income-share-shiny in 7000ms
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 1000ms

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for python-falcon-asgi in 2000ms
ok 2 deploy python-falcon-asgi in 15000ms
ok 3 redeploy python-falcon-asgi in 5000ms
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 0ms

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for python-sanic in 2000ms
ok 2 deploy python-sanic in 15000ms
ok 3 redeploy python-sanic in 6000ms
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 0ms

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for blastula-multiple-images in 0ms # skip
ok 2 deploy blastula-multiple-images in 11000ms
ok 3 redeploy blastula-multiple-images in 11000ms
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 0ms # skip

> deploy
> bats -r -T -t ./contract/deploy.bats

1..5
ok 1 requirements create works as expected for portfolio-report in 0ms # skip
ok 2 deploy portfolio-report in 16000ms
ok 3 redeploy portfolio-report in 16000ms
ok 4 check for toml file in 0ms
ok 5 deploy no requirements file in 0ms # skip
